<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RiskFactorAggregateIR.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.simm.margin</a> &gt; <span class="el_source">RiskFactorAggregateIR.java</span></div><h1>RiskFactorAggregateIR.java</h1><pre class="source lang-java linenums">
package org.drip.simm.margin;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * 
 *  This file is part of DRIP, a free-software/open-source library for buy/side financial/trading model
 *  	libraries targeting analysts and developers
 *  	https://lakshmidrip.github.io/DRIP/
 *  
 *  DRIP is composed of four main libraries:
 *  
 *  - DRIP Fixed Income - https://lakshmidrip.github.io/DRIP-Fixed-Income/
 *  - DRIP Asset Allocation - https://lakshmidrip.github.io/DRIP-Asset-Allocation/
 *  - DRIP Numerical Optimizer - https://lakshmidrip.github.io/DRIP-Numerical-Optimizer/
 *  - DRIP Statistical Learning - https://lakshmidrip.github.io/DRIP-Statistical-Learning/
 * 
 *  - DRIP Fixed Income: Library for Instrument/Trading Conventions, Treasury Futures/Options,
 *  	Funding/Forward/Overnight Curves, Multi-Curve Construction/Valuation, Collateral Valuation and XVA
 *  	Metric Generation, Calibration and Hedge Attributions, Statistical Curve Construction, Bond RV
 *  	Metrics, Stochastic Evolution and Option Pricing, Interest Rate Dynamics and Option Pricing, LMM
 *  	Extensions/Calibrations/Greeks, Algorithmic Differentiation, and Asset Backed Models and Analytics.
 * 
 *  - DRIP Asset Allocation: Library for model libraries for MPT framework, Black Litterman Strategy
 *  	Incorporator, Holdings Constraint, and Transaction Costs.
 * 
 *  - DRIP Numerical Optimizer: Library for Numerical Optimization and Spline Functionality.
 * 
 *  - DRIP Statistical Learning: Library for Statistical Evaluation and Machine Learning.
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;RiskFactorAggregateIR&lt;/i&gt; holds the Sensitivity Margin Aggregates for each of the IR Risk Factors -
 * OIS, LIBOR 1M, LIBOR 3M, LIBOR 6M LIBOR 12M, PRIME, and MUNICIPAL. The References are:
 * 
 * &lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *  	&lt;li&gt;
 *  		Andersen, L. B. G., M. Pykhtin, and A. Sokol (2017): Credit Exposure in the Presence of Initial
 *  			Margin https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2806156 &lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Albanese, C., S. Caenazzo, and O. Frankel (2017): Regression Sensitivities for Initial Margin
 *  			Calculations https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2763488 &lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Anfuso, F., D. Aziz, P. Giltinan, and K. Loukopoulus (2017): A Sound Modeling and Back-testing
 *  			Framework for Forecasting Initial Margin Requirements
 *  				https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2716279 &lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Caspers, P., P. Giltinan, R. Lichters, and N. Nowaczyk (2017): Forecasting Initial Margin
 *  			Requirements - A Model Evaluation https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2911167
 *  				&lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		International Swaps and Derivatives Association (2017): SIMM v2.0 Methodology
 *  			https://www.isda.org/a/oFiDE/isda-simm-v2.pdf
 *  	&lt;/li&gt;
 *  &lt;/ul&gt;
 * 
 * &lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt;       = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/simm&quot;&gt;SIMM&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt;       = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/simm/margin&quot;&gt;Margin&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Specification&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal/NumericalOptimizer&quot;&gt;Numerical Optimizer Library&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 * &lt;br&gt;&lt;br&gt;
 * 
 * @author Lakshmi Krishnamurthy
 */

public class RiskFactorAggregateIR
{
<span class="nc" id="L92">	private double _concentrationRiskFactor = java.lang.Double.NaN;</span>
<span class="nc" id="L93">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _oisSensitivityMargin = null;</span>
<span class="nc" id="L94">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _primeSensitivityMargin = null;</span>
<span class="nc" id="L95">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor1MSensitivityMargin = null;</span>
<span class="nc" id="L96">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor3MSensitivityMargin = null;</span>
<span class="nc" id="L97">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor6MSensitivityMargin = null;</span>
<span class="nc" id="L98">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor12MSensitivityMargin = null;</span>
<span class="nc" id="L99">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _municipalSensitivityMargin = null;</span>

	/**
	 * RiskFactorAggregateIR Constructor
	 * 
	 * @param oisSensitivityMargin The OIS Sensitivity Margin
	 * @param libor1MSensitivityMargin The LIBOR 1M Sensitivity Margin
	 * @param libor3MSensitivityMargin The LIBOR 3M Sensitivity Margin
	 * @param libor6MSensitivityMargin The LIBOR 6M Sensitivity Margin
	 * @param libor12MSensitivityMargin The LIBOR 12M Sensitivity Margin
	 * @param primeSensitivityMargin The PRIME Sensitivity Margin
	 * @param municipalSensitivityMargin The Municipal Sensitivity Margin
	 // * @param sensitivityMargin The Bucket Sensitivity Margin
	 * @param concentrationRiskFactor The Currency's Concentration Risk Factor
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public RiskFactorAggregateIR (
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMargin,
		final double concentrationRiskFactor)
		throws java.lang.Exception
<span class="nc" id="L127">	{</span>
<span class="nc bnc" id="L128" title="All 6 branches missed.">		if (null == (_oisSensitivityMargin = oisSensitivityMargin) || 0 == _oisSensitivityMargin.size() ||</span>
			null == (_libor1MSensitivityMargin = libor1MSensitivityMargin) ||
<span class="nc bnc" id="L130" title="All 4 branches missed.">				0 == _libor1MSensitivityMargin.size() ||</span>
			null == (_libor3MSensitivityMargin = libor3MSensitivityMargin) ||
<span class="nc bnc" id="L132" title="All 4 branches missed.">				0 == _libor3MSensitivityMargin.size() ||</span>
			null == (_libor6MSensitivityMargin = libor6MSensitivityMargin) ||
<span class="nc bnc" id="L134" title="All 4 branches missed.">				0 == _libor6MSensitivityMargin.size() ||</span>
			null == (_libor12MSensitivityMargin = libor12MSensitivityMargin) ||
<span class="nc bnc" id="L136" title="All 4 branches missed.">				0 == _libor12MSensitivityMargin.size() ||</span>
			null == (_municipalSensitivityMargin = municipalSensitivityMargin) ||
<span class="nc bnc" id="L138" title="All 4 branches missed.">				0 == _municipalSensitivityMargin.size() ||</span>
			null == (_primeSensitivityMargin = primeSensitivityMargin) ||
<span class="nc bnc" id="L140" title="All 2 branches missed.">				0 == _primeSensitivityMargin.size() ||</span>
<span class="nc bnc" id="L141" title="All 2 branches missed.">			!org.drip.quant.common.NumberUtil.IsValid (_concentrationRiskFactor = concentrationRiskFactor))</span>
		 {
<span class="nc" id="L143">			 throw new java.lang.Exception (&quot;RiskFactorAggregateIR Constructor =&gt; Invalid Inputs&quot;);</span>
		 }
<span class="nc" id="L145">	}</span>

	/**
	 * Retrieve the OIS Sensitivity Margin Map
	 * 
	 * @return The OIS Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMargin()
	{
<span class="nc" id="L155">		return _oisSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 1M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 1M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMargin()
	{
<span class="nc" id="L166">		return _libor1MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 3M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 3M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMargin()
	{
<span class="nc" id="L177">		return _libor3MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 6M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 6M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMargin()
	{
<span class="nc" id="L188">		return _libor6MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 12M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 12M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMargin()
	{
<span class="nc" id="L199">		return _libor12MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the PRIME Sensitivity Margin Map
	 * 
	 * @return The PRIME Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMargin()
	{
<span class="nc" id="L210">		return _primeSensitivityMargin;</span>
	}

	/**
	 * Retrieve the MUNICIPAL Sensitivity Margin Map
	 * 
	 * @return The MUNICIPAL Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMargin()
	{
<span class="nc" id="L221">		return _municipalSensitivityMargin;</span>
	}

	/**
	 * Retrieve the Bucket Concentration Risk Factor
	 * 
	 * @return The Bucket Concentration Risk Factor
	 */

	public double concentrationRiskFactor()
	{
<span class="nc" id="L232">		return _concentrationRiskFactor;</span>
	}

	/**
	 * Compute the Cumulative OIS Sensitivity Margin
	 * 
	 * @return The Cumulative OIS Sensitivity Margin
	 */

	public double cumulativeOISSensitivityMargin()
	{
<span class="nc" id="L243">		double cumulativeOISSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L246" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L248">			cumulativeOISSensitivityMargin = cumulativeOISSensitivityMargin +</span>
<span class="nc" id="L249">				oisSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L250">		}</span>

<span class="nc" id="L252">		return cumulativeOISSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR1M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR1M Sensitivity Margin
	 */

	public double cumulativeLIBOR1MSensitivityMargin()
	{
<span class="nc" id="L263">		double cumulativeLIBOR1MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L266" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L268">			cumulativeLIBOR1MSensitivityMargin = cumulativeLIBOR1MSensitivityMargin +</span>
<span class="nc" id="L269">				libor1MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L270">		}</span>

<span class="nc" id="L272">		return cumulativeLIBOR1MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR3M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR3M Sensitivity Margin
	 */

	public double cumulativeLIBOR3MSensitivityMargin()
	{
<span class="nc" id="L283">		double cumulativeLIBOR3MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L286" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L288">			cumulativeLIBOR3MSensitivityMargin = cumulativeLIBOR3MSensitivityMargin +</span>
<span class="nc" id="L289">				libor3MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L290">		}</span>

<span class="nc" id="L292">		return cumulativeLIBOR3MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR6M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR6M Sensitivity Margin
	 */

	public double cumulativeLIBOR6MSensitivityMargin()
	{
<span class="nc" id="L303">		double cumulativeLIBOR6MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L306" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L308">			cumulativeLIBOR6MSensitivityMargin = cumulativeLIBOR6MSensitivityMargin +</span>
<span class="nc" id="L309">				libor6MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L310">		}</span>

<span class="nc" id="L312">		return cumulativeLIBOR6MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR12M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR12M Sensitivity Margin
	 */

	public double cumulativeLIBOR12MSensitivityMargin()
	{
<span class="nc" id="L323">		double cumulativeLIBOR12MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L326" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L328">			cumulativeLIBOR12MSensitivityMargin = cumulativeLIBOR12MSensitivityMargin +</span>
<span class="nc" id="L329">				libor12MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L330">		}</span>

<span class="nc" id="L332">		return cumulativeLIBOR12MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative PRIME Sensitivity Margin
	 * 
	 * @return The Cumulative PRIME Sensitivity Margin
	 */

	public double cumulativePRIMESensitivityMargin()
	{
<span class="nc" id="L343">		double cumulativePRIMESensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L346" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L348">			cumulativePRIMESensitivityMargin = cumulativePRIMESensitivityMargin +</span>
<span class="nc" id="L349">				primeSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L350">		}</span>

<span class="nc" id="L352">		return cumulativePRIMESensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative MUNICIPAL Sensitivity Margin
	 * 
	 * @return The Cumulative MUNICIPAL Sensitivity Margin
	 */

	public double cumulativeMUNICIPALSensitivityMargin()
	{
<span class="nc" id="L363">		double cumulativeMUNICIPALSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L366" title="All 2 branches missed.">			_municipalSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L368">			cumulativeMUNICIPALSensitivityMargin = cumulativeMUNICIPALSensitivityMargin +</span>
<span class="nc" id="L369">				municipalSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L370">		}</span>

<span class="nc" id="L372">		return cumulativeMUNICIPALSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative Sensitivity Margin
	 * 
	 * @return The Cumulative Sensitivity Margin
	 */

	public double cumulativeSensitivityMargin()
	{
<span class="nc" id="L383">		return cumulativeOISSensitivityMargin() +</span>
<span class="nc" id="L384">			cumulativeLIBOR1MSensitivityMargin() +</span>
<span class="nc" id="L385">			cumulativeLIBOR3MSensitivityMargin() +</span>
<span class="nc" id="L386">			cumulativeLIBOR6MSensitivityMargin() +</span>
<span class="nc" id="L387">			cumulativeLIBOR12MSensitivityMargin() +</span>
<span class="nc" id="L388">			cumulativePRIMESensitivityMargin() +</span>
<span class="nc" id="L389">			cumulativeMUNICIPALSensitivityMargin();</span>
	}

	/**
	 * Compute the Linear OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_OIS (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L406" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L408">			throw new java.lang.Exception</span>
				(&quot;RiskFactorAggregateIR::linearMarginCovariance_OIS_OIS =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L412">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L413">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L415">		double linearMarginCovariance_OIS_OIS = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginOuterEntry :
<span class="nc bnc" id="L418" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L420">			java.lang.String outerTenor = oisSensitivityMarginOuterEntry.getKey();</span>

<span class="nc" id="L422">			double outerSensitivityMargin = oisSensitivityMarginOuterEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginInnerEntry :
<span class="nc bnc" id="L425" title="All 2 branches missed.">				_oisSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L427">				java.lang.String innerTenor = oisSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L429">				linearMarginCovariance_OIS_OIS = linearMarginCovariance_OIS_OIS + outerSensitivityMargin *</span>
<span class="nc" id="L430">					oisSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L436">			}</span>
<span class="nc" id="L437">		}</span>

<span class="nc" id="L439">		return linearMarginCovariance_OIS_OIS;</span>
	}

	/**
	 * Compute the Curvature OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_OIS (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L456" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L458">			throw new java.lang.Exception</span>
				(&quot;RiskFactorAggregateIR::curvatureMarginCovariance_OIS_OIS =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L462">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L463">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L465">		double curvatureMarginCovariance_OIS_OIS = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginOuterEntry :
<span class="nc bnc" id="L468" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L470">			java.lang.String outerTenor = oisSensitivityMarginOuterEntry.getKey();</span>

<span class="nc" id="L472">			double outerSensitivityMargin = oisSensitivityMarginOuterEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginInnerEntry :
<span class="nc bnc" id="L475" title="All 2 branches missed.">				_oisSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L477">				java.lang.String innerTenor = oisSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L479" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L480">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L485">				curvatureMarginCovariance_OIS_OIS = curvatureMarginCovariance_OIS_OIS +</span>
<span class="nc" id="L486">					outerSensitivityMargin * oisSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L488">			}</span>
<span class="nc" id="L489">		}</span>

<span class="nc" id="L491">		return curvatureMarginCovariance_OIS_OIS;</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L508" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L510">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L514">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L515">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L517">		double linearMarginCovariance_LIBOR1M_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L520" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L522">			double outerSensitivityMargin = libor1MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L524">			java.lang.String outerTenor = libor1MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L527" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L529">				java.lang.String innerTenor = libor1MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L531">				linearMarginCovariance_LIBOR1M_LIBOR1M = linearMarginCovariance_LIBOR1M_LIBOR1M +</span>
<span class="nc" id="L532">					outerSensitivityMargin * libor1MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L533" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L538">			}</span>
<span class="nc" id="L539">		}</span>

<span class="nc" id="L541">		return linearMarginCovariance_LIBOR1M_LIBOR1M;</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L558" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L560">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L564">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L565">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L567">		double linearMarginCovariance_LIBOR1M_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L570" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L572">			double outerSensitivityMargin = libor1MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L574">			java.lang.String outerTenor = libor1MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L577" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L579">				java.lang.String innerTenor = libor1MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L581" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L582">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L587">				linearMarginCovariance_LIBOR1M_LIBOR1M = linearMarginCovariance_LIBOR1M_LIBOR1M +</span>
<span class="nc" id="L588">					outerSensitivityMargin * libor1MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L590">			}</span>
<span class="nc" id="L591">		}</span>

<span class="nc" id="L593">		return linearMarginCovariance_LIBOR1M_LIBOR1M;</span>
	}

	/**
	 * Compute the Linear LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L610" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L612">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L616">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L617">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L619">		double linearMarginCovariance_LIBOR3M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L622" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L624">			double outerSensitivityMargin = libor3MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L626">			java.lang.String outerTenor = libor3MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L629" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L631">				java.lang.String innerTenor = libor3MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L633">				linearMarginCovariance_LIBOR3M_LIBOR3M = linearMarginCovariance_LIBOR3M_LIBOR3M +</span>
<span class="nc" id="L634">					outerSensitivityMargin * libor3MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L635" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L640">			}</span>
<span class="nc" id="L641">		}</span>

<span class="nc" id="L643">		return linearMarginCovariance_LIBOR3M_LIBOR3M;</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L660" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L662">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L666">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L667">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L669">		double curvatureMarginCovariance_LIBOR3M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L672" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L674">			double outerSensitivityMargin = libor3MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L676">			java.lang.String outerTenor = libor3MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L679" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L681">				java.lang.String innerTenor = libor3MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L683" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L684">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L689">				curvatureMarginCovariance_LIBOR3M_LIBOR3M = curvatureMarginCovariance_LIBOR3M_LIBOR3M +</span>
<span class="nc" id="L690">					outerSensitivityMargin * libor3MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L692">			}</span>
<span class="nc" id="L693">		}</span>

<span class="nc" id="L695">		return curvatureMarginCovariance_LIBOR3M_LIBOR3M;</span>
	}

	/**
	 * Compute the Linear LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L712" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L714">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L718">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L719">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L721">		double linearMarginCovariance_LIBOR6M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L724" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L726">			double outerSensitivityMargin = libor6MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L728">			java.lang.String outerTenor = libor6MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L731" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L733">				java.lang.String innerTenor = libor6MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L735">				linearMarginCovariance_LIBOR6M_LIBOR6M = linearMarginCovariance_LIBOR6M_LIBOR6M +</span>
<span class="nc" id="L736">					outerSensitivityMargin * libor6MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L737" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L742">			}</span>
<span class="nc" id="L743">		}</span>

<span class="nc" id="L745">		return linearMarginCovariance_LIBOR6M_LIBOR6M;</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L762" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L764">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L768">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L769">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L771">		double curvatureMarginCovariance_LIBOR6M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L774" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L776">			double outerSensitivityMargin = libor6MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L778">			java.lang.String outerTenor = libor6MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L781" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L783">				java.lang.String innerTenor = libor6MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L785" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L786">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L791">				curvatureMarginCovariance_LIBOR6M_LIBOR6M = curvatureMarginCovariance_LIBOR6M_LIBOR6M +</span>
<span class="nc" id="L792">					outerSensitivityMargin * libor6MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L794">			}</span>
<span class="nc" id="L795">		}</span>

<span class="nc" id="L797">		return curvatureMarginCovariance_LIBOR6M_LIBOR6M;</span>
	}

	/**
	 * Compute the Linear LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR12M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L814" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L816">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::marginCovariance_LIBOR12M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L820">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L821">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L823">		double linearMarginCovariance_LIBOR12M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L826" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L828">			double outerSensitivityMargin = libor12MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L830">			java.lang.String outerTenor = libor12MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginInnerEntry
<span class="nc bnc" id="L833" title="All 2 branches missed.">				: _libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L835">				java.lang.String innerTenor = libor12MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L837">				linearMarginCovariance_LIBOR12M_LIBOR12M = linearMarginCovariance_LIBOR12M_LIBOR12M +</span>
<span class="nc" id="L838">					outerSensitivityMargin * libor12MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L839" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L844">			}</span>
<span class="nc" id="L845">		}</span>

<span class="nc" id="L847">		return linearMarginCovariance_LIBOR12M_LIBOR12M;</span>
	}

	/**
	 * Compute the Curvature LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR12M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L864" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L866">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR12M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L870">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L871">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L873">		double curvatureMarginCovariance_LIBOR12M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L876" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L878">			double outerSensitivityMargin = libor12MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L880">			java.lang.String outerTenor = libor12MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginInnerEntry
<span class="nc bnc" id="L883" title="All 2 branches missed.">				: _libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L885">				java.lang.String innerTenor = libor12MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L887" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L888">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L893">				curvatureMarginCovariance_LIBOR12M_LIBOR12M = curvatureMarginCovariance_LIBOR12M_LIBOR12M +</span>
<span class="nc" id="L894">					outerSensitivityMargin * libor12MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L896">			}</span>
<span class="nc" id="L897">		}</span>

<span class="nc" id="L899">		return curvatureMarginCovariance_LIBOR12M_LIBOR12M;</span>
	}

	/**
	 * Compute the Linear PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_PRIME_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L916" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L918">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_PRIME_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L922">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L923">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L925">		double linearMarginCovariance_PRIME_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginOuterEntry :
<span class="nc bnc" id="L928" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L930">			double outerSensitivityMargin = primeSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L932">			java.lang.String outerTenor = primeSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginInnerEntry :
<span class="nc bnc" id="L935" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L937">				java.lang.String innerTenor = primeSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L939">				linearMarginCovariance_PRIME_PRIME = linearMarginCovariance_PRIME_PRIME +</span>
<span class="nc" id="L940">					outerSensitivityMargin * primeSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L941" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L946">			}</span>
<span class="nc" id="L947">		}</span>

<span class="nc" id="L949">		return linearMarginCovariance_PRIME_PRIME;</span>
	}

	/**
	 * Compute the Curvature PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_PRIME_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L966" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L968">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_PRIME_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L972">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L973">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L975">		double curvatureMarginCovariance_PRIME_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginOuterEntry :
<span class="nc bnc" id="L978" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L980">			double outerSensitivityMargin = primeSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L982">			java.lang.String outerTenor = primeSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginInnerEntry :
<span class="nc bnc" id="L985" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L987">				java.lang.String innerTenor = primeSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L989" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L990">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L995">				curvatureMarginCovariance_PRIME_PRIME = curvatureMarginCovariance_PRIME_PRIME +</span>
<span class="nc" id="L996">					outerSensitivityMargin * primeSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L998">			}</span>
<span class="nc" id="L999">		}</span>

<span class="nc" id="L1001">		return curvatureMarginCovariance_PRIME_PRIME;</span>
	}

	/**
	 * Compute the Linear MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_MUNICIPAL_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1018" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1020">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_MUNICIPAL_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1024">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1025">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1027">		double linearMarginCovariance_MUNICIPAL_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginOuterEntry :
<span class="nc bnc" id="L1030" title="All 2 branches missed.">			_municipalSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1032">			double outerSensitivityMargin = municipalSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L1034">			java.lang.String outerTenor = municipalSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginInnerEntry
<span class="nc bnc" id="L1037" title="All 2 branches missed.">				: _municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1039">				java.lang.String innerTenor = municipalSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L1041">				linearMarginCovariance_MUNICIPAL_MUNICIPAL = linearMarginCovariance_MUNICIPAL_MUNICIPAL +</span>
<span class="nc" id="L1042">					outerSensitivityMargin * municipalSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L1043" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L1048">			}</span>
<span class="nc" id="L1049">		}</span>

<span class="nc" id="L1051">		return linearMarginCovariance_MUNICIPAL_MUNICIPAL;</span>
	}

	/**
	 * Compute the Curvature MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_MUNICIPAL_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1068" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1070">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_MUNICIPAL_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1074">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1075">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1077">		double curvatureMarginCovariance_MUNICIPAL_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginOuterEntry :
<span class="nc bnc" id="L1080" title="All 2 branches missed.">			_municipalSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1082">			double outerSensitivityMargin = municipalSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L1084">			java.lang.String outerTenor = municipalSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginInnerEntry
<span class="nc bnc" id="L1087" title="All 2 branches missed.">				: _municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1089">				java.lang.String innerTenor = municipalSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L1091" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L1092">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L1097">				curvatureMarginCovariance_MUNICIPAL_MUNICIPAL = curvatureMarginCovariance_MUNICIPAL_MUNICIPAL</span>
<span class="nc" id="L1098">					+ outerSensitivityMargin * municipalSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1100">			}</span>
<span class="nc" id="L1101">		}</span>

<span class="nc" id="L1103">		return curvatureMarginCovariance_MUNICIPAL_MUNICIPAL;</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1120" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1122">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1126">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1127">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1129">		double linearMarginCovariance_OIS_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1132" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1134">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1136">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1139" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1141">				java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1143">				linearMarginCovariance_OIS_LIBOR1M = linearMarginCovariance_OIS_LIBOR1M +</span>
<span class="nc" id="L1144">					oisSensitivityMargin * libor1MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1145" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor1MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor1MTenor
						)
					);
<span class="nc" id="L1150">			}</span>
<span class="nc" id="L1151">		}</span>

<span class="nc" id="L1153">		return linearMarginCovariance_OIS_LIBOR1M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1170" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1172">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1176">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1177">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1179">		double curvatureMarginCovariance_OIS_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1182" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1184">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1186">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1189" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1191">				java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1193" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor1MTenor) ? 1. :</span>
<span class="nc" id="L1194">					tenorCorrelation.entry (</span>
						oisTenor,
						libor1MTenor
					);

<span class="nc" id="L1199">				curvatureMarginCovariance_OIS_LIBOR1M = curvatureMarginCovariance_OIS_LIBOR1M +</span>
<span class="nc" id="L1200">					oisSensitivityMargin * libor1MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1202">			}</span>
<span class="nc" id="L1203">		}</span>

<span class="nc" id="L1205">		return curvatureMarginCovariance_OIS_LIBOR1M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1222" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1224">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1228">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1229">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1231">		double linearMarginCovariance_OIS_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1234" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1236">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1238">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1241" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1243">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1245">				linearMarginCovariance_OIS_LIBOR3M = linearMarginCovariance_OIS_LIBOR3M +</span>
<span class="nc" id="L1246">					oisSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1247" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor3MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor3MTenor
						)
					);
<span class="nc" id="L1252">			}</span>
<span class="nc" id="L1253">		}</span>

<span class="nc" id="L1255">		return linearMarginCovariance_OIS_LIBOR3M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1272" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1274">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1278">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1279">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1281">		double curvatureMarginCovariance_OIS_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1284" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1286">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1288">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1291" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1293">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1295" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor3MTenor) ? 1. :</span>
<span class="nc" id="L1296">					tenorCorrelation.entry (</span>
						oisTenor,
						libor3MTenor
					);

<span class="nc" id="L1301">				curvatureMarginCovariance_OIS_LIBOR3M = curvatureMarginCovariance_OIS_LIBOR3M +</span>
<span class="nc" id="L1302">					oisSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1304">			}</span>
<span class="nc" id="L1305">		}</span>

<span class="nc" id="L1307">		return curvatureMarginCovariance_OIS_LIBOR3M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1324" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1326">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1330">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1331">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1333">		double linearMarginCovariance_OIS_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1336" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1338">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1340">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1343" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1345">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1347">				linearMarginCovariance_OIS_LIBOR6M = linearMarginCovariance_OIS_LIBOR6M +</span>
<span class="nc" id="L1348">					oisSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1349" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor6MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor6MTenor
						)
					);
<span class="nc" id="L1354">			}</span>
<span class="nc" id="L1355">		}</span>

<span class="nc" id="L1357">		return linearMarginCovariance_OIS_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1374" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1376">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1380">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1381">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1383">		double curvatureMarginCovariance_OIS_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1386" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1388">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1390">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1393" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1395">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1397" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor6MTenor) ? 1. :</span>
<span class="nc" id="L1398">					tenorCorrelation.entry (</span>
						oisTenor,
						libor6MTenor
					);

<span class="nc" id="L1403">				curvatureMarginCovariance_OIS_LIBOR6M = curvatureMarginCovariance_OIS_LIBOR6M +</span>
<span class="nc" id="L1404">					oisSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1406">			}</span>
<span class="nc" id="L1407">		}</span>

<span class="nc" id="L1409">		return curvatureMarginCovariance_OIS_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1426" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1428">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1432">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1433">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1435">		double linearMarginCovariance_OIS_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1438" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1440">			double oisSensitivity = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1442">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L1445" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1447">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1449">				linearMarginCovariance_OIS_LIBOR12M = linearMarginCovariance_OIS_LIBOR12M +</span>
<span class="nc" id="L1450">					oisSensitivity * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1451" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L1456">			}</span>
<span class="nc" id="L1457">		}</span>

<span class="nc" id="L1459">		return linearMarginCovariance_OIS_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1476" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1478">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1482">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1483">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1485">		double curvatureMarginCovariance_OIS_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1488" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1490">			double oisSensitivity = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1492">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L1495" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1497">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1499" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L1500">					tenorCorrelation.entry (</span>
						oisTenor,
						libor12MTenor
					);

<span class="nc" id="L1505">				curvatureMarginCovariance_OIS_LIBOR12M = curvatureMarginCovariance_OIS_LIBOR12M +</span>
<span class="nc" id="L1506">					oisSensitivity * libor12MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1508">			}</span>
<span class="nc" id="L1509">		}</span>

<span class="nc" id="L1511">		return curvatureMarginCovariance_OIS_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1528" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1530">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1534">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1535">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1537">		double linearMarginCovariance_OIS_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1540" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1542">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1544">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L1547" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1549">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1551">				linearMarginCovariance_OIS_PRIME = linearMarginCovariance_OIS_PRIME + oisSensitivityMargin *</span>
<span class="nc" id="L1552">					primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1553" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							primeTenor
						)
					);
<span class="nc" id="L1558">			}</span>
<span class="nc" id="L1559">		}</span>

<span class="nc" id="L1561">		return linearMarginCovariance_OIS_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1578" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1580">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1584">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1585">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1587">		double curvatureMarginCovariance_OIS_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1590" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1592">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1594">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L1597" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1599">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1601" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L1602">					tenorCorrelation.entry (</span>
						oisTenor,
						primeTenor
					);

<span class="nc" id="L1607">				curvatureMarginCovariance_OIS_PRIME = curvatureMarginCovariance_OIS_PRIME +</span>
<span class="nc" id="L1608">					oisSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1610">			}</span>
<span class="nc" id="L1611">		}</span>

<span class="nc" id="L1613">		return curvatureMarginCovariance_OIS_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1630" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1632">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1636">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1637">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1639">		double linearMarginCovariance_OIS_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1642" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1644">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1646">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L1649" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1651">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1653">				linearMarginCovariance_OIS_MUNICIPAL = linearMarginCovariance_OIS_MUNICIPAL +</span>
<span class="nc" id="L1654">					oisSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1655" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							municipalTenor
						)
					);
<span class="nc" id="L1660">			}</span>
<span class="nc" id="L1661">		}</span>

<span class="nc" id="L1663">		return linearMarginCovariance_OIS_MUNICIPAL * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1680" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1682">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1686">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1687">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1689">		double curvatureMarginCovariance_OIS_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1692" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1694">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1696">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L1699" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1701">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1703" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L1704">					tenorCorrelation.entry (</span>
						oisTenor,
						municipalTenor
					);

<span class="nc" id="L1709">				curvatureMarginCovariance_OIS_MUNICIPAL = curvatureMarginCovariance_OIS_MUNICIPAL +</span>
<span class="nc" id="L1710">					oisSensitivityMargin * municipalSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L1712">			}</span>
<span class="nc" id="L1713">		}</span>

<span class="nc" id="L1715">		return curvatureMarginCovariance_OIS_MUNICIPAL * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1732" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1734">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1738">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1739">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1741">		double linearMarginCovariance_LIBOR1M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1744" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1746">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1748">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1751" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1753">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1755">				linearMarginCovariance_LIBOR1M_LIBOR3M = linearMarginCovariance_LIBOR1M_LIBOR3M +</span>
<span class="nc" id="L1756">					libor1MSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1757" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (libor3MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							libor3MTenor
						)
					);
<span class="nc" id="L1762">			}</span>
<span class="nc" id="L1763">		}</span>

<span class="nc" id="L1765">		return linearMarginCovariance_LIBOR1M_LIBOR3M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1782" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1784">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1788">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1789">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1791">		double curvatureMarginCovariance_LIBOR1M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1794" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1796">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1798">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1801" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1803">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1805" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (libor3MTenor) ? 1. :</span>
<span class="nc" id="L1806">					tenorCorrelation.entry (</span>
						libor1MTenor,
						libor3MTenor
					);

<span class="nc" id="L1811">				curvatureMarginCovariance_LIBOR1M_LIBOR3M = curvatureMarginCovariance_LIBOR1M_LIBOR3M +</span>
<span class="nc" id="L1812">					libor1MSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * </span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1814">			}</span>
<span class="nc" id="L1815">		}</span>

<span class="nc" id="L1817">		return curvatureMarginCovariance_LIBOR1M_LIBOR3M *</span>
<span class="nc" id="L1818">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1835" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1837">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1841">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1842">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1844">		double linearMarginCovariance_LIBOR1M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1847" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1849">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1851">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1854" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1856">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1858">				linearMarginCovariance_LIBOR1M_LIBOR6M = linearMarginCovariance_LIBOR1M_LIBOR6M +</span>
<span class="nc" id="L1859">					libor1MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1860" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (libor6MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							libor6MTenor
						)
					);
<span class="nc" id="L1865">			}</span>
<span class="nc" id="L1866">		}</span>

<span class="nc" id="L1868">		return linearMarginCovariance_LIBOR1M_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1885" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1887">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1891">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1892">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1894">		double curvatureMarginCovariance_LIBOR1M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1897" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1899">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1901">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1904" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1906">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1908" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (libor6MTenor) ? 1. :</span>
<span class="nc" id="L1909">					tenorCorrelation.entry (</span>
						libor1MTenor,
						libor6MTenor
					);

<span class="nc" id="L1914">				curvatureMarginCovariance_LIBOR1M_LIBOR6M = curvatureMarginCovariance_LIBOR1M_LIBOR6M +</span>
<span class="nc" id="L1915">					libor1MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1917">			}</span>
<span class="nc" id="L1918">		}</span>

<span class="nc" id="L1920">		return curvatureMarginCovariance_LIBOR1M_LIBOR6M *</span>
<span class="nc" id="L1921">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1938" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1940">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1944">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1945">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1947">		double linearMarginCovariance_LIBOR1M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1950" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1952">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1954">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L1957" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1959">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1961">				linearMarginCovariance_LIBOR1M_LIBOR12M = linearMarginCovariance_LIBOR1M_LIBOR12M +</span>
<span class="nc" id="L1962">					libor1MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1963" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L1968">			}</span>
<span class="nc" id="L1969">		}</span>

<span class="nc" id="L1971">		return linearMarginCovariance_LIBOR1M_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1988" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1990">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1994">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1995">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1997">		double curvatureMarginCovariance_LIBOR1M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2000" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2002">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2004">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2007" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2009">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2011" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L2012">					tenorCorrelation.entry (</span>
						libor1MTenor,
						libor12MTenor
					);

<span class="nc" id="L2017">				curvatureMarginCovariance_LIBOR1M_LIBOR12M = curvatureMarginCovariance_LIBOR1M_LIBOR12M +</span>
<span class="nc" id="L2018">					libor1MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2020">			}</span>
<span class="nc" id="L2021">		}</span>

<span class="nc" id="L2023">		return curvatureMarginCovariance_LIBOR1M_LIBOR12M *</span>
<span class="nc" id="L2024">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2041" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2043">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2047">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2048">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2050">		double linearMarginCovariance_LIBOR1M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2053" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2055">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2057">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2060" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2062">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2064">				linearMarginCovariance_LIBOR1M_PRIME = linearMarginCovariance_LIBOR1M_PRIME +</span>
<span class="nc" id="L2065">					libor1MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2066" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2071">			}</span>
<span class="nc" id="L2072">		}</span>

<span class="nc" id="L2074">		return linearMarginCovariance_LIBOR1M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2091" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2093">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2097">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2098">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2100">		double curvatureMarginCovariance_LIBOR1M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2103" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2105">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2107">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2110" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2112">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2114" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L2115">					tenorCorrelation.entry (</span>
						libor1MTenor,
						primeTenor
					);

<span class="nc" id="L2120">				curvatureMarginCovariance_LIBOR1M_PRIME = curvatureMarginCovariance_LIBOR1M_PRIME +</span>
<span class="nc" id="L2121">					libor1MSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L2123">			}</span>
<span class="nc" id="L2124">		}</span>

<span class="nc" id="L2126">		return curvatureMarginCovariance_LIBOR1M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2143" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2145">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2149">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2150">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2152">		double linearMarginCovariance_LIBOR1M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2155" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2157">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2159">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2162" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2164">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2166">				linearMarginCovariance_LIBOR1M_MUNICIPAL = linearMarginCovariance_LIBOR1M_MUNICIPAL +</span>
<span class="nc" id="L2167">					libor1MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2168" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L2173">			}</span>
<span class="nc" id="L2174">		}</span>

<span class="nc" id="L2176">		return linearMarginCovariance_LIBOR1M_MUNICIPAL *</span>
<span class="nc" id="L2177">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2194" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2196">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2200">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2201">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2203">		double curvatureMarginCovariance_LIBOR1M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2206" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2208">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2210">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2213" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2215">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2217" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L2218">					tenorCorrelation.entry (</span>
						libor1MTenor,
						municipalTenor
					);

<span class="nc" id="L2223">				curvatureMarginCovariance_LIBOR1M_MUNICIPAL = curvatureMarginCovariance_LIBOR1M_MUNICIPAL +</span>
<span class="nc" id="L2224">					libor1MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2226">			}</span>
<span class="nc" id="L2227">		}</span>

<span class="nc" id="L2229">		return curvatureMarginCovariance_LIBOR1M_MUNICIPAL *</span>
<span class="nc" id="L2230">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2247" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2249">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2253">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2254">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2256">		double linearMarginCovariance_LIBOR3M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2259" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2261">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2263">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2266" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2268">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2270">				linearMarginCovariance_LIBOR3M_LIBOR6M = linearMarginCovariance_LIBOR3M_LIBOR6M +</span>
<span class="nc" id="L2271">					libor3MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2272" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (libor6MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							libor6MTenor
						)
					);
<span class="nc" id="L2277">			}</span>
<span class="nc" id="L2278">		}</span>

<span class="nc" id="L2280">		return linearMarginCovariance_LIBOR3M_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2297" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2299">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2303">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2304">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2306">		double curvatureMarginCovariance_LIBOR3M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2309" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2311">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2313">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2316" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2318">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2320" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (libor6MTenor) ? 1. :</span>
<span class="nc" id="L2321">					tenorCorrelation.entry (</span>
						libor3MTenor,
						libor6MTenor
					);

<span class="nc" id="L2326">				curvatureMarginCovariance_LIBOR3M_LIBOR6M = curvatureMarginCovariance_LIBOR3M_LIBOR6M +</span>
<span class="nc" id="L2327">					libor3MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2329">			}</span>
<span class="nc" id="L2330">		}</span>

<span class="nc" id="L2332">		return curvatureMarginCovariance_LIBOR3M_LIBOR6M *</span>
<span class="nc" id="L2333">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2350" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2352">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2356">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2357">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2359">		double linearMarginCovariance_LIBOR3M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2362" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2364">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2366">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2369" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2371">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2373">				linearMarginCovariance_LIBOR3M_LIBOR12M = linearMarginCovariance_LIBOR3M_LIBOR12M +</span>
<span class="nc" id="L2374">					libor3MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2375" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L2380">			}</span>
<span class="nc" id="L2381">		}</span>

<span class="nc" id="L2383">		return linearMarginCovariance_LIBOR3M_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2400" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2402">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2406">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2407">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2409">		double curvatureMarginCovariance_LIBOR3M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2412" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2414">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2416">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2419" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2421">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2423" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L2424">					tenorCorrelation.entry (</span>
						libor3MTenor,
						libor12MTenor
					);

<span class="nc" id="L2429">				curvatureMarginCovariance_LIBOR3M_LIBOR12M = curvatureMarginCovariance_LIBOR3M_LIBOR12M +</span>
<span class="nc" id="L2430">					libor3MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2432">			}</span>
<span class="nc" id="L2433">		}</span>

<span class="nc" id="L2435">		return curvatureMarginCovariance_LIBOR3M_LIBOR12M *</span>
<span class="nc" id="L2436">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2453" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2455">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2459">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2460">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2462">		double linearMarginCovariance_LIBOR3M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2465" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2467">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2469">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2472" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2474">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2476">				linearMarginCovariance_LIBOR3M_PRIME = linearMarginCovariance_LIBOR3M_PRIME +</span>
<span class="nc" id="L2477">					libor3MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2478" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2483">			}</span>
<span class="nc" id="L2484">		}</span>

<span class="nc" id="L2486">		return linearMarginCovariance_LIBOR3M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2503" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2505">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2509">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2510">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2512">		double curvatureMarginCovariance_LIBOR3M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2515" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2517">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2519">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2522" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2524">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2526" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L2527">					tenorCorrelation.entry (</span>
						libor3MTenor,
						primeTenor
					);

<span class="nc" id="L2532">				curvatureMarginCovariance_LIBOR3M_PRIME = curvatureMarginCovariance_LIBOR3M_PRIME +</span>
<span class="nc" id="L2533">					libor3MSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L2535">			}</span>
<span class="nc" id="L2536">		}</span>

<span class="nc" id="L2538">		return curvatureMarginCovariance_LIBOR3M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2555" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2557">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2561">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2562">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2564">		double linearMarginCovariance_LIBOR3M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2567" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2569">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2571">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2574" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2576">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2578">				linearMarginCovariance_LIBOR3M_MUNICIPAL = linearMarginCovariance_LIBOR3M_MUNICIPAL +</span>
<span class="nc" id="L2579">					libor3MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2580" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L2585">			}</span>
<span class="nc" id="L2586">		}</span>

<span class="nc" id="L2588">		return linearMarginCovariance_LIBOR3M_MUNICIPAL *</span>
<span class="nc" id="L2589">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2606" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2608">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2612">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2613">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2615">		double curvatureMarginCovariance_LIBOR3M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2618" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2620">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2622">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2625" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2627">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2629" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L2630">					tenorCorrelation.entry (</span>
						libor3MTenor,
						municipalTenor
					);

<span class="nc" id="L2635">				curvatureMarginCovariance_LIBOR3M_MUNICIPAL = curvatureMarginCovariance_LIBOR3M_MUNICIPAL +</span>
<span class="nc" id="L2636">					libor3MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2638">			}</span>
<span class="nc" id="L2639">		}</span>

<span class="nc" id="L2641">		return curvatureMarginCovariance_LIBOR3M_MUNICIPAL *</span>
<span class="nc" id="L2642">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2659" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2661">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2665">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2666">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2668">		double linearMarginCovariance_LIBOR6M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2671" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2673">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2675">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2678" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2680">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2682">				linearMarginCovariance_LIBOR6M_LIBOR12M = linearMarginCovariance_LIBOR6M_LIBOR12M +</span>
<span class="nc" id="L2683">					libor6MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2684" title="All 2 branches missed.">						libor6MTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor6MTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L2689">			}</span>
<span class="nc" id="L2690">		}</span>

<span class="nc" id="L2692">		return linearMarginCovariance_LIBOR6M_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2709" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2711">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2715">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2716">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2718">		double curvatureMarginCovariance_LIBOR6M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2721" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2723">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2725">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2728" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2730">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2732" title="All 2 branches missed.">				double crossTenorCorrelation = libor6MTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L2733">					tenorCorrelation.entry (</span>
						libor6MTenor,
						libor12MTenor
					);

<span class="nc" id="L2738">				curvatureMarginCovariance_LIBOR6M_LIBOR12M = curvatureMarginCovariance_LIBOR6M_LIBOR12M +</span>
<span class="nc" id="L2739">					libor6MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2741">			}</span>
<span class="nc" id="L2742">		}</span>

<span class="nc" id="L2744">		return curvatureMarginCovariance_LIBOR6M_LIBOR12M *</span>
<span class="nc" id="L2745">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2762" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2764">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2768">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2769">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2771">		double linearMarginCovariance_LIBOR6M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2774" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2776">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2778">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2781" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2783">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2785">				linearMarginCovariance_LIBOR6M_PRIME = linearMarginCovariance_LIBOR6M_PRIME +</span>
<span class="nc" id="L2786">					libor6MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2787" title="All 2 branches missed.">						libor6MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor6MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2792">			}</span>
<span class="nc" id="L2793">		}</span>

<span class="nc" id="L2795">		return linearMarginCovariance_LIBOR6M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2812" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2814">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2818">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2819">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2821">		double curvatureMarginCovariance_LIBOR6M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2824" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2826">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2828">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2831" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2833">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2835" title="All 2 branches missed.">				double crossTenorCorrelation = libor6MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L2836">					tenorCorrelation.entry (</span>
						libor6MTenor,
						primeTenor
					);

<span class="nc" id="L2841">				curvatureMarginCovariance_LIBOR6M_PRIME = curvatureMarginCovariance_LIBOR6M_PRIME +</span>
<span class="nc" id="L2842">					libor6MSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L2844">			}</span>
<span class="nc" id="L2845">		}</span>

<span class="nc" id="L2847">		return curvatureMarginCovariance_LIBOR6M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2864" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2866">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2870">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2871">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2873">		double linearMarginCovariance_LIBOR6M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2876" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2878">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2880">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2883" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2885">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2887">				linearMarginCovariance_LIBOR6M_MUNICIPAL = linearMarginCovariance_LIBOR6M_MUNICIPAL +</span>
<span class="nc" id="L2888">					libor6MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2889" title="All 2 branches missed.">						libor6MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor6MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L2894">			}</span>
<span class="nc" id="L2895">		}</span>

<span class="nc" id="L2897">		return linearMarginCovariance_LIBOR6M_MUNICIPAL *</span>
<span class="nc" id="L2898">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2915" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2917">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2921">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2922">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2924">		double curvatureMarginCovariance_LIBOR6M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2927" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2929">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2931">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2934" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2936">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2938" title="All 2 branches missed.">				double crossTenorCorrelation = libor6MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L2939">					tenorCorrelation.entry (</span>
						libor6MTenor,
						municipalTenor
					);

<span class="nc" id="L2944">				curvatureMarginCovariance_LIBOR6M_MUNICIPAL = curvatureMarginCovariance_LIBOR6M_MUNICIPAL +</span>
<span class="nc" id="L2945">					libor6MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2947">			}</span>
<span class="nc" id="L2948">		}</span>

<span class="nc" id="L2950">		return curvatureMarginCovariance_LIBOR6M_MUNICIPAL *</span>
<span class="nc" id="L2951">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR12M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2968" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2970">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR12M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2974">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2975">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2977">		double linearMarginCovariance_LIBOR12M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2980" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2982">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2984">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2987" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2989">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2991">				linearMarginCovariance_LIBOR12M_PRIME = linearMarginCovariance_LIBOR12M_PRIME +</span>
<span class="nc" id="L2992">					libor12MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2993" title="All 2 branches missed.">						libor12MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor12MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2998">			}</span>
<span class="nc" id="L2999">		}</span>

<span class="nc" id="L3001">		return linearMarginCovariance_LIBOR12M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR12M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3018" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3020">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR12M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3024">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3025">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3027">		double curvatureMarginCovariance_LIBOR12M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3030" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3032">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3034">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3037" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3039">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L3041" title="All 2 branches missed.">				double crossTenorCorrelation = libor12MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L3042">					tenorCorrelation.entry (</span>
						libor12MTenor,
						primeTenor
					);

<span class="nc" id="L3047">				curvatureMarginCovariance_LIBOR12M_PRIME = curvatureMarginCovariance_LIBOR12M_PRIME +</span>
<span class="nc" id="L3048">					libor12MSensitivityMargin * primeSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L3050">			}</span>
<span class="nc" id="L3051">		}</span>

<span class="nc" id="L3053">		return curvatureMarginCovariance_LIBOR12M_PRIME *</span>
<span class="nc" id="L3054">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR12M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3071" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3073">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR12M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3077">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3078">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3080">		double linearMarginCovariance_LIBOR12M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3083" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3085">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3087">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3090" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3092">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L3094">				linearMarginCovariance_LIBOR12M_MUNICIPAL = linearMarginCovariance_LIBOR12M_MUNICIPAL +</span>
<span class="nc" id="L3095">					libor12MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L3096" title="All 2 branches missed.">						libor12MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor12MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L3101">			}</span>
<span class="nc" id="L3102">		}</span>

<span class="nc" id="L3104">		return linearMarginCovariance_LIBOR12M_MUNICIPAL *</span>
<span class="nc" id="L3105">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR12M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3122" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3124">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR12M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3128">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3129">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3131">		double curvatureMarginCovariance_LIBOR12M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3134" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3136">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3138">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3141" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3143">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L3145" title="All 2 branches missed.">				double crossTenorCorrelation = libor12MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L3146">					tenorCorrelation.entry (</span>
						libor12MTenor,
						municipalTenor
					);

<span class="nc" id="L3151">				curvatureMarginCovariance_LIBOR12M_MUNICIPAL = curvatureMarginCovariance_LIBOR12M_MUNICIPAL +</span>
<span class="nc" id="L3152">					libor12MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L3154">			}</span>
<span class="nc" id="L3155">		}</span>

<span class="nc" id="L3157">		return curvatureMarginCovariance_LIBOR12M_MUNICIPAL *</span>
<span class="nc" id="L3158">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_PRIME_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3175" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3177">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_PRIME_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3181">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3182">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3184">		double linearMarginCovariance_PRIME_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3187" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3189">			double primeSensitivityMargin = primeSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3191">			java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3194" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3196">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L3198">				linearMarginCovariance_PRIME_MUNICIPAL = linearMarginCovariance_PRIME_MUNICIPAL +</span>
<span class="nc" id="L3199">					primeSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L3200" title="All 2 branches missed.">						primeTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							primeTenor,
							municipalTenor
						)
					);
<span class="nc" id="L3205">			}</span>
<span class="nc" id="L3206">		}</span>

<span class="nc" id="L3208">		return linearMarginCovariance_PRIME_MUNICIPAL * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_PRIME_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3225" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3227">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_PRIME_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3231">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3232">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3234">		double curvatureMarginCovariance_PRIME_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3237" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3239">			double primeSensitivityMargin = primeSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3241">			java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3244" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3246">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L3248" title="All 2 branches missed.">				double crossTenorCorrelation = primeTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L3249">					tenorCorrelation.entry (</span>
						primeTenor,
						municipalTenor
					);

<span class="nc" id="L3254">				curvatureMarginCovariance_PRIME_MUNICIPAL = curvatureMarginCovariance_PRIME_MUNICIPAL +</span>
<span class="nc" id="L3255">					primeSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L3257">			}</span>
<span class="nc" id="L3258">		}</span>

<span class="nc" id="L3260">		return curvatureMarginCovariance_PRIME_MUNICIPAL *</span>
<span class="nc" id="L3261">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear Margin Co-variance
	 */

	public org.drip.simm.margin.SensitivityAggregateIR linearMargin (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
	{
		try
		{
<span class="nc" id="L3277">			return new org.drip.simm.margin.SensitivityAggregateIR (</span>
<span class="nc" id="L3278">				linearMarginCovariance_OIS_OIS (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3279">				linearMarginCovariance_OIS_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3280">				linearMarginCovariance_OIS_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3281">				linearMarginCovariance_OIS_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3282">				linearMarginCovariance_OIS_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3283">				linearMarginCovariance_OIS_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3284">				linearMarginCovariance_OIS_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3285">				linearMarginCovariance_LIBOR1M_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3286">				linearMarginCovariance_LIBOR1M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3287">				linearMarginCovariance_LIBOR1M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3288">				linearMarginCovariance_LIBOR1M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3289">				linearMarginCovariance_LIBOR1M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3290">				linearMarginCovariance_LIBOR1M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3291">				linearMarginCovariance_LIBOR3M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3292">				linearMarginCovariance_LIBOR3M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3293">				linearMarginCovariance_LIBOR3M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3294">				linearMarginCovariance_LIBOR3M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3295">				linearMarginCovariance_LIBOR3M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3296">				linearMarginCovariance_LIBOR6M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3297">				linearMarginCovariance_LIBOR6M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3298">				linearMarginCovariance_LIBOR6M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3299">				linearMarginCovariance_LIBOR6M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3300">				linearMarginCovariance_LIBOR12M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3301">				linearMarginCovariance_LIBOR12M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3302">				linearMarginCovariance_LIBOR12M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3303">				linearMarginCovariance_PRIME_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3304">				linearMarginCovariance_PRIME_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3305">				linearMarginCovariance_MUNICIPAL_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3306">				cumulativeSensitivityMargin()</span>
			);
		}
<span class="nc" id="L3309">		catch (java.lang.Exception e)</span>
		{
<span class="nc" id="L3311">			e.printStackTrace();</span>
		}

<span class="nc" id="L3314">		return null;</span>
	}

	/**
	 * Compute the Curvature Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature Margin Co-variance
	 */

	public org.drip.simm.margin.SensitivityAggregateIR curvatureMargin (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
	{
		try
		{
<span class="nc" id="L3330">			return new org.drip.simm.margin.SensitivityAggregateIR (</span>
<span class="nc" id="L3331">				curvatureMarginCovariance_OIS_OIS (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3332">				curvatureMarginCovariance_OIS_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3333">				curvatureMarginCovariance_OIS_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3334">				curvatureMarginCovariance_OIS_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3335">				curvatureMarginCovariance_OIS_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3336">				curvatureMarginCovariance_OIS_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3337">				curvatureMarginCovariance_OIS_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3338">				curvatureMarginCovariance_LIBOR1M_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3339">				curvatureMarginCovariance_LIBOR1M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3340">				curvatureMarginCovariance_LIBOR1M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3341">				curvatureMarginCovariance_LIBOR1M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3342">				curvatureMarginCovariance_LIBOR1M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3343">				curvatureMarginCovariance_LIBOR1M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3344">				curvatureMarginCovariance_LIBOR3M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3345">				curvatureMarginCovariance_LIBOR3M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3346">				curvatureMarginCovariance_LIBOR3M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3347">				curvatureMarginCovariance_LIBOR3M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3348">				curvatureMarginCovariance_LIBOR3M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3349">				curvatureMarginCovariance_LIBOR6M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3350">				curvatureMarginCovariance_LIBOR6M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3351">				curvatureMarginCovariance_LIBOR6M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3352">				curvatureMarginCovariance_LIBOR6M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3353">				curvatureMarginCovariance_LIBOR12M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3354">				curvatureMarginCovariance_LIBOR12M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3355">				curvatureMarginCovariance_LIBOR12M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3356">				curvatureMarginCovariance_PRIME_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3357">				curvatureMarginCovariance_PRIME_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3358">				curvatureMarginCovariance_MUNICIPAL_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3359">				cumulativeSensitivityMargin()</span>
			);
		}
<span class="nc" id="L3362">		catch (java.lang.Exception e)</span>
		{
<span class="nc" id="L3364">			e.printStackTrace();</span>
		}

<span class="nc" id="L3367">		return null;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>