<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RiskFactorAggregateIR.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.simm.margin</a> &gt; <span class="el_source">RiskFactorAggregateIR.java</span></div><h1>RiskFactorAggregateIR.java</h1><pre class="source lang-java linenums">
package org.drip.simm.margin;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2020 Lakshmi Krishnamurthy
 * Copyright (C) 2019 Lakshmi Krishnamurthy
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * 
 *  This file is part of DROP, an open-source library targeting analytics/risk, transaction cost analytics,
 *  	asset liability management analytics, capital, exposure, and margin analytics, valuation adjustment
 *  	analytics, and portfolio construction analytics within and across fixed income, credit, commodity,
 *  	equity, FX, and structured products. It also includes auxiliary libraries for algorithm support,
 *  	numerical analysis, numerical optimization, spline builder, model validation, statistical learning,
 *  	and computational support.
 *  
 *  	https://lakshmidrip.github.io/DROP/
 *  
 *  DROP is composed of three modules:
 *  
 *  - DROP Product Core - https://lakshmidrip.github.io/DROP-Product-Core/
 *  - DROP Portfolio Core - https://lakshmidrip.github.io/DROP-Portfolio-Core/
 *  - DROP Computational Core - https://lakshmidrip.github.io/DROP-Computational-Core/
 * 
 * 	DROP Product Core implements libraries for the following:
 * 	- Fixed Income Analytics
 * 	- Loan Analytics
 * 	- Transaction Cost Analytics
 * 
 * 	DROP Portfolio Core implements libraries for the following:
 * 	- Asset Allocation Analytics
 *  - Asset Liability Management Analytics
 * 	- Capital Estimation Analytics
 * 	- Exposure Analytics
 * 	- Margin Analytics
 * 	- XVA Analytics
 * 
 * 	DROP Computational Core implements libraries for the following:
 * 	- Algorithm Support
 * 	- Computation Support
 * 	- Function Analysis
 *  - Model Validation
 * 	- Numerical Analysis
 * 	- Numerical Optimizer
 * 	- Spline Builder
 *  - Statistical Learning
 * 
 * 	Documentation for DROP is Spread Over:
 * 
 * 	- Main                     =&gt; https://lakshmidrip.github.io/DROP/
 * 	- Wiki                     =&gt; https://github.com/lakshmiDRIP/DROP/wiki
 * 	- GitHub                   =&gt; https://github.com/lakshmiDRIP/DROP
 * 	- Repo Layout Taxonomy     =&gt; https://github.com/lakshmiDRIP/DROP/blob/master/Taxonomy.md
 * 	- Javadoc                  =&gt; https://lakshmidrip.github.io/DROP/Javadoc/index.html
 * 	- Technical Specifications =&gt; https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal
 * 	- Release Versions         =&gt; https://lakshmidrip.github.io/DROP/version.html
 * 	- Community Credits        =&gt; https://lakshmidrip.github.io/DROP/credits.html
 * 	- Issues Catalog           =&gt; https://github.com/lakshmiDRIP/DROP/issues
 * 	- JUnit                    =&gt; https://lakshmidrip.github.io/DROP/junit/index.html
 * 	- Jacoco                   =&gt; https://lakshmidrip.github.io/DROP/jacoco/index.html
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;RiskFactorAggregateIR&lt;/i&gt; holds the Sensitivity Margin Aggregates for each of the IR Risk Factors -
 * OIS, LIBOR 1M, LIBOR 3M, LIBOR 6M LIBOR 12M, PRIME, and MUNICIPAL. The References are:
 * 
 * &lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *  	&lt;li&gt;
 *  		Andersen, L. B. G., M. Pykhtin, and A. Sokol (2017): Credit Exposure in the Presence of Initial
 *  			Margin https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2806156 &lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Albanese, C., S. Caenazzo, and O. Frankel (2017): Regression Sensitivities for Initial Margin
 *  			Calculations https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2763488 &lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Anfuso, F., D. Aziz, P. Giltinan, and K. Loukopoulus (2017): A Sound Modeling and Back-testing
 *  			Framework for Forecasting Initial Margin Requirements
 *  				https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2716279 &lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Caspers, P., P. Giltinan, R. Lichters, and N. Nowaczyk (2017): Forecasting Initial Margin
 *  			Requirements - A Model Evaluation https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2911167
 *  				&lt;b&gt;eSSRN&lt;/b&gt;
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		International Swaps and Derivatives Association (2017): SIMM v2.0 Methodology
 *  			https://www.isda.org/a/oFiDE/isda-simm-v2.pdf
 *  	&lt;/li&gt;
 *  &lt;/ul&gt;
 * 
 * &lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Module &lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/PortfolioCore.md&quot;&gt;Portfolio Core Module&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Library&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/MarginAnalyticsLibrary.md&quot;&gt;Initial and Variation Margin Analytics&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/simm/README.md&quot;&gt;Initial Margin Analytics based on ISDA SIMM and its Variants&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/simm/margin/README.md&quot;&gt;ISDA SIMM Risk Factor Margin Metrics&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 * &lt;br&gt;&lt;br&gt;
 * 
 * @author Lakshmi Krishnamurthy
 */

public class RiskFactorAggregateIR
{
<span class="nc" id="L123">	private double _concentrationRiskFactor = java.lang.Double.NaN;</span>
<span class="nc" id="L124">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _oisSensitivityMargin = null;</span>
<span class="nc" id="L125">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _primeSensitivityMargin = null;</span>
<span class="nc" id="L126">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor1MSensitivityMargin = null;</span>
<span class="nc" id="L127">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor3MSensitivityMargin = null;</span>
<span class="nc" id="L128">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor6MSensitivityMargin = null;</span>
<span class="nc" id="L129">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _libor12MSensitivityMargin = null;</span>
<span class="nc" id="L130">	private java.util.Map&lt;java.lang.String, java.lang.Double&gt; _municipalSensitivityMargin = null;</span>

	/**
	 * RiskFactorAggregateIR Constructor
	 * 
	 * @param oisSensitivityMargin The OIS Sensitivity Margin
	 * @param libor1MSensitivityMargin The LIBOR 1M Sensitivity Margin
	 * @param libor3MSensitivityMargin The LIBOR 3M Sensitivity Margin
	 * @param libor6MSensitivityMargin The LIBOR 6M Sensitivity Margin
	 * @param libor12MSensitivityMargin The LIBOR 12M Sensitivity Margin
	 * @param primeSensitivityMargin The PRIME Sensitivity Margin
	 * @param municipalSensitivityMargin The Municipal Sensitivity Margin
	 // * @param sensitivityMargin The Bucket Sensitivity Margin
	 * @param concentrationRiskFactor The Currency's Concentration Risk Factor
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public RiskFactorAggregateIR (
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMargin,
		final java.util.Map&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMargin,
		final double concentrationRiskFactor)
		throws java.lang.Exception
<span class="nc" id="L158">	{</span>
<span class="nc bnc" id="L159" title="All 6 branches missed.">		if (null == (_oisSensitivityMargin = oisSensitivityMargin) || 0 == _oisSensitivityMargin.size() ||</span>
			null == (_libor1MSensitivityMargin = libor1MSensitivityMargin) ||
<span class="nc bnc" id="L161" title="All 4 branches missed.">				0 == _libor1MSensitivityMargin.size() ||</span>
			null == (_libor3MSensitivityMargin = libor3MSensitivityMargin) ||
<span class="nc bnc" id="L163" title="All 4 branches missed.">				0 == _libor3MSensitivityMargin.size() ||</span>
			null == (_libor6MSensitivityMargin = libor6MSensitivityMargin) ||
<span class="nc bnc" id="L165" title="All 4 branches missed.">				0 == _libor6MSensitivityMargin.size() ||</span>
			null == (_libor12MSensitivityMargin = libor12MSensitivityMargin) ||
<span class="nc bnc" id="L167" title="All 4 branches missed.">				0 == _libor12MSensitivityMargin.size() ||</span>
			null == (_municipalSensitivityMargin = municipalSensitivityMargin) ||
<span class="nc bnc" id="L169" title="All 4 branches missed.">				0 == _municipalSensitivityMargin.size() ||</span>
			null == (_primeSensitivityMargin = primeSensitivityMargin) ||
<span class="nc bnc" id="L171" title="All 2 branches missed.">				0 == _primeSensitivityMargin.size() ||</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">			!org.drip.numerical.common.NumberUtil.IsValid (_concentrationRiskFactor = concentrationRiskFactor))</span>
		 {
<span class="nc" id="L174">			 throw new java.lang.Exception (&quot;RiskFactorAggregateIR Constructor =&gt; Invalid Inputs&quot;);</span>
		 }
<span class="nc" id="L176">	}</span>

	/**
	 * Retrieve the OIS Sensitivity Margin Map
	 * 
	 * @return The OIS Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMargin()
	{
<span class="nc" id="L186">		return _oisSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 1M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 1M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMargin()
	{
<span class="nc" id="L197">		return _libor1MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 3M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 3M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMargin()
	{
<span class="nc" id="L208">		return _libor3MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 6M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 6M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMargin()
	{
<span class="nc" id="L219">		return _libor6MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the LIBOR 12M Sensitivity Margin Map
	 * 
	 * @return The LIBOR 12M Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMargin()
	{
<span class="nc" id="L230">		return _libor12MSensitivityMargin;</span>
	}

	/**
	 * Retrieve the PRIME Sensitivity Margin Map
	 * 
	 * @return The PRIME Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMargin()
	{
<span class="nc" id="L241">		return _primeSensitivityMargin;</span>
	}

	/**
	 * Retrieve the MUNICIPAL Sensitivity Margin Map
	 * 
	 * @return The MUNICIPAL Sensitivity Margin Map
	 */

	public java.util.Map&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMargin()
	{
<span class="nc" id="L252">		return _municipalSensitivityMargin;</span>
	}

	/**
	 * Retrieve the Bucket Concentration Risk Factor
	 * 
	 * @return The Bucket Concentration Risk Factor
	 */

	public double concentrationRiskFactor()
	{
<span class="nc" id="L263">		return _concentrationRiskFactor;</span>
	}

	/**
	 * Compute the Cumulative OIS Sensitivity Margin
	 * 
	 * @return The Cumulative OIS Sensitivity Margin
	 */

	public double cumulativeOISSensitivityMargin()
	{
<span class="nc" id="L274">		double cumulativeOISSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L277" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L279">			cumulativeOISSensitivityMargin = cumulativeOISSensitivityMargin +</span>
<span class="nc" id="L280">				oisSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L281">		}</span>

<span class="nc" id="L283">		return cumulativeOISSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR1M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR1M Sensitivity Margin
	 */

	public double cumulativeLIBOR1MSensitivityMargin()
	{
<span class="nc" id="L294">		double cumulativeLIBOR1MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L297" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L299">			cumulativeLIBOR1MSensitivityMargin = cumulativeLIBOR1MSensitivityMargin +</span>
<span class="nc" id="L300">				libor1MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L301">		}</span>

<span class="nc" id="L303">		return cumulativeLIBOR1MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR3M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR3M Sensitivity Margin
	 */

	public double cumulativeLIBOR3MSensitivityMargin()
	{
<span class="nc" id="L314">		double cumulativeLIBOR3MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L317" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L319">			cumulativeLIBOR3MSensitivityMargin = cumulativeLIBOR3MSensitivityMargin +</span>
<span class="nc" id="L320">				libor3MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L321">		}</span>

<span class="nc" id="L323">		return cumulativeLIBOR3MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR6M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR6M Sensitivity Margin
	 */

	public double cumulativeLIBOR6MSensitivityMargin()
	{
<span class="nc" id="L334">		double cumulativeLIBOR6MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L337" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L339">			cumulativeLIBOR6MSensitivityMargin = cumulativeLIBOR6MSensitivityMargin +</span>
<span class="nc" id="L340">				libor6MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L341">		}</span>

<span class="nc" id="L343">		return cumulativeLIBOR6MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative LIBOR12M Sensitivity Margin
	 * 
	 * @return The Cumulative LIBOR12M Sensitivity Margin
	 */

	public double cumulativeLIBOR12MSensitivityMargin()
	{
<span class="nc" id="L354">		double cumulativeLIBOR12MSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L357" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L359">			cumulativeLIBOR12MSensitivityMargin = cumulativeLIBOR12MSensitivityMargin +</span>
<span class="nc" id="L360">				libor12MSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L361">		}</span>

<span class="nc" id="L363">		return cumulativeLIBOR12MSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative PRIME Sensitivity Margin
	 * 
	 * @return The Cumulative PRIME Sensitivity Margin
	 */

	public double cumulativePRIMESensitivityMargin()
	{
<span class="nc" id="L374">		double cumulativePRIMESensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L377" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L379">			cumulativePRIMESensitivityMargin = cumulativePRIMESensitivityMargin +</span>
<span class="nc" id="L380">				primeSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L381">		}</span>

<span class="nc" id="L383">		return cumulativePRIMESensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative MUNICIPAL Sensitivity Margin
	 * 
	 * @return The Cumulative MUNICIPAL Sensitivity Margin
	 */

	public double cumulativeMUNICIPALSensitivityMargin()
	{
<span class="nc" id="L394">		double cumulativeMUNICIPALSensitivityMargin = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L397" title="All 2 branches missed.">			_municipalSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L399">			cumulativeMUNICIPALSensitivityMargin = cumulativeMUNICIPALSensitivityMargin +</span>
<span class="nc" id="L400">				municipalSensitivityMarginEntry.getValue();</span>
<span class="nc" id="L401">		}</span>

<span class="nc" id="L403">		return cumulativeMUNICIPALSensitivityMargin;</span>
	}

	/**
	 * Compute the Cumulative Sensitivity Margin
	 * 
	 * @return The Cumulative Sensitivity Margin
	 */

	public double cumulativeSensitivityMargin()
	{
<span class="nc" id="L414">		return cumulativeOISSensitivityMargin() +</span>
<span class="nc" id="L415">			cumulativeLIBOR1MSensitivityMargin() +</span>
<span class="nc" id="L416">			cumulativeLIBOR3MSensitivityMargin() +</span>
<span class="nc" id="L417">			cumulativeLIBOR6MSensitivityMargin() +</span>
<span class="nc" id="L418">			cumulativeLIBOR12MSensitivityMargin() +</span>
<span class="nc" id="L419">			cumulativePRIMESensitivityMargin() +</span>
<span class="nc" id="L420">			cumulativeMUNICIPALSensitivityMargin();</span>
	}

	/**
	 * Compute the Linear OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_OIS (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L437" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L439">			throw new java.lang.Exception</span>
				(&quot;RiskFactorAggregateIR::linearMarginCovariance_OIS_OIS =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L443">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L444">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L446">		double linearMarginCovariance_OIS_OIS = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginOuterEntry :
<span class="nc bnc" id="L449" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L451">			java.lang.String outerTenor = oisSensitivityMarginOuterEntry.getKey();</span>

<span class="nc" id="L453">			double outerSensitivityMargin = oisSensitivityMarginOuterEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginInnerEntry :
<span class="nc bnc" id="L456" title="All 2 branches missed.">				_oisSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L458">				java.lang.String innerTenor = oisSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L460">				linearMarginCovariance_OIS_OIS = linearMarginCovariance_OIS_OIS + outerSensitivityMargin *</span>
<span class="nc" id="L461">					oisSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L462" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L467">			}</span>
<span class="nc" id="L468">		}</span>

<span class="nc" id="L470">		return linearMarginCovariance_OIS_OIS;</span>
	}

	/**
	 * Compute the Curvature OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-OIS Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_OIS (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L487" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L489">			throw new java.lang.Exception</span>
				(&quot;RiskFactorAggregateIR::curvatureMarginCovariance_OIS_OIS =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L493">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L494">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L496">		double curvatureMarginCovariance_OIS_OIS = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginOuterEntry :
<span class="nc bnc" id="L499" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L501">			java.lang.String outerTenor = oisSensitivityMarginOuterEntry.getKey();</span>

<span class="nc" id="L503">			double outerSensitivityMargin = oisSensitivityMarginOuterEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginInnerEntry :
<span class="nc bnc" id="L506" title="All 2 branches missed.">				_oisSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L508">				java.lang.String innerTenor = oisSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L510" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L511">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L516">				curvatureMarginCovariance_OIS_OIS = curvatureMarginCovariance_OIS_OIS +</span>
<span class="nc" id="L517">					outerSensitivityMargin * oisSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L519">			}</span>
<span class="nc" id="L520">		}</span>

<span class="nc" id="L522">		return curvatureMarginCovariance_OIS_OIS;</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L539" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L541">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L545">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L546">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L548">		double linearMarginCovariance_LIBOR1M_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L551" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L553">			double outerSensitivityMargin = libor1MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L555">			java.lang.String outerTenor = libor1MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L558" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L560">				java.lang.String innerTenor = libor1MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L562">				linearMarginCovariance_LIBOR1M_LIBOR1M = linearMarginCovariance_LIBOR1M_LIBOR1M +</span>
<span class="nc" id="L563">					outerSensitivityMargin * libor1MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L564" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L569">			}</span>
<span class="nc" id="L570">		}</span>

<span class="nc" id="L572">		return linearMarginCovariance_LIBOR1M_LIBOR1M;</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L589" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L591">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L595">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L596">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L598">		double linearMarginCovariance_LIBOR1M_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L601" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L603">			double outerSensitivityMargin = libor1MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L605">			java.lang.String outerTenor = libor1MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L608" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L610">				java.lang.String innerTenor = libor1MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L612" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L613">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L618">				linearMarginCovariance_LIBOR1M_LIBOR1M = linearMarginCovariance_LIBOR1M_LIBOR1M +</span>
<span class="nc" id="L619">					outerSensitivityMargin * libor1MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L621">			}</span>
<span class="nc" id="L622">		}</span>

<span class="nc" id="L624">		return linearMarginCovariance_LIBOR1M_LIBOR1M;</span>
	}

	/**
	 * Compute the Linear LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L641" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L643">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L647">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L648">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L650">		double linearMarginCovariance_LIBOR3M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L653" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L655">			double outerSensitivityMargin = libor3MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L657">			java.lang.String outerTenor = libor3MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L660" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L662">				java.lang.String innerTenor = libor3MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L664">				linearMarginCovariance_LIBOR3M_LIBOR3M = linearMarginCovariance_LIBOR3M_LIBOR3M +</span>
<span class="nc" id="L665">					outerSensitivityMargin * libor3MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L666" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L671">			}</span>
<span class="nc" id="L672">		}</span>

<span class="nc" id="L674">		return linearMarginCovariance_LIBOR3M_LIBOR3M;</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L691" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L693">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L697">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L698">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L700">		double curvatureMarginCovariance_LIBOR3M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L703" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L705">			double outerSensitivityMargin = libor3MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L707">			java.lang.String outerTenor = libor3MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L710" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L712">				java.lang.String innerTenor = libor3MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L714" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L715">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L720">				curvatureMarginCovariance_LIBOR3M_LIBOR3M = curvatureMarginCovariance_LIBOR3M_LIBOR3M +</span>
<span class="nc" id="L721">					outerSensitivityMargin * libor3MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L723">			}</span>
<span class="nc" id="L724">		}</span>

<span class="nc" id="L726">		return curvatureMarginCovariance_LIBOR3M_LIBOR3M;</span>
	}

	/**
	 * Compute the Linear LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L743" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L745">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L749">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L750">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L752">		double linearMarginCovariance_LIBOR6M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L755" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L757">			double outerSensitivityMargin = libor6MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L759">			java.lang.String outerTenor = libor6MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L762" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L764">				java.lang.String innerTenor = libor6MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L766">				linearMarginCovariance_LIBOR6M_LIBOR6M = linearMarginCovariance_LIBOR6M_LIBOR6M +</span>
<span class="nc" id="L767">					outerSensitivityMargin * libor6MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L768" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L773">			}</span>
<span class="nc" id="L774">		}</span>

<span class="nc" id="L776">		return linearMarginCovariance_LIBOR6M_LIBOR6M;</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L793" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L795">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L799">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L800">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L802">		double curvatureMarginCovariance_LIBOR6M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L805" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L807">			double outerSensitivityMargin = libor6MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L809">			java.lang.String outerTenor = libor6MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginInnerEntry :
<span class="nc bnc" id="L812" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L814">				java.lang.String innerTenor = libor6MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L816" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L817">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L822">				curvatureMarginCovariance_LIBOR6M_LIBOR6M = curvatureMarginCovariance_LIBOR6M_LIBOR6M +</span>
<span class="nc" id="L823">					outerSensitivityMargin * libor6MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L825">			}</span>
<span class="nc" id="L826">		}</span>

<span class="nc" id="L828">		return curvatureMarginCovariance_LIBOR6M_LIBOR6M;</span>
	}

	/**
	 * Compute the Linear LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR12M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L845" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L847">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::marginCovariance_LIBOR12M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L851">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L852">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L854">		double linearMarginCovariance_LIBOR12M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L857" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L859">			double outerSensitivityMargin = libor12MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L861">			java.lang.String outerTenor = libor12MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginInnerEntry
<span class="nc bnc" id="L864" title="All 2 branches missed.">				: _libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L866">				java.lang.String innerTenor = libor12MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L868">				linearMarginCovariance_LIBOR12M_LIBOR12M = linearMarginCovariance_LIBOR12M_LIBOR12M +</span>
<span class="nc" id="L869">					outerSensitivityMargin * libor12MSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L870" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L875">			}</span>
<span class="nc" id="L876">		}</span>

<span class="nc" id="L878">		return linearMarginCovariance_LIBOR12M_LIBOR12M;</span>
	}

	/**
	 * Compute the Curvature LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR12M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR12M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L895" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L897">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR12M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L901">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L902">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L904">		double curvatureMarginCovariance_LIBOR12M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginOuterEntry :
<span class="nc bnc" id="L907" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L909">			double outerSensitivityMargin = libor12MSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L911">			java.lang.String outerTenor = libor12MSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginInnerEntry
<span class="nc bnc" id="L914" title="All 2 branches missed.">				: _libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L916">				java.lang.String innerTenor = libor12MSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L918" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L919">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L924">				curvatureMarginCovariance_LIBOR12M_LIBOR12M = curvatureMarginCovariance_LIBOR12M_LIBOR12M +</span>
<span class="nc" id="L925">					outerSensitivityMargin * libor12MSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L927">			}</span>
<span class="nc" id="L928">		}</span>

<span class="nc" id="L930">		return curvatureMarginCovariance_LIBOR12M_LIBOR12M;</span>
	}

	/**
	 * Compute the Linear PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_PRIME_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L947" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L949">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_PRIME_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L953">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L954">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L956">		double linearMarginCovariance_PRIME_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginOuterEntry :
<span class="nc bnc" id="L959" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L961">			double outerSensitivityMargin = primeSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L963">			java.lang.String outerTenor = primeSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginInnerEntry :
<span class="nc bnc" id="L966" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L968">				java.lang.String innerTenor = primeSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L970">				linearMarginCovariance_PRIME_PRIME = linearMarginCovariance_PRIME_PRIME +</span>
<span class="nc" id="L971">					outerSensitivityMargin * primeSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L972" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L977">			}</span>
<span class="nc" id="L978">		}</span>

<span class="nc" id="L980">		return linearMarginCovariance_PRIME_PRIME;</span>
	}

	/**
	 * Compute the Curvature PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature PRIME-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_PRIME_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L997" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L999">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_PRIME_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1003">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1004">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1006">		double curvatureMarginCovariance_PRIME_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginOuterEntry :
<span class="nc bnc" id="L1009" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1011">			double outerSensitivityMargin = primeSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L1013">			java.lang.String outerTenor = primeSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginInnerEntry :
<span class="nc bnc" id="L1016" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1018">				java.lang.String innerTenor = primeSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L1020" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L1021">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L1026">				curvatureMarginCovariance_PRIME_PRIME = curvatureMarginCovariance_PRIME_PRIME +</span>
<span class="nc" id="L1027">					outerSensitivityMargin * primeSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1029">			}</span>
<span class="nc" id="L1030">		}</span>

<span class="nc" id="L1032">		return curvatureMarginCovariance_PRIME_PRIME;</span>
	}

	/**
	 * Compute the Linear MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_MUNICIPAL_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1049" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1051">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_MUNICIPAL_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1055">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1056">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1058">		double linearMarginCovariance_MUNICIPAL_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginOuterEntry :
<span class="nc bnc" id="L1061" title="All 2 branches missed.">			_municipalSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1063">			double outerSensitivityMargin = municipalSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L1065">			java.lang.String outerTenor = municipalSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginInnerEntry
<span class="nc bnc" id="L1068" title="All 2 branches missed.">				: _municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1070">				java.lang.String innerTenor = municipalSensitivityMarginInnerEntry.getKey();</span>

<span class="nc" id="L1072">				linearMarginCovariance_MUNICIPAL_MUNICIPAL = linearMarginCovariance_MUNICIPAL_MUNICIPAL +</span>
<span class="nc" id="L1073">					outerSensitivityMargin * municipalSensitivityMarginInnerEntry.getValue() * (</span>
<span class="nc bnc" id="L1074" title="All 2 branches missed.">						outerTenor.equalsIgnoreCase (innerTenor) ? 1. : tenorCorrelation.entry (</span>
							outerTenor,
							innerTenor
						)
					);
<span class="nc" id="L1079">			}</span>
<span class="nc" id="L1080">		}</span>

<span class="nc" id="L1082">		return linearMarginCovariance_MUNICIPAL_MUNICIPAL;</span>
	}

	/**
	 * Compute the Curvature MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature MUNICIPAL-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_MUNICIPAL_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1099" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1101">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_MUNICIPAL_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1105">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1106">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1108">		double curvatureMarginCovariance_MUNICIPAL_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginOuterEntry :
<span class="nc bnc" id="L1111" title="All 2 branches missed.">			_municipalSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1113">			double outerSensitivityMargin = municipalSensitivityMarginOuterEntry.getValue();</span>

<span class="nc" id="L1115">			java.lang.String outerTenor = municipalSensitivityMarginOuterEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginInnerEntry
<span class="nc bnc" id="L1118" title="All 2 branches missed.">				: _municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1120">				java.lang.String innerTenor = municipalSensitivityMarginInnerEntry.getKey();</span>

<span class="nc bnc" id="L1122" title="All 2 branches missed.">				double crossTenorCorrelation = outerTenor.equalsIgnoreCase (innerTenor) ? 1. :</span>
<span class="nc" id="L1123">					tenorCorrelation.entry (</span>
						outerTenor,
						innerTenor
					);

<span class="nc" id="L1128">				curvatureMarginCovariance_MUNICIPAL_MUNICIPAL = curvatureMarginCovariance_MUNICIPAL_MUNICIPAL</span>
<span class="nc" id="L1129">					+ outerSensitivityMargin * municipalSensitivityMarginInnerEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1131">			}</span>
<span class="nc" id="L1132">		}</span>

<span class="nc" id="L1134">		return curvatureMarginCovariance_MUNICIPAL_MUNICIPAL;</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1151" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1153">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1157">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1158">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1160">		double linearMarginCovariance_OIS_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1163" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1165">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1167">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1170" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1172">				java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1174">				linearMarginCovariance_OIS_LIBOR1M = linearMarginCovariance_OIS_LIBOR1M +</span>
<span class="nc" id="L1175">					oisSensitivityMargin * libor1MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1176" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor1MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor1MTenor
						)
					);
<span class="nc" id="L1181">			}</span>
<span class="nc" id="L1182">		}</span>

<span class="nc" id="L1184">		return linearMarginCovariance_OIS_LIBOR1M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR1M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR1M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1201" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1203">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR1M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1207">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1208">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1210">		double curvatureMarginCovariance_OIS_LIBOR1M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1213" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1215">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1217">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1220" title="All 2 branches missed.">				_libor1MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1222">				java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1224" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor1MTenor) ? 1. :</span>
<span class="nc" id="L1225">					tenorCorrelation.entry (</span>
						oisTenor,
						libor1MTenor
					);

<span class="nc" id="L1230">				curvatureMarginCovariance_OIS_LIBOR1M = curvatureMarginCovariance_OIS_LIBOR1M +</span>
<span class="nc" id="L1231">					oisSensitivityMargin * libor1MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1233">			}</span>
<span class="nc" id="L1234">		}</span>

<span class="nc" id="L1236">		return curvatureMarginCovariance_OIS_LIBOR1M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1253" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1255">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1259">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1260">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1262">		double linearMarginCovariance_OIS_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1265" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1267">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1269">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1272" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1274">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1276">				linearMarginCovariance_OIS_LIBOR3M = linearMarginCovariance_OIS_LIBOR3M +</span>
<span class="nc" id="L1277">					oisSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1278" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor3MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor3MTenor
						)
					);
<span class="nc" id="L1283">			}</span>
<span class="nc" id="L1284">		}</span>

<span class="nc" id="L1286">		return linearMarginCovariance_OIS_LIBOR3M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1303" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1305">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1309">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1310">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1312">		double curvatureMarginCovariance_OIS_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1315" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1317">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1319">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1322" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1324">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1326" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor3MTenor) ? 1. :</span>
<span class="nc" id="L1327">					tenorCorrelation.entry (</span>
						oisTenor,
						libor3MTenor
					);

<span class="nc" id="L1332">				curvatureMarginCovariance_OIS_LIBOR3M = curvatureMarginCovariance_OIS_LIBOR3M +</span>
<span class="nc" id="L1333">					oisSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1335">			}</span>
<span class="nc" id="L1336">		}</span>

<span class="nc" id="L1338">		return curvatureMarginCovariance_OIS_LIBOR3M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1355" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1357">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1361">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1362">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1364">		double linearMarginCovariance_OIS_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1367" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1369">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1371">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1374" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1376">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1378">				linearMarginCovariance_OIS_LIBOR6M = linearMarginCovariance_OIS_LIBOR6M +</span>
<span class="nc" id="L1379">					oisSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1380" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor6MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor6MTenor
						)
					);
<span class="nc" id="L1385">			}</span>
<span class="nc" id="L1386">		}</span>

<span class="nc" id="L1388">		return linearMarginCovariance_OIS_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1405" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1407">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1411">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1412">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1414">		double curvatureMarginCovariance_OIS_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1417" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1419">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1421">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1424" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1426">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1428" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor6MTenor) ? 1. :</span>
<span class="nc" id="L1429">					tenorCorrelation.entry (</span>
						oisTenor,
						libor6MTenor
					);

<span class="nc" id="L1434">				curvatureMarginCovariance_OIS_LIBOR6M = curvatureMarginCovariance_OIS_LIBOR6M +</span>
<span class="nc" id="L1435">					oisSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1437">			}</span>
<span class="nc" id="L1438">		}</span>

<span class="nc" id="L1440">		return curvatureMarginCovariance_OIS_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1457" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1459">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1463">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1464">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1466">		double linearMarginCovariance_OIS_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1469" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1471">			double oisSensitivity = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1473">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L1476" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1478">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1480">				linearMarginCovariance_OIS_LIBOR12M = linearMarginCovariance_OIS_LIBOR12M +</span>
<span class="nc" id="L1481">					oisSensitivity * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1482" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L1487">			}</span>
<span class="nc" id="L1488">		}</span>

<span class="nc" id="L1490">		return linearMarginCovariance_OIS_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1507" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1509">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1513">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1514">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1516">		double curvatureMarginCovariance_OIS_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1519" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1521">			double oisSensitivity = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1523">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L1526" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1528">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1530" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L1531">					tenorCorrelation.entry (</span>
						oisTenor,
						libor12MTenor
					);

<span class="nc" id="L1536">				curvatureMarginCovariance_OIS_LIBOR12M = curvatureMarginCovariance_OIS_LIBOR12M +</span>
<span class="nc" id="L1537">					oisSensitivity * libor12MSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1539">			}</span>
<span class="nc" id="L1540">		}</span>

<span class="nc" id="L1542">		return curvatureMarginCovariance_OIS_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1559" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1561">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1565">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1566">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1568">		double linearMarginCovariance_OIS_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1571" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1573">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1575">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L1578" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1580">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1582">				linearMarginCovariance_OIS_PRIME = linearMarginCovariance_OIS_PRIME + oisSensitivityMargin *</span>
<span class="nc" id="L1583">					primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1584" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							primeTenor
						)
					);
<span class="nc" id="L1589">			}</span>
<span class="nc" id="L1590">		}</span>

<span class="nc" id="L1592">		return linearMarginCovariance_OIS_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1609" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1611">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1615">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1616">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1618">		double curvatureMarginCovariance_OIS_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1621" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1623">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1625">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L1628" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1630">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1632" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L1633">					tenorCorrelation.entry (</span>
						oisTenor,
						primeTenor
					);

<span class="nc" id="L1638">				curvatureMarginCovariance_OIS_PRIME = curvatureMarginCovariance_OIS_PRIME +</span>
<span class="nc" id="L1639">					oisSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation *</span>
						crossTenorCorrelation;
<span class="nc" id="L1641">			}</span>
<span class="nc" id="L1642">		}</span>

<span class="nc" id="L1644">		return curvatureMarginCovariance_OIS_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_OIS_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1661" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1663">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_OIS_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1667">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1668">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1670">		double linearMarginCovariance_OIS_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1673" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1675">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1677">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L1680" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1682">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1684">				linearMarginCovariance_OIS_MUNICIPAL = linearMarginCovariance_OIS_MUNICIPAL +</span>
<span class="nc" id="L1685">					oisSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1686" title="All 2 branches missed.">						oisTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							oisTenor,
							municipalTenor
						)
					);
<span class="nc" id="L1691">			}</span>
<span class="nc" id="L1692">		}</span>

<span class="nc" id="L1694">		return linearMarginCovariance_OIS_MUNICIPAL * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature OIS-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_OIS_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1711" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1713">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_OIS_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1717">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1718">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1720">		double curvatureMarginCovariance_OIS_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; oisSensitivityMarginEntry :
<span class="nc bnc" id="L1723" title="All 2 branches missed.">			_oisSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1725">			double oisSensitivityMargin = oisSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1727">			java.lang.String oisTenor = oisSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L1730" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1732">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1734" title="All 2 branches missed.">				double crossTenorCorrelation = oisTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L1735">					tenorCorrelation.entry (</span>
						oisTenor,
						municipalTenor
					);

<span class="nc" id="L1740">				curvatureMarginCovariance_OIS_MUNICIPAL = curvatureMarginCovariance_OIS_MUNICIPAL +</span>
<span class="nc" id="L1741">					oisSensitivityMargin * municipalSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L1743">			}</span>
<span class="nc" id="L1744">		}</span>

<span class="nc" id="L1746">		return curvatureMarginCovariance_OIS_MUNICIPAL * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1763" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1765">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1769">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1770">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1772">		double linearMarginCovariance_LIBOR1M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1775" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1777">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1779">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1782" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1784">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1786">				linearMarginCovariance_LIBOR1M_LIBOR3M = linearMarginCovariance_LIBOR1M_LIBOR3M +</span>
<span class="nc" id="L1787">					libor1MSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1788" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (libor3MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							libor3MTenor
						)
					);
<span class="nc" id="L1793">			}</span>
<span class="nc" id="L1794">		}</span>

<span class="nc" id="L1796">		return linearMarginCovariance_LIBOR1M_LIBOR3M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR3M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR3M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1813" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1815">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR3M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1819">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1820">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1822">		double curvatureMarginCovariance_LIBOR1M_LIBOR3M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1825" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1827">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1829">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L1832" title="All 2 branches missed.">				_libor3MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1834">				java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1836" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (libor3MTenor) ? 1. :</span>
<span class="nc" id="L1837">					tenorCorrelation.entry (</span>
						libor1MTenor,
						libor3MTenor
					);

<span class="nc" id="L1842">				curvatureMarginCovariance_LIBOR1M_LIBOR3M = curvatureMarginCovariance_LIBOR1M_LIBOR3M +</span>
<span class="nc" id="L1843">					libor1MSensitivityMargin * libor3MSensitivityMarginEntry.getValue() * </span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1845">			}</span>
<span class="nc" id="L1846">		}</span>

<span class="nc" id="L1848">		return curvatureMarginCovariance_LIBOR1M_LIBOR3M *</span>
<span class="nc" id="L1849">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1866" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1868">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1872">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1873">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1875">		double linearMarginCovariance_LIBOR1M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1878" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1880">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1882">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1885" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1887">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1889">				linearMarginCovariance_LIBOR1M_LIBOR6M = linearMarginCovariance_LIBOR1M_LIBOR6M +</span>
<span class="nc" id="L1890">					libor1MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1891" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (libor6MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							libor6MTenor
						)
					);
<span class="nc" id="L1896">			}</span>
<span class="nc" id="L1897">		}</span>

<span class="nc" id="L1899">		return linearMarginCovariance_LIBOR1M_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1916" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1918">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1922">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1923">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1925">		double curvatureMarginCovariance_LIBOR1M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1928" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1930">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1932">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L1935" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1937">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L1939" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (libor6MTenor) ? 1. :</span>
<span class="nc" id="L1940">					tenorCorrelation.entry (</span>
						libor1MTenor,
						libor6MTenor
					);

<span class="nc" id="L1945">				curvatureMarginCovariance_LIBOR1M_LIBOR6M = curvatureMarginCovariance_LIBOR1M_LIBOR6M +</span>
<span class="nc" id="L1946">					libor1MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L1948">			}</span>
<span class="nc" id="L1949">		}</span>

<span class="nc" id="L1951">		return curvatureMarginCovariance_LIBOR1M_LIBOR6M *</span>
<span class="nc" id="L1952">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1969" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L1971">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L1975">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L1976">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L1978">		double linearMarginCovariance_LIBOR1M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L1981" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L1983">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L1985">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L1988" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L1990">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L1992">				linearMarginCovariance_LIBOR1M_LIBOR12M = linearMarginCovariance_LIBOR1M_LIBOR12M +</span>
<span class="nc" id="L1993">					libor1MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L1994" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L1999">			}</span>
<span class="nc" id="L2000">		}</span>

<span class="nc" id="L2002">		return linearMarginCovariance_LIBOR1M_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2019" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2021">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2025">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2026">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2028">		double curvatureMarginCovariance_LIBOR1M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2031" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2033">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2035">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2038" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2040">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2042" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L2043">					tenorCorrelation.entry (</span>
						libor1MTenor,
						libor12MTenor
					);

<span class="nc" id="L2048">				curvatureMarginCovariance_LIBOR1M_LIBOR12M = curvatureMarginCovariance_LIBOR1M_LIBOR12M +</span>
<span class="nc" id="L2049">					libor1MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2051">			}</span>
<span class="nc" id="L2052">		}</span>

<span class="nc" id="L2054">		return curvatureMarginCovariance_LIBOR1M_LIBOR12M *</span>
<span class="nc" id="L2055">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2072" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2074">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2078">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2079">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2081">		double linearMarginCovariance_LIBOR1M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2084" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2086">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2088">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2091" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2093">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2095">				linearMarginCovariance_LIBOR1M_PRIME = linearMarginCovariance_LIBOR1M_PRIME +</span>
<span class="nc" id="L2096">					libor1MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2097" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2102">			}</span>
<span class="nc" id="L2103">		}</span>

<span class="nc" id="L2105">		return linearMarginCovariance_LIBOR1M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2122" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2124">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2128">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2129">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2131">		double curvatureMarginCovariance_LIBOR1M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2134" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2136">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2138">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2141" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2143">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2145" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L2146">					tenorCorrelation.entry (</span>
						libor1MTenor,
						primeTenor
					);

<span class="nc" id="L2151">				curvatureMarginCovariance_LIBOR1M_PRIME = curvatureMarginCovariance_LIBOR1M_PRIME +</span>
<span class="nc" id="L2152">					libor1MSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L2154">			}</span>
<span class="nc" id="L2155">		}</span>

<span class="nc" id="L2157">		return curvatureMarginCovariance_LIBOR1M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR1M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2174" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2176">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR1M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2180">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2181">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2183">		double linearMarginCovariance_LIBOR1M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2186" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2188">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2190">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2193" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2195">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2197">				linearMarginCovariance_LIBOR1M_MUNICIPAL = linearMarginCovariance_LIBOR1M_MUNICIPAL +</span>
<span class="nc" id="L2198">					libor1MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2199" title="All 2 branches missed.">						libor1MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor1MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L2204">			}</span>
<span class="nc" id="L2205">		}</span>

<span class="nc" id="L2207">		return linearMarginCovariance_LIBOR1M_MUNICIPAL *</span>
<span class="nc" id="L2208">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR1M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR1M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2225" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2227">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR1M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2231">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2232">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2234">		double curvatureMarginCovariance_LIBOR1M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor1MSensitivityMarginEntry :
<span class="nc bnc" id="L2237" title="All 2 branches missed.">			_libor1MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2239">			double libor1MSensitivityMargin = libor1MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2241">			java.lang.String libor1MTenor = libor1MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2244" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2246">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2248" title="All 2 branches missed.">				double crossTenorCorrelation = libor1MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L2249">					tenorCorrelation.entry (</span>
						libor1MTenor,
						municipalTenor
					);

<span class="nc" id="L2254">				curvatureMarginCovariance_LIBOR1M_MUNICIPAL = curvatureMarginCovariance_LIBOR1M_MUNICIPAL +</span>
<span class="nc" id="L2255">					libor1MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2257">			}</span>
<span class="nc" id="L2258">		}</span>

<span class="nc" id="L2260">		return curvatureMarginCovariance_LIBOR1M_MUNICIPAL *</span>
<span class="nc" id="L2261">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2278" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2280">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2284">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2285">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2287">		double linearMarginCovariance_LIBOR3M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2290" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2292">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2294">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2297" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2299">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2301">				linearMarginCovariance_LIBOR3M_LIBOR6M = linearMarginCovariance_LIBOR3M_LIBOR6M +</span>
<span class="nc" id="L2302">					libor3MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2303" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (libor6MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							libor6MTenor
						)
					);
<span class="nc" id="L2308">			}</span>
<span class="nc" id="L2309">		}</span>

<span class="nc" id="L2311">		return linearMarginCovariance_LIBOR3M_LIBOR6M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-LIBOR6M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_LIBOR6M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2328" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2330">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_LIBOR6M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2334">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2335">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2337">		double curvatureMarginCovariance_LIBOR3M_LIBOR6M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2340" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2342">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2344">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2347" title="All 2 branches missed.">				_libor6MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2349">				java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2351" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (libor6MTenor) ? 1. :</span>
<span class="nc" id="L2352">					tenorCorrelation.entry (</span>
						libor3MTenor,
						libor6MTenor
					);

<span class="nc" id="L2357">				curvatureMarginCovariance_LIBOR3M_LIBOR6M = curvatureMarginCovariance_LIBOR3M_LIBOR6M +</span>
<span class="nc" id="L2358">					libor3MSensitivityMargin * libor6MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2360">			}</span>
<span class="nc" id="L2361">		}</span>

<span class="nc" id="L2363">		return curvatureMarginCovariance_LIBOR3M_LIBOR6M *</span>
<span class="nc" id="L2364">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2381" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2383">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2387">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2388">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2390">		double linearMarginCovariance_LIBOR3M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2393" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2395">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2397">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2400" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2402">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2404">				linearMarginCovariance_LIBOR3M_LIBOR12M = linearMarginCovariance_LIBOR3M_LIBOR12M +</span>
<span class="nc" id="L2405">					libor3MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2406" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L2411">			}</span>
<span class="nc" id="L2412">		}</span>

<span class="nc" id="L2414">		return linearMarginCovariance_LIBOR3M_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2431" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2433">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2437">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2438">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2440">		double curvatureMarginCovariance_LIBOR3M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2443" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2445">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2447">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2450" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2452">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2454" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L2455">					tenorCorrelation.entry (</span>
						libor3MTenor,
						libor12MTenor
					);

<span class="nc" id="L2460">				curvatureMarginCovariance_LIBOR3M_LIBOR12M = curvatureMarginCovariance_LIBOR3M_LIBOR12M +</span>
<span class="nc" id="L2461">					libor3MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2463">			}</span>
<span class="nc" id="L2464">		}</span>

<span class="nc" id="L2466">		return curvatureMarginCovariance_LIBOR3M_LIBOR12M *</span>
<span class="nc" id="L2467">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2484" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2486">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2490">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2491">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2493">		double linearMarginCovariance_LIBOR3M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2496" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2498">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2500">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2503" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2505">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2507">				linearMarginCovariance_LIBOR3M_PRIME = linearMarginCovariance_LIBOR3M_PRIME +</span>
<span class="nc" id="L2508">					libor3MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2509" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2514">			}</span>
<span class="nc" id="L2515">		}</span>

<span class="nc" id="L2517">		return linearMarginCovariance_LIBOR3M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2534" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2536">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2540">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2541">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2543">		double curvatureMarginCovariance_LIBOR3M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2546" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2548">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2550">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2553" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2555">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2557" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L2558">					tenorCorrelation.entry (</span>
						libor3MTenor,
						primeTenor
					);

<span class="nc" id="L2563">				curvatureMarginCovariance_LIBOR3M_PRIME = curvatureMarginCovariance_LIBOR3M_PRIME +</span>
<span class="nc" id="L2564">					libor3MSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L2566">			}</span>
<span class="nc" id="L2567">		}</span>

<span class="nc" id="L2569">		return curvatureMarginCovariance_LIBOR3M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR3M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2586" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2588">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR3M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2592">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2593">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2595">		double linearMarginCovariance_LIBOR3M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2598" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2600">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2602">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2605" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2607">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2609">				linearMarginCovariance_LIBOR3M_MUNICIPAL = linearMarginCovariance_LIBOR3M_MUNICIPAL +</span>
<span class="nc" id="L2610">					libor3MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2611" title="All 2 branches missed.">						libor3MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor3MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L2616">			}</span>
<span class="nc" id="L2617">		}</span>

<span class="nc" id="L2619">		return linearMarginCovariance_LIBOR3M_MUNICIPAL *</span>
<span class="nc" id="L2620">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR3M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR3M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2637" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2639">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR3M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2643">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2644">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2646">		double curvatureMarginCovariance_LIBOR3M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor3MSensitivityMarginEntry :
<span class="nc bnc" id="L2649" title="All 2 branches missed.">			_libor3MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2651">			double libor3MSensitivityMargin = libor3MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2653">			java.lang.String libor3MTenor = libor3MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2656" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2658">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2660" title="All 2 branches missed.">				double crossTenorCorrelation = libor3MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L2661">					tenorCorrelation.entry (</span>
						libor3MTenor,
						municipalTenor
					);

<span class="nc" id="L2666">				curvatureMarginCovariance_LIBOR3M_MUNICIPAL = curvatureMarginCovariance_LIBOR3M_MUNICIPAL +</span>
<span class="nc" id="L2667">					libor3MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2669">			}</span>
<span class="nc" id="L2670">		}</span>

<span class="nc" id="L2672">		return curvatureMarginCovariance_LIBOR3M_MUNICIPAL *</span>
<span class="nc" id="L2673">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2690" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2692">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2696">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2697">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2699">		double linearMarginCovariance_LIBOR6M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2702" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2704">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2706">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2709" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2711">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2713">				linearMarginCovariance_LIBOR6M_LIBOR12M = linearMarginCovariance_LIBOR6M_LIBOR12M +</span>
<span class="nc" id="L2714">					libor6MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2715" title="All 2 branches missed.">						libor6MTenor.equalsIgnoreCase (libor12MTenor) ? 1. : tenorCorrelation.entry (</span>
							libor6MTenor,
							libor12MTenor
						)
					);
<span class="nc" id="L2720">			}</span>
<span class="nc" id="L2721">		}</span>

<span class="nc" id="L2723">		return linearMarginCovariance_LIBOR6M_LIBOR12M * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-LIBOR12M Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_LIBOR12M (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2740" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2742">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_LIBOR12M =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2746">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2747">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2749">		double curvatureMarginCovariance_LIBOR6M_LIBOR12M = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2752" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2754">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2756">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L2759" title="All 2 branches missed.">				_libor12MSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2761">				java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2763" title="All 2 branches missed.">				double crossTenorCorrelation = libor6MTenor.equalsIgnoreCase (libor12MTenor) ? 1. :</span>
<span class="nc" id="L2764">					tenorCorrelation.entry (</span>
						libor6MTenor,
						libor12MTenor
					);

<span class="nc" id="L2769">				curvatureMarginCovariance_LIBOR6M_LIBOR12M = curvatureMarginCovariance_LIBOR6M_LIBOR12M +</span>
<span class="nc" id="L2770">					libor6MSensitivityMargin * libor12MSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2772">			}</span>
<span class="nc" id="L2773">		}</span>

<span class="nc" id="L2775">		return curvatureMarginCovariance_LIBOR6M_LIBOR12M *</span>
<span class="nc" id="L2776">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2793" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2795">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2799">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2800">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2802">		double linearMarginCovariance_LIBOR6M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2805" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2807">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2809">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2812" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2814">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2816">				linearMarginCovariance_LIBOR6M_PRIME = linearMarginCovariance_LIBOR6M_PRIME +</span>
<span class="nc" id="L2817">					libor6MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2818" title="All 2 branches missed.">						libor6MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor6MTenor,
							primeTenor
						)
					);
<span class="nc" id="L2823">			}</span>
<span class="nc" id="L2824">		}</span>

<span class="nc" id="L2826">		return linearMarginCovariance_LIBOR6M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2843" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2845">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2849">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2850">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2852">		double curvatureMarginCovariance_LIBOR6M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2855" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2857">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2859">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L2862" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2864">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2866" title="All 2 branches missed.">				double crossTenorCorrelation = libor6MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L2867">					tenorCorrelation.entry (</span>
						libor6MTenor,
						primeTenor
					);

<span class="nc" id="L2872">				curvatureMarginCovariance_LIBOR6M_PRIME = curvatureMarginCovariance_LIBOR6M_PRIME +</span>
<span class="nc" id="L2873">					libor6MSensitivityMargin * primeSensitivityMarginEntry.getValue() * crossTenorCorrelation</span>
						* crossTenorCorrelation;
<span class="nc" id="L2875">			}</span>
<span class="nc" id="L2876">		}</span>

<span class="nc" id="L2878">		return curvatureMarginCovariance_LIBOR6M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR6M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2895" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2897">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR6M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2901">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2902">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2904">		double linearMarginCovariance_LIBOR6M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2907" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2909">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2911">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2914" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2916">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L2918">				linearMarginCovariance_LIBOR6M_MUNICIPAL = linearMarginCovariance_LIBOR6M_MUNICIPAL +</span>
<span class="nc" id="L2919">					libor6MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L2920" title="All 2 branches missed.">						libor6MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor6MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L2925">			}</span>
<span class="nc" id="L2926">		}</span>

<span class="nc" id="L2928">		return linearMarginCovariance_LIBOR6M_MUNICIPAL *</span>
<span class="nc" id="L2929">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR6M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR6M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2946" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L2948">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR6M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L2952">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L2953">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L2955">		double curvatureMarginCovariance_LIBOR6M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor6MSensitivityMarginEntry :
<span class="nc bnc" id="L2958" title="All 2 branches missed.">			_libor6MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L2960">			double libor6MSensitivityMargin = libor6MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L2962">			java.lang.String libor6MTenor = libor6MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L2965" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L2967">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L2969" title="All 2 branches missed.">				double crossTenorCorrelation = libor6MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L2970">					tenorCorrelation.entry (</span>
						libor6MTenor,
						municipalTenor
					);

<span class="nc" id="L2975">				curvatureMarginCovariance_LIBOR6M_MUNICIPAL = curvatureMarginCovariance_LIBOR6M_MUNICIPAL +</span>
<span class="nc" id="L2976">					libor6MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L2978">			}</span>
<span class="nc" id="L2979">		}</span>

<span class="nc" id="L2981">		return curvatureMarginCovariance_LIBOR6M_MUNICIPAL *</span>
<span class="nc" id="L2982">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR12M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L2999" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3001">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR12M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3005">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3006">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3008">		double linearMarginCovariance_LIBOR12M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3011" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3013">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3015">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3018" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3020">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L3022">				linearMarginCovariance_LIBOR12M_PRIME = linearMarginCovariance_LIBOR12M_PRIME +</span>
<span class="nc" id="L3023">					libor12MSensitivityMargin * primeSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L3024" title="All 2 branches missed.">						libor12MTenor.equalsIgnoreCase (primeTenor) ? 1. : tenorCorrelation.entry (</span>
							libor12MTenor,
							primeTenor
						)
					);
<span class="nc" id="L3029">			}</span>
<span class="nc" id="L3030">		}</span>

<span class="nc" id="L3032">		return linearMarginCovariance_LIBOR12M_PRIME * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR12M-PRIME Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR12M_PRIME (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3049" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3051">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR12M_PRIME =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3055">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3056">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3058">		double curvatureMarginCovariance_LIBOR12M_PRIME = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3061" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3063">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3065">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3068" title="All 2 branches missed.">				_primeSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3070">				java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L3072" title="All 2 branches missed.">				double crossTenorCorrelation = libor12MTenor.equalsIgnoreCase (primeTenor) ? 1. :</span>
<span class="nc" id="L3073">					tenorCorrelation.entry (</span>
						libor12MTenor,
						primeTenor
					);

<span class="nc" id="L3078">				curvatureMarginCovariance_LIBOR12M_PRIME = curvatureMarginCovariance_LIBOR12M_PRIME +</span>
<span class="nc" id="L3079">					libor12MSensitivityMargin * primeSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L3081">			}</span>
<span class="nc" id="L3082">		}</span>

<span class="nc" id="L3084">		return curvatureMarginCovariance_LIBOR12M_PRIME *</span>
<span class="nc" id="L3085">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_LIBOR12M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3102" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3104">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_LIBOR12M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3108">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3109">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3111">		double linearMarginCovariance_LIBOR12M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3114" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3116">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3118">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3121" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3123">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L3125">				linearMarginCovariance_LIBOR12M_MUNICIPAL = linearMarginCovariance_LIBOR12M_MUNICIPAL +</span>
<span class="nc" id="L3126">					libor12MSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L3127" title="All 2 branches missed.">						libor12MTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							libor12MTenor,
							municipalTenor
						)
					);
<span class="nc" id="L3132">			}</span>
<span class="nc" id="L3133">		}</span>

<span class="nc" id="L3135">		return linearMarginCovariance_LIBOR12M_MUNICIPAL *</span>
<span class="nc" id="L3136">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature LIBOR12M-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_LIBOR12M_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3153" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3155">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_LIBOR12M_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3159">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3160">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3162">		double curvatureMarginCovariance_LIBOR12M_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; libor12MSensitivityMarginEntry :
<span class="nc bnc" id="L3165" title="All 2 branches missed.">			_libor12MSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3167">			double libor12MSensitivityMargin = libor12MSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3169">			java.lang.String libor12MTenor = libor12MSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3172" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3174">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L3176" title="All 2 branches missed.">				double crossTenorCorrelation = libor12MTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L3177">					tenorCorrelation.entry (</span>
						libor12MTenor,
						municipalTenor
					);

<span class="nc" id="L3182">				curvatureMarginCovariance_LIBOR12M_MUNICIPAL = curvatureMarginCovariance_LIBOR12M_MUNICIPAL +</span>
<span class="nc" id="L3183">					libor12MSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L3185">			}</span>
<span class="nc" id="L3186">		}</span>

<span class="nc" id="L3188">		return curvatureMarginCovariance_LIBOR12M_MUNICIPAL *</span>
<span class="nc" id="L3189">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double linearMarginCovariance_PRIME_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3206" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3208">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::linearMarginCovariance_PRIME_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3212">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3213">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3215">		double linearMarginCovariance_PRIME_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3218" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3220">			double primeSensitivityMargin = primeSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3222">			java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3225" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3227">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc" id="L3229">				linearMarginCovariance_PRIME_MUNICIPAL = linearMarginCovariance_PRIME_MUNICIPAL +</span>
<span class="nc" id="L3230">					primeSensitivityMargin * municipalSensitivityMarginEntry.getValue() * (</span>
<span class="nc bnc" id="L3231" title="All 2 branches missed.">						primeTenor.equalsIgnoreCase (municipalTenor) ? 1. : tenorCorrelation.entry (</span>
							primeTenor,
							municipalTenor
						)
					);
<span class="nc" id="L3236">			}</span>
<span class="nc" id="L3237">		}</span>

<span class="nc" id="L3239">		return linearMarginCovariance_PRIME_MUNICIPAL * bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Curvature PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature PRIME-MUNICIPAL Sensitivity Margin Co-variance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	public double curvatureMarginCovariance_PRIME_MUNICIPAL (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L3256" title="All 2 branches missed.">		if (null == bucketSensitivitySettingsIR)</span>
		{
<span class="nc" id="L3258">			throw new java.lang.Exception</span>
				(&quot;IRFactorAggregate::curvatureMarginCovariance_PRIME_MUNICIPAL =&gt; Invalid Inputs&quot;);
		}

<span class="nc" id="L3262">		org.drip.measure.stochastic.LabelCorrelation tenorCorrelation =</span>
<span class="nc" id="L3263">			bucketSensitivitySettingsIR.crossTenorCorrelation();</span>

<span class="nc" id="L3265">		double curvatureMarginCovariance_PRIME_MUNICIPAL = 0.;</span>

		for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; primeSensitivityMarginEntry :
<span class="nc bnc" id="L3268" title="All 2 branches missed.">			_primeSensitivityMargin.entrySet())</span>
		{
<span class="nc" id="L3270">			double primeSensitivityMargin = primeSensitivityMarginEntry.getValue();</span>

<span class="nc" id="L3272">			java.lang.String primeTenor = primeSensitivityMarginEntry.getKey();</span>

			for (java.util.Map.Entry&lt;java.lang.String, java.lang.Double&gt; municipalSensitivityMarginEntry :
<span class="nc bnc" id="L3275" title="All 2 branches missed.">				_municipalSensitivityMargin.entrySet())</span>
			{
<span class="nc" id="L3277">				java.lang.String municipalTenor = municipalSensitivityMarginEntry.getKey();</span>

<span class="nc bnc" id="L3279" title="All 2 branches missed.">				double crossTenorCorrelation = primeTenor.equalsIgnoreCase (municipalTenor) ? 1. :</span>
<span class="nc" id="L3280">					tenorCorrelation.entry (</span>
						primeTenor,
						municipalTenor
					);

<span class="nc" id="L3285">				curvatureMarginCovariance_PRIME_MUNICIPAL = curvatureMarginCovariance_PRIME_MUNICIPAL +</span>
<span class="nc" id="L3286">					primeSensitivityMargin * municipalSensitivityMarginEntry.getValue() *</span>
						crossTenorCorrelation * crossTenorCorrelation;
<span class="nc" id="L3288">			}</span>
<span class="nc" id="L3289">		}</span>

<span class="nc" id="L3291">		return curvatureMarginCovariance_PRIME_MUNICIPAL *</span>
<span class="nc" id="L3292">			bucketSensitivitySettingsIR.crossCurveCorrelation();</span>
	}

	/**
	 * Compute the Linear Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Linear Margin Co-variance
	 */

	public org.drip.simm.margin.SensitivityAggregateIR linearMargin (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
	{
		try
		{
<span class="nc" id="L3308">			return new org.drip.simm.margin.SensitivityAggregateIR (</span>
<span class="nc" id="L3309">				linearMarginCovariance_OIS_OIS (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3310">				linearMarginCovariance_OIS_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3311">				linearMarginCovariance_OIS_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3312">				linearMarginCovariance_OIS_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3313">				linearMarginCovariance_OIS_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3314">				linearMarginCovariance_OIS_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3315">				linearMarginCovariance_OIS_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3316">				linearMarginCovariance_LIBOR1M_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3317">				linearMarginCovariance_LIBOR1M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3318">				linearMarginCovariance_LIBOR1M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3319">				linearMarginCovariance_LIBOR1M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3320">				linearMarginCovariance_LIBOR1M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3321">				linearMarginCovariance_LIBOR1M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3322">				linearMarginCovariance_LIBOR3M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3323">				linearMarginCovariance_LIBOR3M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3324">				linearMarginCovariance_LIBOR3M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3325">				linearMarginCovariance_LIBOR3M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3326">				linearMarginCovariance_LIBOR3M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3327">				linearMarginCovariance_LIBOR6M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3328">				linearMarginCovariance_LIBOR6M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3329">				linearMarginCovariance_LIBOR6M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3330">				linearMarginCovariance_LIBOR6M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3331">				linearMarginCovariance_LIBOR12M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3332">				linearMarginCovariance_LIBOR12M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3333">				linearMarginCovariance_LIBOR12M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3334">				linearMarginCovariance_PRIME_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3335">				linearMarginCovariance_PRIME_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3336">				linearMarginCovariance_MUNICIPAL_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3337">				cumulativeSensitivityMargin()</span>
			);
		}
<span class="nc" id="L3340">		catch (java.lang.Exception e)</span>
		{
<span class="nc" id="L3342">			e.printStackTrace();</span>
		}

<span class="nc" id="L3345">		return null;</span>
	}

	/**
	 * Compute the Curvature Margin Co-variance
	 * 
	 * @param bucketSensitivitySettingsIR The IR Currency Bucket Curve Tenor Sensitivity Settings
	 * 
	 * @return The Curvature Margin Co-variance
	 */

	public org.drip.simm.margin.SensitivityAggregateIR curvatureMargin (
		final org.drip.simm.parameters.BucketSensitivitySettingsIR bucketSensitivitySettingsIR)
	{
		try
		{
<span class="nc" id="L3361">			return new org.drip.simm.margin.SensitivityAggregateIR (</span>
<span class="nc" id="L3362">				curvatureMarginCovariance_OIS_OIS (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3363">				curvatureMarginCovariance_OIS_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3364">				curvatureMarginCovariance_OIS_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3365">				curvatureMarginCovariance_OIS_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3366">				curvatureMarginCovariance_OIS_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3367">				curvatureMarginCovariance_OIS_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3368">				curvatureMarginCovariance_OIS_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3369">				curvatureMarginCovariance_LIBOR1M_LIBOR1M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3370">				curvatureMarginCovariance_LIBOR1M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3371">				curvatureMarginCovariance_LIBOR1M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3372">				curvatureMarginCovariance_LIBOR1M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3373">				curvatureMarginCovariance_LIBOR1M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3374">				curvatureMarginCovariance_LIBOR1M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3375">				curvatureMarginCovariance_LIBOR3M_LIBOR3M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3376">				curvatureMarginCovariance_LIBOR3M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3377">				curvatureMarginCovariance_LIBOR3M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3378">				curvatureMarginCovariance_LIBOR3M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3379">				curvatureMarginCovariance_LIBOR3M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3380">				curvatureMarginCovariance_LIBOR6M_LIBOR6M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3381">				curvatureMarginCovariance_LIBOR6M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3382">				curvatureMarginCovariance_LIBOR6M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3383">				curvatureMarginCovariance_LIBOR6M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3384">				curvatureMarginCovariance_LIBOR12M_LIBOR12M (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3385">				curvatureMarginCovariance_LIBOR12M_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3386">				curvatureMarginCovariance_LIBOR12M_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3387">				curvatureMarginCovariance_PRIME_PRIME (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3388">				curvatureMarginCovariance_PRIME_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3389">				curvatureMarginCovariance_MUNICIPAL_MUNICIPAL (bucketSensitivitySettingsIR),</span>
<span class="nc" id="L3390">				cumulativeSensitivityMargin()</span>
			);
		}
<span class="nc" id="L3393">		catch (java.lang.Exception e)</span>
		{
<span class="nc" id="L3395">			e.printStackTrace();</span>
		}

<span class="nc" id="L3398">		return null;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>