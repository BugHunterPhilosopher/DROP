<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Convention.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.analytics.daycount</a> &gt; <span class="el_source">Convention.java</span></div><h1>Convention.java</h1><pre class="source lang-java linenums">
package org.drip.analytics.daycount;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2019 Lakshmi Krishnamurthy
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * Copyright (C) 2017 Lakshmi Krishnamurthy
 * Copyright (C) 2016 Lakshmi Krishnamurthy
 * Copyright (C) 2015 Lakshmi Krishnamurthy
 * Copyright (C) 2014 Lakshmi Krishnamurthy
 * Copyright (C) 2013 Lakshmi Krishnamurthy
 * Copyright (C) 2012 Lakshmi Krishnamurthy
 * Copyright (C) 2011 Lakshmi Krishnamurthy
 * 
 *  This file is part of DROP, an open-source library targeting risk, transaction costs, exposure, margin
 *  	calculations, valuation adjustment, and portfolio construction within and across fixed income,
 *  	credit, commodity, equity, FX, and structured products.
 *  
 *  	https://lakshmidrip.github.io/DROP/
 *  
 *  DROP is composed of three modules:
 *  
 *  - DROP Analytics Core - https://lakshmidrip.github.io/DROP-Analytics-Core/
 *  - DROP Portfolio Core - https://lakshmidrip.github.io/DROP-Portfolio-Core/
 *  - DROP Numerical Core - https://lakshmidrip.github.io/DROP-Numerical-Core/
 * 
 * 	DROP Analytics Core implements libraries for the following:
 * 	- Fixed Income Analytics
 * 	- Asset Backed Analytics
 * 	- XVA Analytics
 * 	- Exposure and Margin Analytics
 * 
 * 	DROP Portfolio Core implements libraries for the following:
 * 	- Asset Allocation Analytics
 * 	- Transaction Cost Analytics
 * 
 * 	DROP Numerical Core implements libraries for the following:
 * 	- Statistical Learning Library
 * 	- Numerical Optimizer Library
 * 	- Machine Learning Library
 * 	- Spline Builder Library
 * 
 * 	Documentation for DROP is Spread Over:
 * 
 * 	- Main                     =&gt; https://lakshmidrip.github.io/DROP/
 * 	- Wiki                     =&gt; https://github.com/lakshmiDRIP/DROP/wiki
 * 	- GitHub                   =&gt; https://github.com/lakshmiDRIP/DROP
 * 	- Repo Layout Taxonomy     =&gt; https://github.com/lakshmiDRIP/DROP/blob/master/Taxonomy.md
 * 	- Javadoc                  =&gt; https://lakshmidrip.github.io/DROP/Javadoc/index.html
 * 	- Technical Specifications =&gt; https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal
 * 	- Release Versions         =&gt; https://lakshmidrip.github.io/DROP/version.html
 * 	- Community Credits        =&gt; https://lakshmidrip.github.io/DROP/credits.html
 * 	- Issues Catalog           =&gt; https://github.com/lakshmiDRIP/DROP/issues
 * 	- JUnit                    =&gt; https://lakshmidrip.github.io/DROP/junit/index.html
 * 	- Jacoco                   =&gt; https://lakshmidrip.github.io/DROP/jacoco/index.html
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;Convention&lt;/i&gt; contains flags that indicate where the holidays are loaded from, as well as the holiday
 * types and load rules. It exports the following date related functionality:
 *
 *	&lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *  	&lt;li&gt;
 *  		Add business days according to the specified calendar
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		The Year Fraction between any 2 days given the day count type and the holiday calendar
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Adjust/roll to the next working day according to the adjustment rule
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Holiday Functions; is the given day a holiday/business day, the number and the set of
 *  			holidays/business days between 2 days.
 *  	&lt;/li&gt;
 *  	&lt;li&gt;
 *  		Calendars and Day counts; Available set of day count conventions and calendars, and the weekend
 *  			days corresponding to a given calendar.
 *  	&lt;/li&gt;
 *  &lt;/ul&gt;
 *
 *	&lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Module &lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/AnalyticsCore.md&quot;&gt;Analytics Core Module&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Library&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/FixedIncomeAnalyticsLibrary.md&quot;&gt;Fixed Income Analytics&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/analytics/README.md&quot;&gt;Analytics&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/analytics/daycount/README.md&quot;&gt;Day Count&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 *
 * @author Lakshmi Krishnamurthy
 */

<span class="nc" id="L111">public class Convention {</span>

	/**
	 * Date Roll Actual
	 */

	public static final int DATE_ROLL_ACTUAL = 0;

	/**
	 * Date Roll Following
	 */

	public static final int DATE_ROLL_FOLLOWING = 1;

	/**
	 * Date Roll Modified Following
	 */

	public static final int DATE_ROLL_MODIFIED_FOLLOWING = 2;

	/**
	 * Date Roll Modified Following Bi-monthly
	 */

	public static final int DATE_ROLL_MODIFIED_FOLLOWING_BIMONTHLY = 4;

	/**
	 * Date Roll Previous
	 */

	public static final int DATE_ROLL_PREVIOUS = 8;

	/**
	 * Date Roll Modified Previous
	 */

	public static final int DATE_ROLL_MODIFIED_PREVIOUS = 16;

	/**
	 * Week Day Holiday
	 */

	public static final int WEEKDAY_HOLS = 1;

	/**
	 * Week End Holiday
	 */

	public static final int WEEKEND_HOLS = 2;

	private static final int INIT_FROM_HOLS_DB = 1;
	private static final int INIT_FROM_HOLS_XML = 2;
	private static final int INIT_FROM_HOLS_SOURCE = 4;

<span class="fc" id="L165">	private static int s_iInitHols = INIT_FROM_HOLS_SOURCE;</span>
	private static org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.eventday.Locale&gt;
<span class="fc" id="L167">		s_mapLocHols = null;</span>

	private static
		org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.daycount.DCFCalculator&gt;
<span class="fc" id="L171">			s_mapDCCalc = new</span>
				org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.daycount.DCFCalculator&gt;();

	private static final boolean UpdateDCCalcMap (
		final org.drip.analytics.daycount.DCFCalculator dcfCalc)
	{
<span class="fc bfc" id="L177" title="All 2 branches covered.">		for (java.lang.String strDC : dcfCalc.alternateNames())</span>
<span class="fc" id="L178">			s_mapDCCalc.put (strDC, dcfCalc);</span>

<span class="fc" id="L180">		return true;</span>
	}

	private static final boolean SetDCCalc()
	{
<span class="pc bpc" id="L185" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC1_1())) return false;</span>

<span class="pc bpc" id="L187" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC28_360())) return false;</span>

<span class="pc bpc" id="L189" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC30_360())) return false;</span>

<span class="pc bpc" id="L191" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC30_365())) return false;</span>

<span class="pc bpc" id="L193" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC30_Act())) return false;</span>

<span class="pc bpc" id="L195" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC30E_360())) return false;</span>

<span class="pc bpc" id="L197" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC30E_360_ISDA())) return false;</span>

<span class="pc bpc" id="L199" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DC30EPLUS_360_ISDA())) return false;</span>

<span class="pc bpc" id="L201" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_360())) return false;</span>

<span class="pc bpc" id="L203" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_364())) return false;</span>

<span class="pc bpc" id="L205" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_365())) return false;</span>

<span class="pc bpc" id="L207" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_365L())) return false;</span>

<span class="pc bpc" id="L209" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_Act())) return false;</span>

<span class="pc bpc" id="L211" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_Act_ISDA())) return false;</span>

<span class="pc bpc" id="L213" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCAct_Act_UST())) return false;</span>

<span class="pc bpc" id="L215" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCNL_360())) return false;</span>

<span class="pc bpc" id="L217" title="1 of 2 branches missed.">		if (!UpdateDCCalcMap (new org.drip.analytics.daycount.DCNL_365())) return false;</span>

<span class="fc" id="L219">		return UpdateDCCalcMap (new org.drip.analytics.daycount.DCNL_Act());</span>
	}

	private static final boolean AddLH (
		final org.drip.analytics.holset.LocationHoliday lh,
		final org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.eventday.Locale&gt; mapHols)
	{
<span class="pc bpc" id="L226" title="2 of 4 branches missed.">		if (null == lh || null == mapHols) return false;</span>

<span class="fc" id="L228">		java.lang.String strLocation = lh.getHolidayLoc();</span>

<span class="fc" id="L230">		org.drip.analytics.eventday.Locale locHols = lh.getHolidaySet();</span>

<span class="pc bpc" id="L232" title="3 of 6 branches missed.">		if (null == locHols || null == strLocation || strLocation.isEmpty()) return false;</span>

<span class="fc" id="L234">		mapHols.put (strLocation, locHols);</span>

<span class="fc" id="L236">		return true;</span>
	}

	private static final org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.eventday.Locale&gt;
		SetHolsFromSource()
	{
<span class="fc" id="L242">		org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.eventday.Locale&gt; mapHols = new</span>
			org.drip.analytics.support.CaseInsensitiveTreeMap&lt;org.drip.analytics.eventday.Locale&gt;();

<span class="fc" id="L245">		AddLH (new org.drip.analytics.holset.AEDHoliday(), mapHols);</span>

<span class="fc" id="L247">		AddLH (new org.drip.analytics.holset.ANGHoliday(), mapHols);</span>

<span class="fc" id="L249">		AddLH (new org.drip.analytics.holset.ARAHoliday(), mapHols);</span>

<span class="fc" id="L251">		AddLH (new org.drip.analytics.holset.ARFHoliday(), mapHols);</span>

<span class="fc" id="L253">		AddLH (new org.drip.analytics.holset.ARNHoliday(), mapHols);</span>

<span class="fc" id="L255">		AddLH (new org.drip.analytics.holset.ARPHoliday(), mapHols);</span>

<span class="fc" id="L257">		AddLH (new org.drip.analytics.holset.ARSHoliday(), mapHols);</span>

<span class="fc" id="L259">		AddLH (new org.drip.analytics.holset.ATSHoliday(), mapHols);</span>

<span class="fc" id="L261">		AddLH (new org.drip.analytics.holset.AUDHoliday(), mapHols);</span>

<span class="fc" id="L263">		AddLH (new org.drip.analytics.holset.AZMHoliday(), mapHols);</span>

<span class="fc" id="L265">		AddLH (new org.drip.analytics.holset.BAKHoliday(), mapHols);</span>

<span class="fc" id="L267">		AddLH (new org.drip.analytics.holset.BBDHoliday(), mapHols);</span>

<span class="fc" id="L269">		AddLH (new org.drip.analytics.holset.BEFHoliday(), mapHols);</span>

<span class="fc" id="L271">		AddLH (new org.drip.analytics.holset.BGLHoliday(), mapHols);</span>

<span class="fc" id="L273">		AddLH (new org.drip.analytics.holset.BHDHoliday(), mapHols);</span>

<span class="fc" id="L275">		AddLH (new org.drip.analytics.holset.BMDHoliday(), mapHols);</span>

<span class="fc" id="L277">		AddLH (new org.drip.analytics.holset.BRCHoliday(), mapHols);</span>

<span class="fc" id="L279">		AddLH (new org.drip.analytics.holset.BRLHoliday(), mapHols);</span>

<span class="fc" id="L281">		AddLH (new org.drip.analytics.holset.BSDHoliday(), mapHols);</span>

<span class="fc" id="L283">		AddLH (new org.drip.analytics.holset.CADHoliday(), mapHols);</span>

<span class="fc" id="L285">		AddLH (new org.drip.analytics.holset.CAEHoliday(), mapHols);</span>

<span class="fc" id="L287">		AddLH (new org.drip.analytics.holset.CERHoliday(), mapHols);</span>

<span class="fc" id="L289">		AddLH (new org.drip.analytics.holset.CFFHoliday(), mapHols);</span>

<span class="fc" id="L291">		AddLH (new org.drip.analytics.holset.CHFHoliday(), mapHols);</span>

<span class="fc" id="L293">		AddLH (new org.drip.analytics.holset.CLFHoliday(), mapHols);</span>

<span class="fc" id="L295">		AddLH (new org.drip.analytics.holset.CLUHoliday(), mapHols);</span>

<span class="fc" id="L297">		AddLH (new org.drip.analytics.holset.CNYHoliday(), mapHols);</span>

<span class="fc" id="L299">		AddLH (new org.drip.analytics.holset.COFHoliday(), mapHols);</span>

<span class="fc" id="L301">		AddLH (new org.drip.analytics.holset.CONHoliday(), mapHols);</span>

<span class="fc" id="L303">		AddLH (new org.drip.analytics.holset.COPHoliday(), mapHols);</span>

<span class="fc" id="L305">		AddLH (new org.drip.analytics.holset.CRCHoliday(), mapHols);</span>

<span class="fc" id="L307">		AddLH (new org.drip.analytics.holset.CYPHoliday(), mapHols);</span>

<span class="fc" id="L309">		AddLH (new org.drip.analytics.holset.CZKHoliday(), mapHols);</span>

<span class="fc" id="L311">		AddLH (new org.drip.analytics.holset.DEMHoliday(), mapHols);</span>

<span class="fc" id="L313">		AddLH (new org.drip.analytics.holset.DKKHoliday(), mapHols);</span>

<span class="fc" id="L315">		AddLH (new org.drip.analytics.holset.DOPHoliday(), mapHols);</span>

<span class="fc" id="L317">		AddLH (new org.drip.analytics.holset.DTFHoliday(), mapHols);</span>

<span class="fc" id="L319">		AddLH (new org.drip.analytics.holset.ECSHoliday(), mapHols);</span>

<span class="fc" id="L321">		AddLH (new org.drip.analytics.holset.EEKHoliday(), mapHols);</span>

<span class="fc" id="L323">		AddLH (new org.drip.analytics.holset.EGPHoliday(), mapHols);</span>

<span class="fc" id="L325">		AddLH (new org.drip.analytics.holset.ESBHoliday(), mapHols);</span>

<span class="fc" id="L327">		AddLH (new org.drip.analytics.holset.ESPHoliday(), mapHols);</span>

<span class="fc" id="L329">		AddLH (new org.drip.analytics.holset.ESTHoliday(), mapHols);</span>

<span class="fc" id="L331">		AddLH (new org.drip.analytics.holset.EUBHoliday(), mapHols);</span>

<span class="fc" id="L333">		AddLH (new org.drip.analytics.holset.EURHoliday(), mapHols);</span>

<span class="fc" id="L335">		AddLH (new org.drip.analytics.holset.GBPHoliday(), mapHols);</span>

<span class="fc" id="L337">		AddLH (new org.drip.analytics.holset.GELHoliday(), mapHols);</span>

<span class="fc" id="L339">		AddLH (new org.drip.analytics.holset.GFRHoliday(), mapHols);</span>

<span class="fc" id="L341">		AddLH (new org.drip.analytics.holset.GRDHoliday(), mapHols);</span>

<span class="fc" id="L343">		AddLH (new org.drip.analytics.holset.HKDHoliday(), mapHols);</span>

<span class="fc" id="L345">		AddLH (new org.drip.analytics.holset.HRKHoliday(), mapHols);</span>

<span class="fc" id="L347">		AddLH (new org.drip.analytics.holset.HUFHoliday(), mapHols);</span>

<span class="fc" id="L349">		AddLH (new org.drip.analytics.holset.IBRHoliday(), mapHols);</span>

<span class="fc" id="L351">		AddLH (new org.drip.analytics.holset.IDRHoliday(), mapHols);</span>

<span class="fc" id="L353">		AddLH (new org.drip.analytics.holset.IEPHoliday(), mapHols);</span>

<span class="fc" id="L355">		AddLH (new org.drip.analytics.holset.IGPHoliday(), mapHols);</span>

<span class="fc" id="L357">		AddLH (new org.drip.analytics.holset.ILSHoliday(), mapHols);</span>

<span class="fc" id="L359">		AddLH (new org.drip.analytics.holset.INRHoliday(), mapHols);</span>

<span class="fc" id="L361">		AddLH (new org.drip.analytics.holset.IPCHoliday(), mapHols);</span>

<span class="fc" id="L363">		AddLH (new org.drip.analytics.holset.ITLHoliday(), mapHols);</span>

<span class="fc" id="L365">		AddLH (new org.drip.analytics.holset.JMDHoliday(), mapHols);</span>

<span class="fc" id="L367">		AddLH (new org.drip.analytics.holset.JPYHoliday(), mapHols);</span>

<span class="fc" id="L369">		AddLH (new org.drip.analytics.holset.KPWHoliday(), mapHols);</span>

<span class="fc" id="L371">		AddLH (new org.drip.analytics.holset.KRWHoliday(), mapHols);</span>

<span class="fc" id="L373">		AddLH (new org.drip.analytics.holset.KWDHoliday(), mapHols);</span>

<span class="fc" id="L375">		AddLH (new org.drip.analytics.holset.KYDHoliday(), mapHols);</span>

<span class="fc" id="L377">		AddLH (new org.drip.analytics.holset.KZTHoliday(), mapHols);</span>

<span class="fc" id="L379">		AddLH (new org.drip.analytics.holset.LKRHoliday(), mapHols);</span>

<span class="fc" id="L381">		AddLH (new org.drip.analytics.holset.LTLHoliday(), mapHols);</span>

<span class="fc" id="L383">		AddLH (new org.drip.analytics.holset.LUFHoliday(), mapHols);</span>

<span class="fc" id="L385">		AddLH (new org.drip.analytics.holset.LUXHoliday(), mapHols);</span>

<span class="fc" id="L387">		AddLH (new org.drip.analytics.holset.LVLHoliday(), mapHols);</span>

<span class="fc" id="L389">		AddLH (new org.drip.analytics.holset.MDLHoliday(), mapHols);</span>

<span class="fc" id="L391">		AddLH (new org.drip.analytics.holset.MIXHoliday(), mapHols);</span>

<span class="fc" id="L393">		AddLH (new org.drip.analytics.holset.MKDHoliday(), mapHols);</span>

<span class="fc" id="L395">		AddLH (new org.drip.analytics.holset.MXCHoliday(), mapHols);</span>

<span class="fc" id="L397">		AddLH (new org.drip.analytics.holset.MXNHoliday(), mapHols);</span>

<span class="fc" id="L399">		AddLH (new org.drip.analytics.holset.MXPHoliday(), mapHols);</span>

<span class="fc" id="L401">		AddLH (new org.drip.analytics.holset.MXVHoliday(), mapHols);</span>

<span class="fc" id="L403">		AddLH (new org.drip.analytics.holset.MYRHoliday(), mapHols);</span>

<span class="fc" id="L405">		AddLH (new org.drip.analytics.holset.NLGHoliday(), mapHols);</span>

<span class="fc" id="L407">		AddLH (new org.drip.analytics.holset.NOKHoliday(), mapHols);</span>

<span class="fc" id="L409">		AddLH (new org.drip.analytics.holset.NZDHoliday(), mapHols);</span>

<span class="fc" id="L411">		AddLH (new org.drip.analytics.holset.PABHoliday(), mapHols);</span>

<span class="fc" id="L413">		AddLH (new org.drip.analytics.holset.PEFHoliday(), mapHols);</span>

<span class="fc" id="L415">		AddLH (new org.drip.analytics.holset.PENHoliday(), mapHols);</span>

<span class="fc" id="L417">		AddLH (new org.drip.analytics.holset.PESHoliday(), mapHols);</span>

<span class="fc" id="L419">		AddLH (new org.drip.analytics.holset.PHPHoliday(), mapHols);</span>

<span class="fc" id="L421">		AddLH (new org.drip.analytics.holset.PLNHoliday(), mapHols);</span>

<span class="fc" id="L423">		AddLH (new org.drip.analytics.holset.PLZHoliday(), mapHols);</span>

<span class="fc" id="L425">		AddLH (new org.drip.analytics.holset.PTEHoliday(), mapHols);</span>

<span class="fc" id="L427">		AddLH (new org.drip.analytics.holset.QEFHoliday(), mapHols);</span>

<span class="fc" id="L429">		AddLH (new org.drip.analytics.holset.RUBHoliday(), mapHols);</span>

<span class="fc" id="L431">		AddLH (new org.drip.analytics.holset.RURHoliday(), mapHols);</span>

<span class="fc" id="L433">		AddLH (new org.drip.analytics.holset.SARHoliday(), mapHols);</span>

<span class="fc" id="L435">		AddLH (new org.drip.analytics.holset.SEKHoliday(), mapHols);</span>

<span class="fc" id="L437">		AddLH (new org.drip.analytics.holset.SGDHoliday(), mapHols);</span>

<span class="fc" id="L439">		AddLH (new org.drip.analytics.holset.SITHoliday(), mapHols);</span>

<span class="fc" id="L441">		AddLH (new org.drip.analytics.holset.SKKHoliday(), mapHols);</span>

<span class="fc" id="L443">		AddLH (new org.drip.analytics.holset.SVCHoliday(), mapHols);</span>

<span class="fc" id="L445">		AddLH (new org.drip.analytics.holset.TABHoliday(), mapHols);</span>

<span class="fc" id="L447">		AddLH (new org.drip.analytics.holset.TGTHoliday(), mapHols);</span>

<span class="fc" id="L449">		AddLH (new org.drip.analytics.holset.THBHoliday(), mapHols);</span>

<span class="fc" id="L451">		AddLH (new org.drip.analytics.holset.TRLHoliday(), mapHols);</span>

<span class="fc" id="L453">		AddLH (new org.drip.analytics.holset.TRYHoliday(), mapHols);</span>

<span class="fc" id="L455">		AddLH (new org.drip.analytics.holset.TWDHoliday(), mapHols);</span>

<span class="fc" id="L457">		AddLH (new org.drip.analytics.holset.UAHHoliday(), mapHols);</span>

<span class="fc" id="L459">		AddLH (new org.drip.analytics.holset.USDHoliday(), mapHols);</span>

<span class="fc" id="L461">		AddLH (new org.drip.analytics.holset.USVHoliday(), mapHols);</span>

<span class="fc" id="L463">		AddLH (new org.drip.analytics.holset.UVRHoliday(), mapHols);</span>

<span class="fc" id="L465">		AddLH (new org.drip.analytics.holset.UYUHoliday(), mapHols);</span>

<span class="fc" id="L467">		AddLH (new org.drip.analytics.holset.UYUHoliday(), mapHols);</span>

<span class="fc" id="L469">		AddLH (new org.drip.analytics.holset.VACHoliday(), mapHols);</span>

<span class="fc" id="L471">		AddLH (new org.drip.analytics.holset.VEBHoliday(), mapHols);</span>

<span class="fc" id="L473">		AddLH (new org.drip.analytics.holset.VEFHoliday(), mapHols);</span>

<span class="fc" id="L475">		AddLH (new org.drip.analytics.holset.VNDHoliday(), mapHols);</span>

<span class="fc" id="L477">		AddLH (new org.drip.analytics.holset.XDRHoliday(), mapHols);</span>

<span class="fc" id="L479">		AddLH (new org.drip.analytics.holset.XEUHoliday(), mapHols);</span>

<span class="fc" id="L481">		AddLH (new org.drip.analytics.holset.ZALHoliday(), mapHols);</span>

<span class="fc" id="L483">		AddLH (new org.drip.analytics.holset.ZARHoliday(), mapHols);</span>

<span class="fc" id="L485">		AddLH (new org.drip.analytics.holset.ZUSHoliday(), mapHols);</span>

<span class="fc" id="L487">		AddLH (new org.drip.analytics.holset.ZWDHoliday(), mapHols);</span>

<span class="fc" id="L489">		return mapHols;</span>
	}

	private static final boolean LocationHoliday (
		final java.lang.String strCalendarSet,
		final int iDate,
		final int iHolType)
	{
<span class="pc bpc" id="L497" title="3 of 6 branches missed.">		if (null == strCalendarSet || strCalendarSet.isEmpty() || 0 &gt;= iDate) return false;</span>

<span class="fc" id="L499">		java.lang.String[] astrCalendars = strCalendarSet.split (&quot;,&quot;);</span>

<span class="fc bfc" id="L501" title="All 2 branches covered.">		for (java.lang.String strCalendar : astrCalendars) {</span>
<span class="pc bpc" id="L502" title="1 of 4 branches missed.">			if (null != strCalendar &amp;&amp; null != s_mapLocHols.get (strCalendar)) {</span>
<span class="fc" id="L503">				org.drip.analytics.eventday.Locale lh = s_mapLocHols.get (strCalendar);</span>

<span class="pc bpc" id="L505" title="1 of 2 branches missed.">				if (null == lh) continue;</span>

<span class="pc bpc" id="L507" title="2 of 4 branches missed.">				if (0 != (WEEKEND_HOLS &amp; iHolType) &amp;&amp; null != lh.weekendDays() &amp;&amp; lh.weekendDays().isWeekend</span>
<span class="fc bfc" id="L508" title="All 2 branches covered.">					(iDate))</span>
<span class="fc" id="L509">					return true;</span>

<span class="pc bpc" id="L511" title="2 of 4 branches missed.">				if (null == lh.holidays() || 0 == (WEEKDAY_HOLS &amp; iHolType)) continue;</span>

<span class="fc bfc" id="L513" title="All 2 branches covered.">				for (org.drip.analytics.eventday.Base hol : lh.holidays()) {</span>
					try {
<span class="pc bpc" id="L515" title="1 of 4 branches missed.">						if (null != hol &amp;&amp; iDate == hol.dateInYear (org.drip.analytics.date.DateUtil.Year</span>
<span class="fc" id="L516">							(iDate), true))</span>
<span class="fc" id="L517">							return true;</span>
<span class="nc" id="L518">					} catch (java.lang.Exception e) {</span>
<span class="nc" id="L519">						e.printStackTrace();</span>
<span class="fc" id="L520">					}</span>
<span class="fc" id="L521">				}</span>
			}
		}

<span class="fc" id="L525">		return false;</span>
	}

	/**
	 * Initialize the day count basis object from the calendar set
	 * 
	 * @param strCalendarSetLoc The calendar set
	 * 
	 * @return Success (true) Failure (false)
	 */

	public static final boolean Init (
		final java.lang.String strCalendarSetLoc)
	{
<span class="fc bfc" id="L539" title="All 2 branches covered.">		if (null != s_mapLocHols) return true;</span>

<span class="pc bpc" id="L541" title="1 of 2 branches missed.">		if (!SetDCCalc()) return false;</span>

<span class="pc bpc" id="L543" title="1 of 2 branches missed.">		if (INIT_FROM_HOLS_SOURCE == s_iInitHols) {</span>
<span class="pc bpc" id="L544" title="1 of 2 branches missed.">			if (null == (s_mapLocHols = SetHolsFromSource())) return false;</span>

<span class="fc" id="L546">			return true;</span>
		}

		try {
<span class="nc bnc" id="L550" title="All 2 branches missed.">			if (INIT_FROM_HOLS_XML == s_iInitHols)</span>
<span class="nc" id="L551">				s_mapLocHols = org.drip.param.config.ConfigLoader.LoadHolidayCalendars (strCalendarSetLoc);</span>
<span class="nc bnc" id="L552" title="All 2 branches missed.">			else if (INIT_FROM_HOLS_DB == s_iInitHols)</span>
<span class="nc" id="L553">				s_mapLocHols = org.drip.param.config.ConfigLoader.LoadHolidayCalendarsFromDB</span>
<span class="nc" id="L554">					(strCalendarSetLoc);</span>

<span class="nc" id="L556">			return true;</span>
<span class="nc" id="L557">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L558">			e.printStackTrace();</span>
		}

<span class="nc bnc" id="L561" title="All 4 branches missed.">		if (null == s_mapLocHols &amp;&amp; null == (s_mapLocHols = SetHolsFromSource()))  return false;</span>

<span class="nc" id="L563">		return false;</span>
	}

	/**
	 * Retrieve the set of holiday locations
	 * 
	 * @return Set of holiday locations
	 */

	public static final java.util.Set&lt;java.lang.String&gt; HolidayLocations()
	{
<span class="nc" id="L574">		return s_mapLocHols.keySet();</span>
	}

	/**
	 * Get the week end days for the given holiday calendar set
	 * 
	 * @param strCalendarSet Holiday calendar set
	 * 
	 * @return Array of days indicating the week day union
	 */

	public static final int[] WeekendDays (
		final java.lang.String strCalendarSet)
	{
<span class="nc bnc" id="L588" title="All 4 branches missed.">		if (null == strCalendarSet || strCalendarSet.isEmpty()) return null;</span>

<span class="nc" id="L590">		java.lang.String[] astrCalendars = strCalendarSet.split (&quot;,&quot;);</span>

<span class="nc" id="L592">		java.util.Set&lt;java.lang.Integer&gt; si = new java.util.HashSet&lt;java.lang.Integer&gt;();</span>

<span class="nc bnc" id="L594" title="All 2 branches missed.">		for (java.lang.String strCalendar : astrCalendars) {</span>
<span class="nc bnc" id="L595" title="All 4 branches missed.">			if (null != strCalendar &amp;&amp; null != s_mapLocHols.get (strCalendar)) {</span>
<span class="nc" id="L596">				org.drip.analytics.eventday.Locale lh = s_mapLocHols.get (strCalendar);</span>

<span class="nc bnc" id="L598" title="All 6 branches missed.">				if (null == lh || null == lh.weekendDays() || null == lh.weekendDays().days()) continue;</span>

<span class="nc bnc" id="L600" title="All 2 branches missed.">				for (int i : lh.weekendDays().days())</span>
<span class="nc" id="L601">					si.add (i);</span>
			}
		}

<span class="nc" id="L605">		int j = 0;</span>

<span class="nc" id="L607">		int[] aiWkend = new int[si.size()];</span>

<span class="nc bnc" id="L609" title="All 2 branches missed.">		for (int iHol : si)</span>
<span class="nc" id="L610">			aiWkend[j++] = iHol;</span>

<span class="nc" id="L612">		return aiWkend;</span>
	}

	/**
	 * Get all available DRIP day count conventions
	 * 
	 * @return Available DRIP day count conventions
	 */

	public static final java.lang.String AvailableDC()
	{
<span class="fc" id="L623">		java.lang.StringBuffer sbDCSet = new java.lang.StringBuffer();</span>

<span class="fc bfc" id="L625" title="All 2 branches covered.">		for (java.lang.String strDC : s_mapDCCalc.keySet())</span>
<span class="fc" id="L626">			sbDCSet.append (strDC + &quot; | &quot;);</span>

<span class="fc" id="L628">		return sbDCSet.toString();</span>
	}

	/**
	 * Calculate the Accrual Fraction in Years between 2 given Dates for the given Day Count Convention and
	 * 	the other Parameters
	 * 
	 * @param iStartDate Start Date
	 * @param iEndDate End Date
	 * @param strDayCount Day Count Convention
	 * @param bApplyEOMAdj Apply End-of-Month Adjustment (TRUE)
	 * @param actactParams ActActParams
	 * @param strCalendar Holiday Calendar
	 * 
	 * @return Accrual Fraction in Years
	 * 
	 * @throws java.lang.Exception Thrown if the Accrual Fraction cannot be calculated
	 */

	public static final double YearFraction (
		final int iStartDate,
		final int iEndDate,
		final java.lang.String strDayCount,
		final boolean bApplyEOMAdj,
		final ActActDCParams actactParams,
		final java.lang.String strCalendar)
		throws java.lang.Exception
	{
<span class="pc bpc" id="L656" title="2 of 4 branches missed.">		if (&quot;BUS252&quot;.equalsIgnoreCase (strDayCount) || &quot;BUS DAYS252&quot;.equalsIgnoreCase (strDayCount) ||</span>
<span class="fc bfc" id="L657" title="All 2 branches covered.">			&quot;BUS/252&quot;.equalsIgnoreCase (strDayCount))</span>
<span class="fc" id="L658">			return BusinessDays (iStartDate, iEndDate, strCalendar) / 252.;</span>

<span class="fc" id="L660">		org.drip.analytics.daycount.DCFCalculator dcfCalc = s_mapDCCalc.get (strDayCount);</span>

<span class="pc bpc" id="L662" title="1 of 2 branches missed.">		if (null != dcfCalc)</span>
<span class="fc" id="L663">			return dcfCalc.yearFraction (iStartDate, iEndDate, bApplyEOMAdj, actactParams, strCalendar);</span>

<span class="nc" id="L665">		System.out.println (&quot;Convention::YearFraction =&gt; Unknown DC: &quot; + strDayCount +</span>
			&quot;; defaulting to Actual/365.25&quot;);

<span class="nc" id="L668">		return 1. * (iEndDate - iStartDate) / 365.25;</span>
	}

	/**
	 * Calculate the Days Accrued between 2 given Dates for the given Day Count Convention and the other
	 *  Parameters
	 * 
	 * @param iStartDate Start Date
	 * @param iEndDate End Date
	 * @param strDayCount Day Count Convention
	 * @param bApplyEOMAdj Apply End-of-Month Adjustment (TRUE)
	 * @param actactParams ActActParams
	 * @param strCalendar Holiday Calendar
	 * 
	 * @return Number of Days Accrued
	 * 
	 * @throws java.lang.Exception Thrown if the Accrual Days cannot be calculated
	 */

	public static final int DaysAccrued (
		final int iStartDate,
		final int iEndDate,
		final java.lang.String strDayCount,
		final boolean bApplyEOMAdj,
		final ActActDCParams actactParams,
		final java.lang.String strCalendar)
		throws java.lang.Exception
	{
<span class="pc bpc" id="L696" title="2 of 4 branches missed.">		if (&quot;BUS252&quot;.equalsIgnoreCase (strDayCount) || &quot;BUS DAYS252&quot;.equalsIgnoreCase (strDayCount) ||</span>
<span class="pc bpc" id="L697" title="1 of 2 branches missed.">			&quot;BUS/252&quot;.equalsIgnoreCase (strDayCount))</span>
<span class="nc" id="L698">			return BusinessDays (iStartDate, iEndDate, strCalendar);</span>

<span class="fc" id="L700">		org.drip.analytics.daycount.DCFCalculator dcfCalc = s_mapDCCalc.get (strDayCount);</span>

<span class="pc bpc" id="L702" title="1 of 2 branches missed.">		if (null != dcfCalc)</span>
<span class="fc" id="L703">			return dcfCalc.daysAccrued (iStartDate, iEndDate, bApplyEOMAdj, actactParams, strCalendar);</span>

<span class="nc" id="L705">		return iEndDate - iStartDate;</span>
	}

	/**
	 * Roll the given Date in accordance with the Roll Mode and the Calendar Set
	 * 
	 * @param iDate Date to be Rolled
	 * @param iRollMode Roll Mode (one of DR_ACT, DR_FOLL, DR_MOD_FOLL, DR_PREV, or DR_MOD_PREV)
	 * @param strCalendarSet Calendar Set to calculate the Holidays by
	 * @param iNumDaysToRoll The Number of Days to Roll
	 * 
	 * @return The Rolled Date
	 * 
	 * @throws java.lang.Exception Thrown if the date cannot be rolled
	 */

	public static final int RollDate (
		final int iDate,
		final int iRollMode,
		final java.lang.String strCalendarSet,
		int iNumDaysToRoll)
		throws java.lang.Exception
	{
<span class="pc bpc" id="L728" title="1 of 2 branches missed.">		if (0 &gt; iNumDaysToRoll) throw new java.lang.Exception (&quot;Convention::RollDate =&gt; Invalid Inputs&quot;);</span>

<span class="pc bpc" id="L730" title="2 of 6 branches missed.">		if (null == strCalendarSet || strCalendarSet.isEmpty() || DATE_ROLL_ACTUAL == iRollMode)</span>
<span class="fc" id="L731">			return iDate + iNumDaysToRoll;</span>

<span class="fc" id="L733">		int iRolledDate = iDate;</span>

<span class="fc bfc" id="L735" title="All 2 branches covered.">		if (0 == iNumDaysToRoll) {</span>
<span class="pc bpc" id="L736" title="2 of 6 branches missed.">			if (DATE_ROLL_FOLLOWING == iRollMode || DATE_ROLL_MODIFIED_FOLLOWING == iRollMode ||</span>
				DATE_ROLL_MODIFIED_FOLLOWING_BIMONTHLY == iRollMode) {
<span class="fc bfc" id="L738" title="All 2 branches covered.">				while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="fc" id="L739">					++iRolledDate;</span>
<span class="pc bpc" id="L740" title="3 of 4 branches missed.">			} else if (DATE_ROLL_PREVIOUS == iRollMode || DATE_ROLL_MODIFIED_PREVIOUS == iRollMode) {</span>
<span class="fc bfc" id="L741" title="All 2 branches covered.">				while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="fc" id="L742">					--iRolledDate;</span>
			}
		} else {
<span class="fc bfc" id="L745" title="All 2 branches covered.">			while (0 != iNumDaysToRoll) {</span>
<span class="fc bfc" id="L746" title="All 6 branches covered.">				if (DATE_ROLL_FOLLOWING == iRollMode || DATE_ROLL_MODIFIED_FOLLOWING == iRollMode ||</span>
					DATE_ROLL_MODIFIED_FOLLOWING_BIMONTHLY == iRollMode) {
<span class="fc bfc" id="L748" title="All 2 branches covered.">					while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="fc" id="L749">						++iRolledDate;</span>
<span class="pc bpc" id="L750" title="1 of 4 branches missed.">				} else if (DATE_ROLL_PREVIOUS == iRollMode || DATE_ROLL_MODIFIED_PREVIOUS == iRollMode) {</span>
<span class="fc bfc" id="L751" title="All 2 branches covered.">					while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="fc" id="L752">						--iRolledDate;</span>
				}

<span class="fc" id="L755">				--iNumDaysToRoll;</span>
			}
		}

<span class="fc bfc" id="L759" title="All 2 branches covered.">		if (DATE_ROLL_MODIFIED_FOLLOWING == iRollMode) {</span>
<span class="fc" id="L760">			if (org.drip.analytics.date.DateUtil.Month (iDate) != org.drip.analytics.date.DateUtil.Month</span>
<span class="pc bpc" id="L761" title="1 of 2 branches missed.">				(iRolledDate)) {</span>
<span class="nc bnc" id="L762" title="All 2 branches missed.">				while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="nc" id="L763">					--iRolledDate;</span>
			}
		}

<span class="fc bfc" id="L767" title="All 2 branches covered.">		if (DATE_ROLL_MODIFIED_FOLLOWING_BIMONTHLY == iRollMode) {</span>
<span class="fc" id="L768">			int iOriginalDay = org.drip.analytics.date.DateUtil.Date (iDate);</span>

<span class="fc" id="L770">			int iRolledDay = org.drip.analytics.date.DateUtil.Date (iRolledDate);</span>

<span class="pc bpc" id="L772" title="5 of 8 branches missed.">			if ((15 &lt; iOriginalDay &amp;&amp; 15 &gt; iRolledDay) || (15 &gt; iOriginalDay &amp;&amp; 15 &lt; iRolledDay)) {</span>
<span class="nc bnc" id="L773" title="All 2 branches missed.">				while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="nc" id="L774">					--iRolledDate;</span>
			}
		}

<span class="fc bfc" id="L778" title="All 2 branches covered.">		if (DATE_ROLL_MODIFIED_PREVIOUS == iRollMode) {</span>
<span class="fc" id="L779">			if (org.drip.analytics.date.DateUtil.Month (iDate) != org.drip.analytics.date.DateUtil.Month</span>
<span class="pc bpc" id="L780" title="1 of 2 branches missed.">				(iRolledDate)) {</span>
<span class="nc bnc" id="L781" title="All 2 branches missed.">				while (IsHoliday (iRolledDate, strCalendarSet))</span>
<span class="nc" id="L782">					++iRolledDate;</span>
			}
		}

<span class="fc" id="L786">		return iRolledDate;</span>
	}

	/**
	 * Indicate whether the given Date is a Holiday in the specified Location(s)
	 * 
	 * @param iDate Date
	 * @param strCalendar Location Calendar Set
	 * @param iHolType WEEKDAY_HOLS or WEEKEND_HOLS
	 * 
	 * @return TRUE - it is a Holiday
	 */

	public static final boolean IsHoliday (
		final int iDate,
		final java.lang.String strCalendar,
		final int iHolType)
	{
<span class="fc bfc" id="L804" title="All 4 branches covered.">		return LocationHoliday ((null == strCalendar || strCalendar.isEmpty() || &quot;&quot;.equalsIgnoreCase</span>
<span class="pc bpc" id="L805" title="1 of 2 branches missed.">			(strCalendar)) ? &quot;USD&quot; : strCalendar, iDate, iHolType);</span>
	}

	/**
	 * Indicates whether the given Date is a Holiday in the specified Location(s)
	 * 
	 * @param iDate Date
	 * @param strCalendar Location Calendar Set
	 * 
	 * @return TRUE - it is a Holiday
	 */

	public static final boolean IsHoliday (
		final int iDate,
		final java.lang.String strCalendar)
	{
<span class="fc" id="L821">		return IsHoliday (iDate, strCalendar, WEEKDAY_HOLS | WEEKEND_HOLS);</span>
	}

	/**
	 * Calculate the Number of Business Days between the Start and the End Dates
	 * 
	 * @param iStartDate Start Date
	 * @param iEndDate End Date
	 * @param strCalendar Holiday Calendar Set
	 * 
	 * @return The Number of Business Days
	 * 
	 * @throws java.lang.Exception Thrown if it cannot be evaluated
	 */

	public static final int BusinessDays (
		final int iStartDate,
		final int iEndDate,
		final java.lang.String strCalendar)
		throws java.lang.Exception
	{
<span class="pc bpc" id="L842" title="1 of 2 branches missed.">		if (iStartDate &gt; iEndDate)</span>
<span class="nc" id="L843">			throw new java.lang.Exception (&quot;Convention::BusinessDays =&gt; Invalid Inputs&quot;);</span>

<span class="fc bfc" id="L845" title="All 2 branches covered.">		if (iStartDate == iEndDate) return 0;</span>

<span class="fc" id="L847">		int iNumBusDays = 0;</span>
<span class="fc" id="L848">		int iDate = iStartDate + 1;</span>

<span class="fc bfc" id="L850" title="All 2 branches covered.">		while (iDate &lt;= iEndDate) {</span>
<span class="fc bfc" id="L851" title="All 2 branches covered.">			if (!IsHoliday (iDate, strCalendar)) ++iNumBusDays;</span>

<span class="fc" id="L853">			++iDate;</span>
		}

<span class="fc" id="L856">		return iNumBusDays;</span>
	}

	/**
	 * Calculate the Set of Holidays between the Start and the End Dates
	 * 
	 * @param iStartDate Start Date
	 * @param iEndDate End Date
	 * @param strCalendar Holiday Calendar Set
	 * 
	 * @return The Set of Holidays
	 */

	public static final java.util.List&lt;java.lang.Integer&gt; HolidaySet (
		final int iStartDate,
		final int iEndDate,
		final java.lang.String strCalendar)
	{
<span class="fc" id="L874">		java.util.List&lt;java.lang.Integer&gt; lsHolidays = new java.util.ArrayList&lt;java.lang.Integer&gt;();</span>

<span class="fc" id="L876">		int iLastDate = iEndDate;</span>
<span class="fc" id="L877">		int iFirstDate = iStartDate;</span>

<span class="pc bpc" id="L879" title="1 of 2 branches missed.">		if (iFirstDate &gt; iLastDate) {</span>
<span class="nc" id="L880">			iLastDate = iStartDate;</span>
<span class="nc" id="L881">			iFirstDate = iEndDate;</span>
		}

<span class="fc bfc" id="L884" title="All 2 branches covered.">		while (iFirstDate != iLastDate) {</span>
			try {
<span class="fc bfc" id="L886" title="All 2 branches covered.">				if (IsHoliday (iFirstDate, strCalendar)) lsHolidays.add (iFirstDate);</span>

<span class="fc" id="L888">				++iFirstDate;</span>
<span class="nc" id="L889">			} catch (java.lang.Exception e) {</span>
<span class="nc" id="L890">				e.printStackTrace();</span>
<span class="pc" id="L891">			}</span>
		}

<span class="fc" id="L894">		return lsHolidays;</span>
	}

	/**
	 * Calculate the Number of Holidays between the Start and the End Dates
	 * 
	 * @param iStartDate Start Date
	 * @param iEndDate End Date
	 * @param strCalendar Holiday Calendar Set
	 * 
	 * @return The Number of Holidays
	 */

	public static final int Holidays (
		final int iStartDate,
		final int iEndDate,
		final java.lang.String strCalendar)
	{
<span class="nc" id="L912">		int iNumHolidays = 0;</span>
<span class="nc" id="L913">		int iLastDate = iEndDate;</span>
<span class="nc" id="L914">		int iFirstDate = iStartDate;</span>

<span class="nc bnc" id="L916" title="All 2 branches missed.">		if (iFirstDate &gt; iLastDate) {</span>
<span class="nc" id="L917">			iLastDate = iStartDate;</span>
<span class="nc" id="L918">			iFirstDate = iEndDate;</span>
		}

<span class="nc bnc" id="L921" title="All 2 branches missed.">		while (iFirstDate != iLastDate) {</span>
<span class="nc bnc" id="L922" title="All 2 branches missed.">			if (IsHoliday (iFirstDate++, strCalendar)) ++iNumHolidays;</span>
		}

<span class="nc bnc" id="L925" title="All 2 branches missed.">		return iStartDate &gt; iEndDate ? -1 * iNumHolidays : iNumHolidays;</span>
	}

	/**
	 * Adjust the given Date in Accordance with the Adjustment Mode and the Calendar Set
	 * 
	 * @param iDate Date to be Adjusted
	 * @param strCalendar Calendar Set to calculate the Holidays by
	 * @param iAdjustMode Adjustment Mode (one of DR_ACT, DR_FOLL, DR_MOD_FOLL, DR_PREV, or DR_MOD_PREV
	 * 
	 * @return The Adjusted Date
	 */

	public static final int Adjust (
		final int iDate,
		final java.lang.String strCalendar,
		final int iAdjustMode)
	{
<span class="fc" id="L943">		int iDateAdjusted = iDate;</span>

<span class="fc bfc" id="L945" title="All 2 branches covered.">		while (IsHoliday (iDateAdjusted, strCalendar)) ++iDateAdjusted;</span>

<span class="fc" id="L947">		return iDateAdjusted;</span>
	}

	/**
	 * Add the specified Number of Business Days and Adjust According to the Calendar Set
	 * 
	 * @param iDate Date to be Adjusted
	 * @param iNumDays Number of Days to Add
	 * @param strCalendar Calendar Set to calculate the Holidays by
	 * 
	 * @return The Adjusted Date
	 */

	public static final int AddBusinessDays (
		final int iDate,
        final int iNumDays,
        final java.lang.String strCalendar)
    {
<span class="fc" id="L965">		int iAdjustedDate = iDate;</span>
<span class="fc" id="L966">		int iNumDaysIncremented = 0;</span>

<span class="fc bfc" id="L968" title="All 2 branches covered.">		while (iNumDaysIncremented &lt; iNumDays) {</span>
<span class="fc" id="L969">			iAdjustedDate = Adjust (iAdjustedDate + 1, strCalendar, DATE_ROLL_FOLLOWING);</span>

<span class="fc" id="L971">			iNumDaysIncremented += 1;</span>
		}

<span class="fc" id="L974">		return iAdjustedDate;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>