<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IBORCurve.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.sample.forward</a> &gt; <span class="el_source">IBORCurve.java</span></div><h1>IBORCurve.java</h1><pre class="source lang-java linenums">
package org.drip.sample.forward;

import java.util.List;

import org.drip.analytics.date.JulianDate;
import org.drip.analytics.support.*;
import org.drip.market.otc.*;
import org.drip.numerical.common.FormatUtil;
import org.drip.param.creator.*;
import org.drip.param.market.CurveSurfaceQuoteContainer;
import org.drip.param.period.*;
import org.drip.param.valuation.*;
import org.drip.product.creator.SingleStreamComponentBuilder;
import org.drip.product.fra.FRAStandardComponent;
import org.drip.product.fx.ComponentPair;
import org.drip.product.rates.*;
import org.drip.spline.params.*;
import org.drip.spline.stretch.*;
import org.drip.state.creator.ScenarioForwardCurveBuilder;
import org.drip.state.discount.*;
import org.drip.state.estimator.LatentStateStretchBuilder;
import org.drip.state.forward.ForwardCurve;
import org.drip.state.identifier.ForwardLabel;
import org.drip.state.inference.*;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2019 Lakshmi Krishnamurthy
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * Copyright (C) 2017 Lakshmi Krishnamurthy
 * Copyright (C) 2016 Lakshmi Krishnamurthy
 * Copyright (C) 2015 Lakshmi Krishnamurthy
 * Copyright (C) 2014 Lakshmi Krishnamurthy
 * 
 *  This file is part of DROP, an open-source library targeting risk, transaction costs, exposure, margin
 *  	calculations, valuation adjustment, and portfolio construction within and across fixed income,
 *  	credit, commodity, equity, FX, and structured products.
 *  
 *  	https://lakshmidrip.github.io/DROP/
 *  
 *  DROP is composed of three modules:
 *  
 *  - DROP Analytics Core - https://lakshmidrip.github.io/DROP-Analytics-Core/
 *  - DROP Portfolio Core - https://lakshmidrip.github.io/DROP-Portfolio-Core/
 *  - DROP Numerical Core - https://lakshmidrip.github.io/DROP-Numerical-Core/
 * 
 * 	DROP Analytics Core implements libraries for the following:
 * 	- Fixed Income Analytics
 * 	- Asset Backed Analytics
 * 	- XVA Analytics
 * 	- Exposure and Margin Analytics
 * 
 * 	DROP Portfolio Core implements libraries for the following:
 * 	- Asset Allocation Analytics
 * 	- Transaction Cost Analytics
 * 
 * 	DROP Numerical Core implements libraries for the following:
 * 	- Statistical Learning
 * 	- Numerical Optimizer
 * 	- Spline Builder
 * 	- Algorithm Support
 * 
 * 	Documentation for DROP is Spread Over:
 * 
 * 	- Main                     =&gt; https://lakshmidrip.github.io/DROP/
 * 	- Wiki                     =&gt; https://github.com/lakshmiDRIP/DROP/wiki
 * 	- GitHub                   =&gt; https://github.com/lakshmiDRIP/DROP
 * 	- Repo Layout Taxonomy     =&gt; https://github.com/lakshmiDRIP/DROP/blob/master/Taxonomy.md
 * 	- Javadoc                  =&gt; https://lakshmidrip.github.io/DROP/Javadoc/index.html
 * 	- Technical Specifications =&gt; https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal
 * 	- Release Versions         =&gt; https://lakshmidrip.github.io/DROP/version.html
 * 	- Community Credits        =&gt; https://lakshmidrip.github.io/DROP/credits.html
 * 	- Issues Catalog           =&gt; https://github.com/lakshmiDRIP/DROP/issues
 * 	- JUnit                    =&gt; https://lakshmidrip.github.io/DROP/junit/index.html
 * 	- Jacoco                   =&gt; https://lakshmidrip.github.io/DROP/jacoco/index.html
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;IBORCurve&lt;/i&gt; illustrates the Construction and Usage of the IBOR Forward Curve.
 *  
 * &lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Module &lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/AnalyticsCore.md&quot;&gt;Analytics Core Module&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Library&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/FixedIncomeAnalyticsLibrary.md&quot;&gt;Fixed Income Analytics Library&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/sample/README.md&quot;&gt;Sample&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/sample/forward/README.md&quot;&gt;Forward Rate Curve Construction&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 * &lt;br&gt;&lt;br&gt;
 * 
 * @author Lakshmi Krishnamurthy
 */

<span class="nc" id="L110">public class IBORCurve {</span>

	private static final FloatFloatComponent OTCFloatFloat (
		final JulianDate dtSpot,
		final String strCurrency,
		final String strDerivedTenor,
		final String strMaturityTenor,
		final double dblBasis)
	{
<span class="fc" id="L119">		FloatFloatSwapConvention ffConv = IBORFloatFloatContainer.ConventionFromJurisdiction (strCurrency);</span>

<span class="fc" id="L121">		return ffConv.createFloatFloatComponent (</span>
			dtSpot,
			strDerivedTenor,
			strMaturityTenor,
			dblBasis,
			1.
		);
	}

	private static final FixFloatComponent OTCIRS (
		final JulianDate dtSpot,
		final String strCurrency,
		final String strLocation,
		final String strMaturityTenor,
		final String strIndex,
		final double dblCoupon)
	{
<span class="fc" id="L138">		FixedFloatSwapConvention ffConv = IBORFixedFloatContainer.ConventionFromJurisdiction (</span>
			strCurrency,
			strLocation,
			strMaturityTenor,
			strIndex
		);

<span class="fc" id="L145">		return ffConv.createFixFloatComponent (</span>
			dtSpot,
			strMaturityTenor,
			dblCoupon,
			0.,
			1.
		);
	}

	private static final ComponentPair OTCComponentPair (
		final JulianDate dtSpot,
		final String strCurrency,
		final String strDerivedTenor,
		final String strMaturityTenor,
		final double dblReferenceFixedCoupon,
		final double dblDerivedFixedCoupon,
		final double dblBasis)
	{
<span class="nc" id="L163">		FloatFloatSwapConvention ffConv = IBORFloatFloatContainer.ConventionFromJurisdiction (strCurrency);</span>

<span class="nc" id="L165">		return ffConv.createFixFloatComponentPair (</span>
			dtSpot,
			strDerivedTenor,
			strMaturityTenor,
			dblReferenceFixedCoupon,
			dblDerivedFixedCoupon,
			dblBasis,
			1.
		);
	}

	/*
	 * Construct the Array of Deposit Instruments from the given set of parameters
	 * 
	 *  	USE WITH CARE: This sample ignores errors and does not handle exceptions.
	 */

	private static final SingleStreamComponent[] DepositFromMaturityDays (
		final JulianDate dtEffective,
		final String[] astrMaturityTenor,
		final ForwardLabel fri)
		throws Exception
	{
<span class="pc bpc" id="L188" title="2 of 4 branches missed.">		if (null == astrMaturityTenor || 0 == astrMaturityTenor.length) return null;</span>

<span class="fc" id="L190">		SingleStreamComponent[] aDeposit = new SingleStreamComponent[astrMaturityTenor.length];</span>

<span class="fc bfc" id="L192" title="All 2 branches covered.">		for (int i = 0; i &lt; astrMaturityTenor.length; ++i)</span>
<span class="fc" id="L193">			aDeposit[i] = SingleStreamComponentBuilder.Deposit (</span>
				dtEffective,
<span class="fc" id="L195">				dtEffective.addTenor (astrMaturityTenor[i]),</span>
				fri
			);

<span class="fc" id="L199">		return aDeposit;</span>
	}

	/*
	 * Construct the Array of FRA from the given set of parameters
	 * 
	 *  	USE WITH CARE: This sample ignores errors and does not handle exceptions.
	 */

	private static final FRAStandardComponent[] FRAFromMaturityDays (
		final JulianDate dtEffective,
		final ForwardLabel fri,
		final String[] astrMaturityTenor,
		final double[] adblFRAStrike)
		throws Exception
	{
<span class="pc bpc" id="L215" title="2 of 6 branches missed.">		if (null == astrMaturityTenor || null == adblFRAStrike || 0 == astrMaturityTenor.length) return null;</span>

<span class="fc" id="L217">		FRAStandardComponent[] aFRA = new FRAStandardComponent[astrMaturityTenor.length];</span>

<span class="fc bfc" id="L219" title="All 2 branches covered.">		for (int i = 0; i &lt; astrMaturityTenor.length; ++i)</span>
<span class="fc" id="L220">			aFRA[i] = SingleStreamComponentBuilder.FRAStandard (</span>
<span class="fc" id="L221">				dtEffective.addTenor (astrMaturityTenor[i]),</span>
				fri,
				adblFRAStrike[i]
			);

<span class="fc" id="L226">		return aFRA;</span>
	}

	private static final FixFloatComponent[] FixFloatSwap2 (
		final JulianDate dtEffective,
		final ForwardLabel fri,
		final String[] astrMaturityTenor)
		throws Exception
	{
<span class="pc bpc" id="L235" title="1 of 4 branches missed.">		if (null == astrMaturityTenor || 0 == astrMaturityTenor.length) return null;</span>

<span class="fc" id="L237">		FixFloatComponent[] aFixFloat = new FixFloatComponent[astrMaturityTenor.length];</span>

<span class="fc bfc" id="L239" title="All 2 branches covered.">		for (int i = 0; i &lt; astrMaturityTenor.length; ++i)</span>
<span class="fc" id="L240">			aFixFloat[i] = OTCIRS (</span>
				dtEffective,
<span class="fc" id="L242">				fri.currency(),</span>
				&quot;ALL&quot;,
				astrMaturityTenor[i],
				&quot;MAIN&quot;,
				0.
			);

<span class="fc" id="L249">		return aFixFloat;</span>
	}

	private static final FixFloatComponent[] FixFloatSwap (
		final JulianDate dtValue,
		final ForwardLabel fri,
		final String[] astrMaturityTenor)
		throws Exception
	{
<span class="nc bnc" id="L258" title="All 4 branches missed.">		if (null == astrMaturityTenor || 0 == astrMaturityTenor.length) return null;</span>

<span class="nc" id="L260">		JulianDate dtEffective = dtValue.addDays (2);</span>

<span class="nc" id="L262">		String strCurrency = fri.currency();</span>

<span class="nc" id="L264">		FixFloatComponent[] aFFC = new FixFloatComponent[astrMaturityTenor.length];</span>

<span class="nc" id="L266">		int iTenorInMonths = Integer.parseInt (fri.tenor().split (&quot;M&quot;)[0]);</span>

<span class="nc" id="L268">		UnitCouponAccrualSetting ucasFixed = new UnitCouponAccrualSetting (</span>
			1,
			&quot;Act/360&quot;,
			false,
			&quot;Act/360&quot;,
			false,
			strCurrency,
			true,
			CompositePeriodBuilder.ACCRUAL_COMPOUNDING_RULE_GEOMETRIC
		);

<span class="nc" id="L279">		ComposableFloatingUnitSetting cfusFloating = new ComposableFloatingUnitSetting (</span>
<span class="nc" id="L280">			fri.tenor(),</span>
			CompositePeriodBuilder.EDGE_DATE_SEQUENCE_REGULAR,
			null,
			fri,
			CompositePeriodBuilder.REFERENCE_PERIOD_IN_ADVANCE,
			0.
		);

<span class="nc" id="L288">		CompositePeriodSetting cpsFloating = new CompositePeriodSetting (</span>
			12 / iTenorInMonths,
<span class="nc" id="L290">			fri.tenor(),</span>
			strCurrency,
			null,
			-1.,
			null,
			null,
			null,
			null
		);

<span class="nc" id="L300">		CashSettleParams csp = new CashSettleParams (</span>
			0,
			strCurrency,
			0
		);

<span class="nc bnc" id="L306" title="All 2 branches missed.">		for (int i = 0; i &lt; astrMaturityTenor.length; ++i) {</span>
<span class="nc" id="L307">			int iTenorCompare = Helper.TenorCompare (</span>
				astrMaturityTenor[i],
				&quot;6M&quot;
			);

<span class="nc bnc" id="L312" title="All 2 branches missed.">			String strFixedTenor = Helper.LEFT_TENOR_LESSER == iTenorCompare ? astrMaturityTenor[i] : &quot;6M&quot;;</span>

<span class="nc" id="L314">			ComposableFixedUnitSetting cfusFixed = new ComposableFixedUnitSetting (</span>
				strFixedTenor,
				CompositePeriodBuilder.EDGE_DATE_SEQUENCE_REGULAR,
				null,
				0.,
				0.,
				strCurrency
			);

<span class="nc" id="L323">			CompositePeriodSetting cpsFixed = new CompositePeriodSetting (</span>
				1,
				strFixedTenor,
				strCurrency,
				null,
				1.,
				null,
				null,
				null,
				null
			);

<span class="nc" id="L335">			List&lt;Integer&gt; lsFixedStreamEdgeDate = CompositePeriodBuilder.BackwardEdgeDates (</span>
				dtEffective,
<span class="nc" id="L337">				dtEffective.addTenor (astrMaturityTenor[i]),</span>
				&quot;1Y&quot;,
				null,
				CompositePeriodBuilder.SHORT_STUB
			);

<span class="nc" id="L343">			List&lt;Integer&gt; lsFloatingStreamEdgeDate = CompositePeriodBuilder.RegularEdgeDates (</span>
				dtEffective,
<span class="nc" id="L345">				fri.tenor(),</span>
				astrMaturityTenor[i],
				null
			);

<span class="nc" id="L350">			Stream floatingStream = new Stream (</span>
<span class="nc" id="L351">				CompositePeriodBuilder.FloatingCompositeUnit (</span>
					lsFloatingStreamEdgeDate,
					cpsFloating,
					cfusFloating
				)
			);

<span class="nc" id="L358">			Stream fixedStream = new Stream (</span>
<span class="nc" id="L359">				CompositePeriodBuilder.FixedCompositeUnit (</span>
					lsFixedStreamEdgeDate,
					cpsFixed,
					ucasFixed,
					cfusFixed
				)
			);

<span class="nc" id="L367">			aFFC[i] = new FixFloatComponent (</span>
				fixedStream,
				floatingStream,
				csp
			);

<span class="nc" id="L373">			aFFC[i].setPrimaryCode (&quot;FixFloat:&quot; + astrMaturityTenor[i]);</span>
		}

<span class="nc" id="L376">		return aFFC;</span>
	}

	/*
	 * Construct an array of float-float swaps from the corresponding reference (6M) and the derived legs.
	 * 
	 *  	USE WITH CARE: This sample ignores errors and does not handle exceptions.
	 */

	private static final FloatFloatComponent[] FloatFloatSwap (
		final JulianDate dtSpot,
		final ForwardLabel fri,
		final String[] astrMaturityTenor)
		throws Exception
	{
<span class="pc bpc" id="L391" title="1 of 4 branches missed.">		if (null == astrMaturityTenor || 0 == astrMaturityTenor.length) return null;</span>

<span class="fc" id="L393">		FloatFloatComponent[] aFFC = new FloatFloatComponent[astrMaturityTenor.length];</span>

<span class="fc" id="L395">		int iTenorInMonths = Integer.parseInt (fri.tenor().split (&quot;M&quot;)[0]);</span>

<span class="fc" id="L397">		String strCurrency = fri.currency();</span>

<span class="fc bfc" id="L399" title="All 2 branches covered.">		for (int i = 0; i &lt; astrMaturityTenor.length; ++i)</span>
<span class="fc" id="L400">			aFFC[i] = OTCFloatFloat (</span>
				dtSpot,
				strCurrency,
				iTenorInMonths + &quot;M&quot;,
				astrMaturityTenor[i],
				0.
			);

<span class="fc" id="L408">		return aFFC;</span>
	}

	/*
	 * Construct an array of fix-float component pairs from the corresponding reference (6M) and the derived legs.
	 * 
	 *  	USE WITH CARE: This sample ignores errors and does not handle exceptions.
	 */

	private static final ComponentPair[] FixFloatComponentPair (
		final JulianDate dtSpot,
		final CurveSurfaceQuoteContainer csqs,
		final ForwardLabel friDerived,
		final String[] astrMaturityTenor)
		throws Exception
	{
<span class="nc bnc" id="L424" title="All 4 branches missed.">		if (null == astrMaturityTenor || 0 == astrMaturityTenor.length) return null;</span>

<span class="nc" id="L426">		ComponentPair[] aFFCP = new ComponentPair[astrMaturityTenor.length];</span>

<span class="nc" id="L428">		ValuationParams valParams = new ValuationParams (</span>
			dtSpot,
			dtSpot,
<span class="nc" id="L431">			friDerived.currency()</span>
		);

<span class="nc bnc" id="L434" title="All 2 branches missed.">		for (int i = 0; i &lt; astrMaturityTenor.length; ++i) {</span>
<span class="nc" id="L435">			ComponentPair cp = OTCComponentPair (</span>
				dtSpot,
<span class="nc" id="L437">				friDerived.currency(),</span>
<span class="nc" id="L438">				friDerived.tenor(),</span>
				astrMaturityTenor[i],
				0.,
				0.,
				0.
			);

<span class="nc" id="L445">			double dblReferenceFixedCoupon = cp.referenceComponent().measureValue (</span>
				valParams,
				null,
				csqs,
				null,
				&quot;FairPremium&quot;
			);

<span class="nc" id="L453">			double dblDerivedFixedCoupon = cp.derivedComponent().measureValue (</span>
				valParams,
				null,
				csqs,
				null,
				&quot;FairPremium&quot;
			);

<span class="nc" id="L461">			aFFCP[i] = OTCComponentPair (</span>
				dtSpot,
<span class="nc" id="L463">				friDerived.currency(),</span>
<span class="nc" id="L464">				friDerived.tenor(),</span>
				astrMaturityTenor[i],
				dblReferenceFixedCoupon,
				dblDerivedFixedCoupon,
				0.
			);
		}

<span class="nc" id="L472">		return aFFCP;</span>
	}

	public static final ForwardCurve CustomIBORBuilderSample (
		final MergedDiscountForwardCurve dc,
		final ForwardCurve fcReference,
		final ForwardLabel fri,
		final SegmentCustomBuilderControl scbc,
		final String[] astrDepositTenor,
		final double[] adblDepositQuote,
		final String strDepositCalibMeasure,
		final String[] astrFRATenor,
		final double[] adblFRAQuote,
		final String strFRACalibMeasure,
		final String[] astrFixFloatTenor,
		final double[] adblFixFloatQuote,
		final String strFixFloatCalibMeasure,
		final String[] astrFloatFloatTenor,
		final double[] adblFloatFloatQuote,
		final String strFloatFloatCalibMeasure,
		final String[] astrSyntheticFloatFloatTenor,
		final double[] adblSyntheticFloatFloatQuote,
		final String strSyntheticFloatFloatCalibMeasure,
		final String strHeaderComment,
		final boolean bPrintMetric)
		throws Exception
	{
<span class="fc bfc" id="L499" title="All 2 branches covered.">		if (bPrintMetric) {</span>
<span class="fc" id="L500">			System.out.println (&quot;\n\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L502">			System.out.println (&quot;\t     &quot; + strHeaderComment);</span>

<span class="fc" id="L504">			System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>
		}

<span class="fc" id="L507">		JulianDate dtValue = dc.epoch();</span>

<span class="fc" id="L509">		SingleStreamComponent[] aDeposit = DepositFromMaturityDays (</span>
			dtValue,
			astrDepositTenor,
			fri
		);

		/*
		 * Construct the Deposit Instrument Set Stretch Builder
		 */

<span class="fc" id="L519">		LatentStateStretchSpec depositStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;DEPOSIT&quot;,
			aDeposit,
			strDepositCalibMeasure,
			adblDepositQuote
		);

<span class="fc" id="L526">		FRAStandardComponent[] aFRA = FRAFromMaturityDays (</span>
			dtValue,
			fri,
			astrFRATenor,
			adblFRAQuote
		);

		/*
		 * Construct the FRA Instrument Set Stretch Builder
		 */

<span class="fc" id="L537">		LatentStateStretchSpec fraStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;FRA&quot;,
			aFRA,
			strFRACalibMeasure,
			adblFRAQuote
		);

<span class="fc" id="L544">		FixFloatComponent[] aFixFloat = FixFloatSwap2 (</span>
			dtValue,
			fri,
			astrFixFloatTenor
		);

		/*
		 * Construct the Fix-Float Component Set Stretch Builder
		 */

<span class="fc" id="L554">		LatentStateStretchSpec fixFloatStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;FIXFLOAT&quot;,
			aFixFloat,
			strFixFloatCalibMeasure,
			adblFixFloatQuote
		);

<span class="fc" id="L561">		FloatFloatComponent[] aFloatFloat = FloatFloatSwap (</span>
			dtValue,
			fri,
			astrFloatFloatTenor
		);

		/*
		 * Construct the Float-Float Component Set Stretch Builder
		 */

<span class="fc" id="L571">		LatentStateStretchSpec floatFloatStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;FLOATFLOAT&quot;,
			aFloatFloat,
			strFloatFloatCalibMeasure,
			adblFloatFloatQuote
		);

<span class="fc" id="L578">		FloatFloatComponent[] aSyntheticFloatFloat = FloatFloatSwap (</span>
			dtValue,
			fri,
			astrSyntheticFloatFloatTenor
		);

		/*
		 * Construct the Synthetic Float-Float Component Set Stretch Builder
		 */

<span class="fc" id="L588">		LatentStateStretchSpec syntheticFloatFloatStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;SYNTHETICFLOATFLOAT&quot;,
			aSyntheticFloatFloat,
			strSyntheticFloatFloatCalibMeasure,
			adblSyntheticFloatFloatQuote
		);

<span class="fc" id="L595">		LatentStateStretchSpec[] aStretchSpec = new LatentStateStretchSpec[] {</span>
			depositStretch,
			fraStretch,
			fixFloatStretch,
			floatFloatStretch,
			syntheticFloatFloatStretch
		};

		/*
		 * Set up the Linear Curve Calibrator using the following parameters:
		 * 	- Cubic Exponential Mixture Basis Spline Set
		 * 	- Ck = 2, Segment Curvature Penalty = 2
		 * 	- Quadratic Rational Shape Controller
		 * 	- Natural Boundary Setting
		 */

<span class="fc" id="L611">		LinearLatentStateCalibrator lcc = new LinearLatentStateCalibrator (</span>
			scbc,
<span class="fc" id="L613">			BoundarySettings.NaturalStandard(),</span>
			MultiSegmentSequence.CALIBRATE,
			null,
			null
		);

<span class="fc" id="L619">		ValuationParams valParams = new ValuationParams (</span>
			dtValue,
			dtValue,
<span class="fc" id="L622">			fri.currency()</span>
		);

		/*
		 * Set the discount curve based component market parameters.
		 */

<span class="fc" id="L629">		CurveSurfaceQuoteContainer mktParams = MarketParamsBuilder.Create (</span>
			dc,
			fcReference,
			null,
			null,
			null,
			null,
			null,
			null
		);

		/*
		 * Construct the Shape Preserving Forward Curve by applying the linear curve calibrator to the array
		 *  of Deposit and Swap Stretches.
		 */

<span class="pc bpc" id="L645" title="2 of 4 branches missed.">		ForwardCurve fcDerived = ScenarioForwardCurveBuilder.ShapePreservingForwardCurve (</span>
			lcc,
			aStretchSpec,
			fri,
			valParams,
			null,
			mktParams,
			null,
			null == adblDepositQuote || 0 == adblDepositQuote.length ? adblFRAQuote[0] : adblDepositQuote[0]
		);

		/*
		 * Set the discount curve + cubic polynomial forward curve based component market parameters.
		 */

<span class="fc" id="L660">		mktParams.setForwardState (fcDerived);</span>

<span class="fc bfc" id="L662" title="All 2 branches covered.">		if (bPrintMetric) {</span>
			/*
			 * Cross-Comparison of the Deposit Calibration Instrument &quot;Forward&quot; metric.
			 */

<span class="pc bpc" id="L667" title="2 of 4 branches missed.">			if (null != aDeposit &amp;&amp; null != adblDepositQuote) {</span>
<span class="fc" id="L668">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L670">				System.out.println (&quot;\t     DEPOSIT INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="fc" id="L672">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc bfc" id="L674" title="All 2 branches covered.">				for (int i = 0; i &lt; aDeposit.length; ++i)</span>
<span class="fc" id="L675">					System.out.println (&quot;\t[&quot; + aDeposit[i].effectiveDate() + &quot; - &quot; + aDeposit[i].maturityDate() + &quot;] = &quot; +</span>
<span class="fc" id="L676">						FormatUtil.FormatDouble (aDeposit[i].measureValue (valParams, null, mktParams, null, strDepositCalibMeasure), 1, 6, 1.) +</span>
<span class="fc" id="L677">							&quot; | &quot; + FormatUtil.FormatDouble (adblDepositQuote[i], 1, 6, 1.) + &quot; | &quot; +</span>
<span class="fc" id="L678">								FormatUtil.FormatDouble (fcDerived.forward (aDeposit[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the FRA Calibration Instrument &quot;Forward&quot; metric.
			 */

<span class="pc bpc" id="L685" title="1 of 4 branches missed.">			if (null != aFRA &amp;&amp; null != adblFRAQuote) {</span>
<span class="fc" id="L686">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L688">				System.out.println (&quot;\t     FRA INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="fc" id="L690">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc bfc" id="L692" title="All 2 branches covered.">				for (int i = 0; i &lt; aFRA.length; ++i)</span>
<span class="fc" id="L693">					System.out.println (&quot;\t[&quot; + aFRA[i].effectiveDate() + &quot; - &quot; + aFRA[i].maturityDate() + &quot;] = &quot; +</span>
<span class="fc" id="L694">						FormatUtil.FormatDouble (aFRA[i].measureValue (valParams, null, mktParams, null, strFRACalibMeasure), 1, 6, 1.) +</span>
<span class="fc" id="L695">							&quot; | &quot; + FormatUtil.FormatDouble (adblFRAQuote[i], 1, 6, 1.) + &quot; | &quot; +</span>
<span class="fc" id="L696">								FormatUtil.FormatDouble (fcDerived.forward (aFRA[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the Fix-Float Calibration Instrument &quot;DerivedParBasisSpread&quot; metric.
			 */

<span class="pc bpc" id="L703" title="1 of 4 branches missed.">			if (null != aFixFloat &amp;&amp; null != adblFixFloatQuote) {</span>
<span class="fc" id="L704">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L706">				System.out.println (&quot;\t     FIX-FLOAT INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="fc" id="L708">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc bfc" id="L710" title="All 2 branches covered.">				for (int i = 0; i &lt; aFixFloat.length; ++i)</span>
<span class="fc" id="L711">					System.out.println (&quot;\t[&quot; + aFixFloat[i].effectiveDate() + &quot; - &quot; + aFixFloat[i].maturityDate() + &quot;] = &quot; +</span>
<span class="fc" id="L712">						FormatUtil.FormatDouble (aFixFloat[i].measureValue (valParams, null, mktParams, null, strFixFloatCalibMeasure), 1, 4, 100.) +</span>
<span class="fc" id="L713">							&quot;% | &quot; + FormatUtil.FormatDouble (adblFixFloatQuote[i], 1, 4, 100.) + &quot;% | &quot; +</span>
<span class="fc" id="L714">								FormatUtil.FormatDouble (fcDerived.forward (aFixFloat[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the Float-Float Calibration Instrument &quot;DerivedParBasisSpread&quot; metric.
			 */

<span class="pc bpc" id="L721" title="1 of 4 branches missed.">			if (null != aFloatFloat &amp;&amp; null != adblFloatFloatQuote) {</span>
<span class="fc" id="L722">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L724">				System.out.println (&quot;\t     FLOAT-FLOAT INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="fc" id="L726">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc bfc" id="L728" title="All 2 branches covered.">				for (int i = 0; i &lt; aFloatFloat.length; ++i)</span>
<span class="fc" id="L729">					System.out.println (&quot;\t[&quot; + aFloatFloat[i].effectiveDate() + &quot; - &quot; + aFloatFloat[i].maturityDate() + &quot;] = &quot; +</span>
<span class="fc" id="L730">						FormatUtil.FormatDouble (aFloatFloat[i].measureValue (valParams, null, mktParams, null, strFloatFloatCalibMeasure), 1, 2, 1.) +</span>
<span class="fc" id="L731">							&quot; | &quot; + FormatUtil.FormatDouble (adblFloatFloatQuote[i], 1, 2, 10000.) + &quot; | &quot; +</span>
<span class="fc" id="L732">								FormatUtil.FormatDouble (fcDerived.forward (aFloatFloat[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the Synthetic Float-Float Calibration Instrument &quot;DerivedParBasisSpread&quot; metric.
			 */

<span class="pc bpc" id="L739" title="1 of 4 branches missed.">			if (null != aSyntheticFloatFloat &amp;&amp; null != adblSyntheticFloatFloatQuote) {</span>
<span class="fc" id="L740">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L742">				System.out.println (&quot;\t     SYNTHETIC FLOAT-FLOAT INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="fc" id="L744">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc bfc" id="L746" title="All 2 branches covered.">				for (int i = 0; i &lt; aSyntheticFloatFloat.length; ++i)</span>
<span class="fc" id="L747">					System.out.println (&quot;\t[&quot; + aSyntheticFloatFloat[i].effectiveDate() + &quot; - &quot; + aSyntheticFloatFloat[i].maturityDate() + &quot;] = &quot; +</span>
<span class="fc" id="L748">						FormatUtil.FormatDouble (aSyntheticFloatFloat[i].measureValue (valParams, null, mktParams, null, strSyntheticFloatFloatCalibMeasure), 1, 2, 1.) +</span>
<span class="fc" id="L749">							&quot; | &quot; + FormatUtil.FormatDouble (adblSyntheticFloatFloatQuote[i], 1, 2, 10000.) + &quot; | &quot; +</span>
<span class="fc" id="L750">								FormatUtil.FormatDouble (fcDerived.forward (aSyntheticFloatFloat[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}
		}

<span class="fc" id="L754">		return fcDerived;</span>
	}

	public static final ForwardCurve CustomIBORBuilderSample2 (
		final MergedDiscountForwardCurve dc,
		final ForwardCurve fcReference,
		final ForwardLabel fri,
		final SegmentCustomBuilderControl scbc,
		final String[] astrDepositTenor,
		final double[] adblDepositQuote,
		final String strDepositCalibMeasure,
		final String[] astrFRATenor,
		final double[] adblFRAQuote,
		final String strFRACalibMeasure,
		final String[] astrFixFloatTenor,
		final double[] adblFixFloatQuote,
		final String strFixFloatCalibMeasure,
		final String[] astrComponentPairTenor,
		final double[] adblComponentPairQuote,
		final String strComponentPairCalibMeasure,
		final String[] astrSyntheticComponentPairTenor,
		final double[] adblSyntheticComponentPairQuote,
		final String strSyntheticComponentPairCalibMeasure,
		final String strHeaderComment,
		final boolean bPrintMetric)
		throws Exception
	{
<span class="nc bnc" id="L781" title="All 2 branches missed.">		if (bPrintMetric) {</span>
<span class="nc" id="L782">			System.out.println (&quot;\n\t----------------------------------------------------------------&quot;);</span>

<span class="nc" id="L784">			System.out.println (&quot;\t     &quot; + strHeaderComment);</span>

<span class="nc" id="L786">			System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>
		}

<span class="nc" id="L789">		JulianDate dtValue = dc.epoch();</span>

<span class="nc" id="L791">		ValuationParams valParams = new ValuationParams (</span>
			dtValue,
			dtValue,
<span class="nc" id="L794">			fri.currency()</span>
		);

		/*
		 * Set the discount curve based component market parameters.
		 */

<span class="nc" id="L801">		CurveSurfaceQuoteContainer mktParams = MarketParamsBuilder.Create (</span>
			dc,
			fcReference,
			null,
			null,
			null,
			null,
			null,
			null
		);

<span class="nc" id="L812">		SingleStreamComponent[] aDeposit = DepositFromMaturityDays (</span>
			dtValue,
			astrDepositTenor,
			fri
		);

		/*
		 * Construct the Deposit Instrument Set Stretch Builder
		 */

<span class="nc" id="L822">		LatentStateStretchSpec depositStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;DEPOSIT&quot;,
			aDeposit,
			strDepositCalibMeasure,
			adblDepositQuote
		);

<span class="nc" id="L829">		FRAStandardComponent[] aFRA = FRAFromMaturityDays (</span>
			dtValue,
			fri,
			astrFRATenor,
			adblFRAQuote
		);

		/*
		 * Construct the FRA Instrument Set Stretch Builder
		 */

<span class="nc" id="L840">		LatentStateStretchSpec fraStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;FRA&quot;,
			aFRA,
			strFRACalibMeasure,
			adblFRAQuote
		);

<span class="nc" id="L847">		FixFloatComponent[] aFixFloat = FixFloatSwap (</span>
			dtValue,
			fri,
			astrFixFloatTenor
		);

		/*
		 * Construct the Fix-Float Component Set Stretch Builder
		 */

<span class="nc" id="L857">		LatentStateStretchSpec fixFloatStretch = LatentStateStretchBuilder.ForwardStretchSpec (</span>
			&quot;FIXFLOAT&quot;,
			aFixFloat,
			strFixFloatCalibMeasure,
			adblFixFloatQuote
		);

<span class="nc" id="L864">		org.drip.product.fx.ComponentPair[] aComponentPair = FixFloatComponentPair (</span>
			dtValue,
			mktParams,
			fri,
			astrComponentPairTenor
		);

		/*
		 * Construct the Float-Float Component Set Stretch Builder
		 */

<span class="nc" id="L875">		LatentStateStretchSpec fixFloatCPStretch = LatentStateStretchBuilder.ComponentPairForwardStretch (</span>
			&quot;FIXFLOATCP&quot;,
			aComponentPair,
			valParams,
			mktParams,
			adblComponentPairQuote,
			true,
			true
		);

<span class="nc" id="L885">		org.drip.product.fx.ComponentPair[] aSyntheticComponentPair = FixFloatComponentPair (</span>
			dtValue,
			mktParams,
			fri,
			astrSyntheticComponentPairTenor
		);

		/*
		 * Construct the Synthetic Fix-Float Component Set Stretch Builder
		 */

<span class="nc" id="L896">		LatentStateStretchSpec syntheticFixFloatCPStretch = LatentStateStretchBuilder.ComponentPairForwardStretch (</span>
			&quot;SYNTHETICFIXFLOATCP&quot;,
			aSyntheticComponentPair,
			valParams,
			mktParams,
			adblSyntheticComponentPairQuote,
			true,
			true
		);

<span class="nc" id="L906">		LatentStateStretchSpec[] aStretchSpec = new LatentStateStretchSpec[] {</span>
			depositStretch,
			fraStretch,
			fixFloatStretch,
			fixFloatCPStretch,
			syntheticFixFloatCPStretch
		};

		/*
		 * Set up the Linear Curve Calibrator using the following parameters:
		 * 	- Cubic Exponential Mixture Basis Spline Set
		 * 	- Ck = 2, Segment Curvature Penalty = 2
		 * 	- Quadratic Rational Shape Controller
		 * 	- Natural Boundary Setting
		 */

<span class="nc" id="L922">		LinearLatentStateCalibrator lcc = new LinearLatentStateCalibrator (</span>
			scbc,
<span class="nc" id="L924">			BoundarySettings.NaturalStandard(),</span>
			MultiSegmentSequence.CALIBRATE,
			null,
			null
		);

		/*
		 * Construct the Shape Preserving Forward Curve by applying the linear curve calibrator to the array
		 *  of Deposit and Swap Stretches.
		 */

<span class="nc bnc" id="L935" title="All 4 branches missed.">		ForwardCurve fcDerived = ScenarioForwardCurveBuilder.ShapePreservingForwardCurve (</span>
			lcc,
			aStretchSpec,
			fri,
			valParams,
			null,
			mktParams,
			null,
			null == adblDepositQuote || 0 == adblDepositQuote.length ? adblFRAQuote[0] : adblDepositQuote[0]
		);

		/*
		 * Set the discount curve + cubic polynomial forward curve based component market parameters.
		 */

<span class="nc" id="L950">		mktParams.setForwardState (fcDerived);</span>

<span class="nc bnc" id="L952" title="All 2 branches missed.">		if (bPrintMetric) {</span>
			/*
			 * Cross-Comparison of the Deposit Calibration Instrument &quot;Forward&quot; metric.
			 */

<span class="nc bnc" id="L957" title="All 4 branches missed.">			if (null != aDeposit &amp;&amp; null != adblDepositQuote) {</span>
<span class="nc" id="L958">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc" id="L960">				System.out.println (&quot;\t     DEPOSIT INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="nc" id="L962">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc bnc" id="L964" title="All 2 branches missed.">				for (int i = 0; i &lt; aDeposit.length; ++i)</span>
<span class="nc" id="L965">					System.out.println (&quot;\t[&quot; + aDeposit[i].effectiveDate() + &quot; - &quot; + aDeposit[i].maturityDate() + &quot;] = &quot; +</span>
<span class="nc" id="L966">						FormatUtil.FormatDouble (aDeposit[i].measureValue (valParams, null, mktParams, null, strDepositCalibMeasure), 1, 6, 1.) +</span>
<span class="nc" id="L967">							&quot; | &quot; + FormatUtil.FormatDouble (adblDepositQuote[i], 1, 6, 1.) + &quot; | &quot; +</span>
<span class="nc" id="L968">								FormatUtil.FormatDouble (fcDerived.forward (aDeposit[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the FRA Calibration Instrument &quot;Forward&quot; metric.
			 */

<span class="nc bnc" id="L975" title="All 4 branches missed.">			if (null != aFRA &amp;&amp; null != adblFRAQuote) {</span>
<span class="nc" id="L976">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc" id="L978">				System.out.println (&quot;\t     FRA INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="nc" id="L980">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc bnc" id="L982" title="All 2 branches missed.">				for (int i = 0; i &lt; aFRA.length; ++i)</span>
<span class="nc" id="L983">					System.out.println (&quot;\t[&quot; + aFRA[i].effectiveDate() + &quot; - &quot; + aFRA[i].maturityDate() + &quot;] = &quot; +</span>
<span class="nc" id="L984">						FormatUtil.FormatDouble (aFRA[i].measureValue (valParams, null, mktParams, null, strFRACalibMeasure), 1, 6, 1.) +</span>
<span class="nc" id="L985">							&quot; | &quot; + FormatUtil.FormatDouble (adblFRAQuote[i], 1, 6, 1.) + &quot; | &quot; +</span>
<span class="nc" id="L986">								FormatUtil.FormatDouble (fcDerived.forward (aFRA[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the Fix-Float Calibration Instrument &quot;DerivedParBasisSpread&quot; metric.
			 */

<span class="nc bnc" id="L993" title="All 4 branches missed.">			if (null != aFixFloat &amp;&amp; null != adblFixFloatQuote) {</span>
<span class="nc" id="L994">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc" id="L996">				System.out.println (&quot;\t     FIX-FLOAT INSTRUMENTS QUOTE RECOVERY&quot;);</span>

<span class="nc" id="L998">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc bnc" id="L1000" title="All 2 branches missed.">				for (int i = 0; i &lt; aFixFloat.length; ++i)</span>
<span class="nc" id="L1001">					System.out.println (&quot;\t[&quot; + aFixFloat[i].effectiveDate() + &quot; - &quot; + aFixFloat[i].maturityDate() + &quot;] = &quot; +</span>
<span class="nc" id="L1002">						FormatUtil.FormatDouble (aFixFloat[i].measureValue (valParams, null, mktParams, null, strFixFloatCalibMeasure), 1, 2, 100.) +</span>
<span class="nc" id="L1003">							&quot;% | &quot; + FormatUtil.FormatDouble (adblFixFloatQuote[i], 1, 2, 100.) + &quot;% | &quot; +</span>
<span class="nc" id="L1004">								FormatUtil.FormatDouble (fcDerived.forward (aFixFloat[i].maturityDate()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the Fix-Float Component Pair &quot;DerivedParBasisSpread&quot; metric.
			 */

<span class="nc bnc" id="L1011" title="All 4 branches missed.">			if (null != aComponentPair &amp;&amp; null != adblComponentPairQuote) {</span>
<span class="nc" id="L1012">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc" id="L1014">				System.out.println (&quot;\t     FIX-FLOAT COMPONENT PAIR QUOTE RECOVERY&quot;);</span>

<span class="nc" id="L1016">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc bnc" id="L1018" title="All 2 branches missed.">				for (int i = 0; i &lt; aComponentPair.length; ++i)</span>
<span class="nc" id="L1019">					System.out.println (&quot;\t[&quot; + aComponentPair[i].effective() + &quot; - &quot; + aComponentPair[i].maturity() + &quot;] = &quot; +</span>
<span class="nc" id="L1020">						FormatUtil.FormatDouble (aComponentPair[i].measureValue (valParams, null, mktParams, null, strComponentPairCalibMeasure), 1, 2, 1.) +</span>
<span class="nc" id="L1021">							&quot; | &quot; + FormatUtil.FormatDouble (adblComponentPairQuote[i], 1, 2, 10000.) + &quot; | &quot; +</span>
<span class="nc" id="L1022">								FormatUtil.FormatDouble (fcDerived.forward (aComponentPair[i].maturity()), 1, 4, 100.) + &quot;%&quot;);</span>
			}

			/*
			 * Cross-Comparison of the Synthetic Float-Float Component Pair &quot;DerivedParBasisSpread&quot; metric.
			 */

<span class="nc bnc" id="L1029" title="All 4 branches missed.">			if (null != aSyntheticComponentPair &amp;&amp; null != adblSyntheticComponentPairQuote) {</span>
<span class="nc" id="L1030">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc" id="L1032">				System.out.println (&quot;\t     SYNTHETIC FIX-FLOAT COMPONENT PAIR QUOTE RECOVERY&quot;);</span>

<span class="nc" id="L1034">				System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="nc bnc" id="L1036" title="All 2 branches missed.">				for (int i = 0; i &lt; aSyntheticComponentPair.length; ++i)</span>
<span class="nc" id="L1037">					System.out.println (&quot;\t[&quot; + aSyntheticComponentPair[i].effective() + &quot; - &quot; + aSyntheticComponentPair[i].maturity() + &quot;] = &quot; +</span>
<span class="nc" id="L1038">						FormatUtil.FormatDouble (aSyntheticComponentPair[i].measureValue (valParams, null, mktParams, null, strSyntheticComponentPairCalibMeasure), 1, 2, 1.) +</span>
<span class="nc" id="L1039">							&quot; | &quot; + FormatUtil.FormatDouble (adblSyntheticComponentPairQuote[i], 1, 2, 10000.) + &quot; | &quot; +</span>
<span class="nc" id="L1040">								FormatUtil.FormatDouble (fcDerived.forward (aSyntheticComponentPair[i].maturity()), 1, 4, 100.) + &quot;%&quot;);</span>
			}
		}

<span class="nc" id="L1044">		return fcDerived;</span>
	}

	private static final void ForwardJack (
		final JulianDate dt,
		final ForwardCurve fc,
		final String strStartDateTenor,
		final String strManifestMeasure)
	{
<span class="fc" id="L1053">		JulianDate dtJack = dt.addTenor (strStartDateTenor);</span>

<span class="fc" id="L1055">		System.out.println (&quot;\t&quot; + </span>
			dtJack + &quot; | &quot; +
			strStartDateTenor + &quot;: &quot; +
<span class="fc" id="L1058">			fc.jackDForwardDManifestMeasure (</span>
				strManifestMeasure,
<span class="fc" id="L1060">				dtJack).displayString()</span>
			);
<span class="fc" id="L1062">	}</span>

	public static final void ForwardJack (
		final JulianDate dt,
		final String strHeaderComment,
		final ForwardCurve fc,
		final String strManifestMeasure)
	{
<span class="fc" id="L1070">		System.out.println (&quot;\n\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L1072">		System.out.println (&quot;\t&quot; + strHeaderComment);</span>

<span class="fc" id="L1074">		System.out.println (&quot;\t----------------------------------------------------------------&quot;);</span>

<span class="fc" id="L1076">		ForwardJack (dt, fc, &quot;1Y&quot;, strManifestMeasure);</span>

<span class="fc" id="L1078">		ForwardJack (dt, fc, &quot;2Y&quot;, strManifestMeasure);</span>

<span class="fc" id="L1080">		ForwardJack (dt, fc, &quot;3Y&quot;, strManifestMeasure);</span>

<span class="fc" id="L1082">		ForwardJack (dt, fc, &quot;5Y&quot;, strManifestMeasure);</span>

<span class="fc" id="L1084">		ForwardJack (dt, fc, &quot;7Y&quot;, strManifestMeasure);</span>
<span class="fc" id="L1085">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>