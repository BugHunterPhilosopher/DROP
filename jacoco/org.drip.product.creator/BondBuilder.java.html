<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BondBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.product.creator</a> &gt; <span class="el_source">BondBuilder.java</span></div><h1>BondBuilder.java</h1><pre class="source lang-java linenums">
package org.drip.product.creator;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2019 Lakshmi Krishnamurthy
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * Copyright (C) 2017 Lakshmi Krishnamurthy
 * Copyright (C) 2016 Lakshmi Krishnamurthy
 * Copyright (C) 2015 Lakshmi Krishnamurthy
 * Copyright (C) 2014 Lakshmi Krishnamurthy
 * Copyright (C) 2013 Lakshmi Krishnamurthy
 * Copyright (C) 2012 Lakshmi Krishnamurthy
 * Copyright (C) 2011 Lakshmi Krishnamurthy
 * 
 *  This file is part of DROP, an open-source library targeting risk, transaction costs, exposure, margin
 *  	calculations, and portfolio construction within and across fixed income, credit, commodity, equity,
 *  	FX, and structured products.
 *  
 *  	https://lakshmidrip.github.io/DROP/
 *  
 *  DROP is composed of three main modules:
 *  
 *  - DROP Analytics Core - https://lakshmidrip.github.io/DROP-Analytics-Core/
 *  - DROP Portfolio Core - https://lakshmidrip.github.io/DROP-Portfolio-Core/
 *  - DROP Numerical Core - https://lakshmidrip.github.io/DROP-Numerical-Core/
 * 
 * 	DROP Analytics Core implements libraries for the following:
 * 	- Fixed Income Analytics
 * 	- Asset Backed Analytics
 * 	- XVA Analytics
 * 	- Exposure and Margin Analytics
 * 
 * 	DROP Portfolio Core implements libraries for the following:
 * 	- Asset Allocation Analytics
 * 	- Transaction Cost Analytics
 * 
 * 	DROP Numerical Core implements libraries for the following:
 * 	- Statistical Learning Library
 * 	- Numerical Optimizer Library
 * 	- Machine Learning Library
 * 	- Spline Builder Library
 * 
 * 	Documentation for DROP is Spread Over:
 * 
 * 	- Main                     =&gt; https://lakshmidrip.github.io/DROP/
 * 	- Wiki                     =&gt; https://github.com/lakshmiDRIP/DROP/wiki
 * 	- GitHub                   =&gt; https://github.com/lakshmiDRIP/DROP
 * 	- Javadoc                  =&gt; https://lakshmidrip.github.io/DROP/Javadoc/index.html
 * 	- Technical Specifications =&gt; https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal
 * 	- Release Versions         =&gt; https://lakshmidrip.github.io/DROP/version.html
 * 	- Community Credits        =&gt; https://lakshmidrip.github.io/DROP/credits.html
 * 	- Issues Catalog           =&gt; https://github.com/lakshmiDRIP/DROP/issues
 * 	- JUnit                    =&gt; https://lakshmidrip.github.io/DROP/junit/index.html
 * 	- Jacoco                   =&gt; https://lakshmidrip.github.io/DROP/jacoco/index.html
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;BondBuilder&lt;/i&gt; contains the suite of helper functions for creating simple fixed/floater bonds, user
 * defined bonds, optionally with custom cash flows and embedded option schedules (European or American). It
 * also constructs bonds by de-serializing the byte stream.
 *
 *	&lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Module &lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/AnalyticsCore.md&quot;&gt;Analytics Core Module&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Library&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/FixedIncomeAnalyticsLibrary.md&quot;&gt;Fixed Income Analytics Library&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/product&quot;&gt;Product&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/product/creator&quot;&gt;Creator&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 * &lt;br&gt;&lt;br&gt;
 * 
 * @author Lakshmi Krishnamurthy
 */

<span class="nc" id="L91">public class BondBuilder {</span>

	/**
	 * Custom Bond Type Simple Fixed
	 */

	public static final int BOND_TYPE_SIMPLE_FIXED = 0;

	/**
	 * Custom Bond Type Simple Floater
	 */

	public static final int BOND_TYPE_SIMPLE_FLOATER = 1;

	/**
	 * Custom Bond Type Simple From Cash flows
	 */

	public static final int BOND_TYPE_SIMPLE_FROM_CF = 2;

	/**
	 * Create the full generic bond object from the complete set of parameters
	 * 
	 * @param tsyParams Bond Treasury Parameters
	 * @param idParams Bond Identifier Parameters
	 * @param cpnParams Bond Coupon Parameters
	 * @param fltParams Bond Floater Parameters
	 * @param mktConv Bond Market Quote Convention
	 * @param crValParams Bond Credit Valuation Parameters
	 * @param cfteParams Bond Cash-flow Termination Event Parameters
	 * @param periodParams Bond Period Generation Parameters
	 * @param notlParams Bond Notional Parameters
	 * 
	 * @return The Bond object
	 */

	public static final org.drip.product.credit.BondComponent CreateBondFromParams (
		final org.drip.product.params.TreasuryBenchmarks tsyParams,
		final org.drip.product.params.IdentifierSet idParams,
		final org.drip.product.params.CouponSetting cpnParams,
		final org.drip.product.params.FloaterSetting fltParams,
		final org.drip.product.params.QuoteConvention mktConv,
		final org.drip.product.params.CreditSetting crValParams,
		final org.drip.product.params.TerminationSetting cfteParams,
		final org.drip.product.params.BondStream periodParams,
		final org.drip.product.params.NotionalSetting notlParams)
	{
<span class="pc bpc" id="L138" title="4 of 10 branches missed.">		if (null == idParams || !idParams.validate() || null == cpnParams || !cpnParams.validate() || (null</span>
<span class="pc bpc" id="L139" title="4 of 8 branches missed.">			!= fltParams &amp;&amp; !fltParams.validate()) || null == mktConv || !mktConv.validate() || null ==</span>
<span class="pc bpc" id="L140" title="5 of 10 branches missed.">				crValParams || !crValParams.validate() || null == cfteParams || !cfteParams.validate() ||</span>
<span class="pc bpc" id="L141" title="1 of 2 branches missed.">					null == periodParams || null == notlParams || !notlParams.validate())</span>
<span class="nc" id="L142">			return null;</span>

<span class="fc" id="L144">		org.drip.product.credit.BondComponent bond = new org.drip.product.credit.BondComponent();</span>

<span class="fc" id="L146">		bond.setTreasuryBenchmark (tsyParams);</span>

<span class="fc" id="L148">		bond.setIdentifierSet (idParams);</span>

<span class="fc" id="L150">		bond.setCouponSetting (cpnParams);</span>

<span class="fc" id="L152">		bond.setFloaterSetting (fltParams);</span>

<span class="fc" id="L154">		bond.setMarketConvention (mktConv);</span>

<span class="fc" id="L156">		bond.setCreditSetting (crValParams);</span>

<span class="fc" id="L158">		bond.setTerminationSetting (cfteParams);</span>

<span class="fc" id="L160">		bond.setStream (periodParams);</span>

<span class="fc" id="L162">		bond.setNotionalSetting (notlParams);</span>

<span class="fc" id="L164">		return bond;</span>
	}

	/**
	 * Create a simple fixed bond from parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblCoupon Bond Fixed Coupon
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Bond Coupon Day count convention
	 * @param dtEffective Effective Date
	 * @param dtMaturity Maturity Date
	 * @param fsPrincipalOutstanding Outstanding Principal schedule
	 * @param fsCoupon Bond Coupon Schedule
	 * 
	 * @return The Bond Object
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFixed (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strCreditCurveName,
		final double dblCoupon,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="pc bpc" id="L196" title="6 of 12 branches missed.">		if (null == strName || strName.isEmpty() || null == strCurrency || strCurrency.isEmpty() || null ==</span>
<span class="pc bpc" id="L197" title="1 of 2 branches missed.">			dtEffective || null == dtMaturity || !org.drip.numerical.common.NumberUtil.IsValid (dblCoupon))</span>
<span class="nc" id="L198">			return null;</span>

<span class="fc" id="L200">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strName
			),
			new org.drip.product.params.CouponSetting (
				fsCoupon,
				&quot;&quot;,
				dblCoupon,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			null,
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="fc" id="L219">				dtEffective.julian(),</span>
				100.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				true
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				null
			),
<span class="fc" id="L238">			org.drip.product.params.BondStream.Create (</span>
<span class="fc" id="L239">				dtMaturity.julian(),</span>
<span class="fc" id="L240">				dtEffective.julian(),</span>
				java.lang.Integer.MIN_VALUE,
				java.lang.Integer.MIN_VALUE,
<span class="fc" id="L243">				dtEffective.julian(),</span>
				iFreq,
				dblCoupon,
				strDayCount,
				strDayCount,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
				null,
<span class="fc bfc" id="L261" title="All 2 branches covered.">				!org.drip.numerical.common.StringUtil.IsEmpty (strCreditCurveName) ?</span>
<span class="fc" id="L262">					org.drip.state.identifier.EntityCDSLabel.Standard (</span>
						strCreditCurveName,
						strCurrency
					) : null
			), new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
				fsPrincipalOutstanding,
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_START,
				false
			)
		);
	}

	/**
	 * Create a Fixed Coupon Bond from the First and Penultimate Coupon Dates, and the other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblCoupon Bond Fixed Coupon
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Bond Coupon Day count convention
	 * @param dtEffective Effective Date
	 * @param dtMaturity Maturity Date
	 * @param iFirstCouponDate First Coupon Date
	 * @param iPenultimateCouponDate Penultimate Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal schedule
	 * @param fsCoupon Bond Coupon Schedule
	 * 
	 * @return The Bond Object
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFixedFP (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strCreditCurveName,
		final double dblCoupon,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iFirstCouponDate,
		final int iPenultimateCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="pc bpc" id="L325" title="6 of 12 branches missed.">		if (null == strName || strName.isEmpty() || null == strCurrency || strCurrency.isEmpty() || null ==</span>
<span class="pc bpc" id="L326" title="1 of 2 branches missed.">			dtEffective || null == dtMaturity || !org.drip.numerical.common.NumberUtil.IsValid (dblCoupon))</span>
<span class="nc" id="L327">			return null;</span>

<span class="fc" id="L329">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strName
			),
			new org.drip.product.params.CouponSetting (
				fsCoupon,
				&quot;&quot;,
				dblCoupon,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			null,
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="fc" id="L348">				dtEffective.julian(),</span>
				100.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				true
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				dapMaturity
			),
<span class="fc" id="L367">			org.drip.product.params.BondStream.FromFirstPenultimateCouponDate (</span>
<span class="fc" id="L368">				dtMaturity.julian(),</span>
<span class="fc" id="L369">				dtEffective.julian(),</span>
<span class="fc" id="L370">				dtMaturity.julian(),</span>
				iFirstCouponDate,
				iPenultimateCouponDate,
				iFreq,
				dblCoupon,
				strDayCount,
				strDayCount,
				dapPay,
				dapReset,
				dapMaturity,
				dapEffective,
				dapPeriodEnd,
				dapAccrualEnd,
				dapPeriodStart,
				dapAccrualStart,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
				null,
<span class="pc bpc" id="L390" title="1 of 2 branches missed.">				!org.drip.numerical.common.StringUtil.IsEmpty (strCreditCurveName) ?</span>
<span class="pc" id="L391">					org.drip.state.identifier.EntityCDSLabel.Standard (</span>
						strCreditCurveName,
						strCurrency
					) : null
			), new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
				fsPrincipalOutstanding,
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_START,
				false
			)
		);
	}

	/**
	 * Create a Fixed Coupon Bond from the First Coupon Date and the other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblCoupon Bond Fixed Coupon
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Bond Coupon Day count convention
	 * @param dtEffective Effective Date
	 * @param dtMaturity Maturity Date
	 * @param iFirstCouponDate First Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal schedule
	 * @param fsCoupon Bond Coupon Schedule
	 * 
	 * @return The Bond Object
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFixedF (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strCreditCurveName,
		final double dblCoupon,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iFirstCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc" id="L452">		return CreateSimpleFixedFP (</span>
			strName,
			strCurrency,
			strCreditCurveName,
			dblCoupon,
			iFreq,
			strDayCount,
			dtEffective,
			dtMaturity,
			iFirstCouponDate,
<span class="nc" id="L462">			dtMaturity.subtractTenor ((12 / iFreq) + &quot;M&quot;).julian(),</span>
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart,
			fsPrincipalOutstanding,
			fsCoupon
		);
	}

	/**
	 * Create a Fixed Coupon Bond from the Penultimate Coupon Date and the other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblCoupon Bond Fixed Coupon
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Bond Coupon Day count convention
	 * @param dtEffective Effective Date
	 * @param dtMaturity Maturity Date
	 * @param iPenultimateCouponDate Penultimate Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal schedule
	 * @param fsCoupon Bond Coupon Schedule
	 * 
	 * @return The Bond Object
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFixedP (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strCreditCurveName,
		final double dblCoupon,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iPenultimateCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc" id="L523">		return CreateSimpleFixedFP (</span>
			strName,
			strCurrency,
			strCreditCurveName,
			dblCoupon,
			iFreq,
			strDayCount,
			dtEffective,
			dtMaturity,
<span class="nc" id="L532">			dtEffective.addTenor ((12 / iFreq) + &quot;M&quot;).julian(),</span>
			iPenultimateCouponDate,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart,
			fsPrincipalOutstanding,
			fsCoupon
		);
	}

	/**
	 * Create a simple floating rate bond
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Bond object
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFloater (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="pc bpc" id="L578" title="6 of 12 branches missed.">		if (null == strName || strName.isEmpty() || null == strCurrency || strCurrency.isEmpty() || null ==</span>
<span class="pc bpc" id="L579" title="1 of 2 branches missed.">			dtEffective || null == dtMaturity || !org.drip.numerical.common.NumberUtil.IsValid (dblSpread))</span>
<span class="nc" id="L580">			return null;</span>

<span class="fc" id="L582">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strCurrency
			),
			new org.drip.product.params.CouponSetting (
				fsCoupon,
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			new org.drip.product.params.FloaterSetting (
<span class="fc" id="L598">				org.drip.state.identifier.ForwardLabel.Standard (strRateIndex),</span>
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN
			),
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="fc" id="L606">				dtEffective.julian(),</span>
				100.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				true
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				null
			),
<span class="fc" id="L625">			org.drip.product.params.BondStream.Create (</span>
<span class="fc" id="L626">				dtMaturity.julian(),</span>
<span class="fc" id="L627">				dtEffective.julian(),</span>
				java.lang.Integer.MIN_VALUE,
				java.lang.Integer.MIN_VALUE,
<span class="fc" id="L630">				dtEffective.julian(),</span>
				iFreq,
				dblSpread,
				strDayCount,
				strDayCount,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
<span class="pc bpc" id="L647" title="1 of 2 branches missed.">				org.drip.state.identifier.ForwardLabel.Standard (strRateIndex),</span>
<span class="fc bfc" id="L648" title="All 2 branches covered.">				null == strCreditCurveName || strCreditCurveName.isEmpty() ? null :</span>
<span class="fc" id="L649">					org.drip.state.identifier.EntityCDSLabel.Standard (</span>
						strCreditCurveName,
						strCurrency
					)
				),
			new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
				fsPrincipalOutstanding,
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_END,
				false
			)
		);
	}

	/**
	 * Create a Floating Rate Bond from the First and Penultimate Coupon Dates, and the other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param iFirstCouponDate First Coupon Date
	 * @param iPenultimateCouponDate Penultimate Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Floating Rate Bond Instance
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFloaterFP (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iFirstCouponDate,
		final int iPenultimateCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="pc bpc" id="L715" title="6 of 12 branches missed.">		if (null == strName || strName.isEmpty() || null == strCurrency || strCurrency.isEmpty() || null ==</span>
<span class="pc bpc" id="L716" title="1 of 2 branches missed.">			dtEffective || null == dtMaturity || !org.drip.numerical.common.NumberUtil.IsValid (dblSpread))</span>
<span class="nc" id="L717">			return null;</span>

<span class="fc" id="L719">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strCurrency
			),
			new org.drip.product.params.CouponSetting (
				fsCoupon,
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			new org.drip.product.params.FloaterSetting (
<span class="fc" id="L735">				org.drip.state.identifier.ForwardLabel.Standard (strRateIndex),</span>
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN
			),
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="fc" id="L743">				dtEffective.julian(),</span>
				100.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				true
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				dapMaturity
			),
<span class="fc" id="L762">			org.drip.product.params.BondStream.FromFirstPenultimateCouponDate (</span>
<span class="fc" id="L763">				dtMaturity.julian(),</span>
<span class="fc" id="L764">				dtEffective.julian(),</span>
<span class="fc" id="L765">				dtMaturity.julian(),</span>
				iFirstCouponDate,
				iPenultimateCouponDate,
				iFreq,
				dblSpread,
				strDayCount,
				strDayCount,
				dapPay,
				dapReset,
				dapMaturity,
				dapEffective,
				dapPeriodEnd,
				dapAccrualEnd,
				dapPeriodStart,
				dapAccrualStart,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
<span class="pc bpc" id="L784" title="1 of 2 branches missed.">				org.drip.state.identifier.ForwardLabel.Standard (strRateIndex),</span>
<span class="fc bfc" id="L785" title="All 2 branches covered.">				null == strCreditCurveName || strCreditCurveName.isEmpty() ? null :</span>
<span class="fc" id="L786">					org.drip.state.identifier.EntityCDSLabel.Standard (</span>
						strCreditCurveName,
						strCurrency
					)
				),
			new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
				fsPrincipalOutstanding,
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_END,
				false
			)
		);
	}

	/**
	 * Create a Floating Rate Bond from the First and Penultimate Coupon Dates, and the other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param iFirstCouponDate First Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Floating Rate Bond Instance
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFloaterF (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iFirstCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc" id="L850">		return CreateSimpleFloaterFP (</span>
			strName,
			strCurrency,
			strRateIndex,
			strCreditCurveName,
			dblSpread,
			iFreq,
			strDayCount,
			dtEffective,
			dtMaturity,
			iFirstCouponDate,
<span class="nc" id="L861">			dtMaturity.subtractTenor ((12 / iFreq) + &quot;M&quot;).julian(),</span>
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart,
			fsPrincipalOutstanding,
			fsCoupon
		);
	}

	/**
	 * Create a Floating Rate Bond from the First and Penultimate Coupon Dates, and the other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param iPenultimateCouponDate Penultimate Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Floating Rate Bond Instance
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleFloaterP (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iPenultimateCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc" id="L924">		return CreateSimpleFloaterFP (</span>
			strName,
			strCurrency,
			strRateIndex,
			strCreditCurveName,
			dblSpread,
			iFreq,
			strDayCount,
			dtEffective,
			dtMaturity,
<span class="nc" id="L934">			dtEffective.addTenor ((12 / iFreq) + &quot;M&quot;).julian(),</span>
			iPenultimateCouponDate,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart,
			fsPrincipalOutstanding,
			fsCoupon
		);
	}

	/**
	 * Create a bond from custom/user-defined cash flows and coupon conventions
	 * 
	 * @param strName Bond Name
	 * @param dtEffective Effective Date
	 * @param strCurrency Bond Currency
	 * @param strCreditCurveName Credit Curve Name
	 * @param strDayCount Coupon Day Count Convention
	 * @param dblInitialNotional The Initial Notional
	 * @param dblCouponRate The Coupon Rate
	 * @param iCouponFrequency Coupon Frequency
	 * @param adtPeriodEnd Array of Period End Dates
	 * @param adblCouponAmount Matching Array of Coupon Amounts
	 * @param adblPrincipalAmount Matching Array of Principal Amounts
	 * @param bIsPrincipalPayDown Flag indicating whether principal is pay down or outstanding
	 * 
	 * @return The Bond object
	 */

	public static final org.drip.product.credit.BondComponent CreateBondFromCF (
		final java.lang.String strName,
		final org.drip.analytics.date.JulianDate dtEffective,
		final java.lang.String strCurrency,
		final java.lang.String strCreditCurveName,
		final java.lang.String strDayCount,
		final double dblInitialNotional,
		final double dblCouponRate,
		final int iCouponFrequency,
		final org.drip.analytics.date.JulianDate[] adtPeriodEnd,
		final double[] adblCouponAmount,
		final double[] adblPrincipalAmount,
		final boolean bIsPrincipalPayDown)
	{
<span class="pc bpc" id="L982" title="4 of 8 branches missed.">		if (null == adtPeriodEnd || null == adblCouponAmount || null == adblPrincipalAmount || null ==</span>
<span class="pc bpc" id="L983" title="1 of 2 branches missed.">			dtEffective || !org.drip.numerical.common.NumberUtil.IsValid (dblInitialNotional) ||</span>
<span class="pc bpc" id="L984" title="2 of 4 branches missed.">				!org.drip.numerical.common.NumberUtil.IsValid (dblCouponRate) || 0 == iCouponFrequency)</span>
<span class="nc" id="L985">			return null;</span>

<span class="fc" id="L987">		int iEffectiveDate = dtEffective.julian();</span>

<span class="fc" id="L989">		int iNumPeriod = adtPeriodEnd.length;</span>
<span class="fc" id="L990">		int iPeriodStartDate = iEffectiveDate;</span>
<span class="fc" id="L991">		int[] aiPeriodEndDate = new int[iNumPeriod];</span>
<span class="fc" id="L992">		int[] aiPrincipalDate = new int[iNumPeriod + 1];</span>
<span class="fc" id="L993">		org.drip.product.params.BondStream stream = null;</span>
<span class="fc" id="L994">		double[] adblCouponFactor = new double[iNumPeriod];</span>
<span class="fc" id="L995">		double[] adblPeriodEndPrincipal = new double[iNumPeriod];</span>
<span class="fc" id="L996">		double[] adblPrincipalFactor = new double[iNumPeriod + 1];</span>
<span class="fc" id="L997">		double[] adblPeriodEndPrincipalFactor = new double[iNumPeriod];</span>

<span class="pc bpc" id="L999" title="3 of 6 branches missed.">		if (0 == iNumPeriod || iNumPeriod != adblCouponAmount.length || iNumPeriod !=</span>
			adblPrincipalAmount.length)
<span class="nc" id="L1001">			return null;</span>

<span class="fc bfc" id="L1003" title="All 2 branches covered.">		if (bIsPrincipalPayDown) {</span>
<span class="fc bfc" id="L1004" title="All 2 branches covered.">			for (int i = 0; i &lt; iNumPeriod; ++i)</span>
<span class="fc bfc" id="L1005" title="All 2 branches covered.">				adblPeriodEndPrincipal[i] = (0 == i ? dblInitialNotional : adblPeriodEndPrincipal[i - 1]) -</span>
					adblPrincipalAmount[i];
		} else
<span class="fc" id="L1008">			adblPeriodEndPrincipal = adblPrincipalAmount;</span>

<span class="fc" id="L1010">		java.util.List&lt;org.drip.analytics.cashflow.CompositePeriod&gt; lsCouponPeriod = new</span>
			java.util.ArrayList&lt;org.drip.analytics.cashflow.CompositePeriod&gt;();

<span class="fc bfc" id="L1013" title="All 2 branches covered.">		for (int i = 0; i &lt; iNumPeriod; ++i) {</span>
<span class="pc bpc" id="L1014" title="1 of 2 branches missed.">			if (null == adtPeriodEnd[i]) return null;</span>

<span class="fc" id="L1016">			aiPeriodEndDate[i] = adtPeriodEnd[i].julian();</span>

<span class="fc" id="L1018">			adblPeriodEndPrincipalFactor[i] = adblPeriodEndPrincipal[i] / dblInitialNotional;</span>

			try {
<span class="fc bfc" id="L1021" title="All 2 branches covered.">				adblCouponFactor[i] = adblCouponAmount[i] / (0 == i ? dblInitialNotional :</span>
					adblPeriodEndPrincipal[i - 1]) / org.drip.analytics.daycount.Convention.YearFraction
<span class="fc" id="L1023">						(iPeriodStartDate, aiPeriodEndDate[i], strDayCount, false, null, &quot;&quot;) / dblCouponRate;</span>

<span class="fc" id="L1025">				java.util.List&lt;org.drip.analytics.cashflow.ComposableUnitPeriod&gt; lsCUP = new</span>
					java.util.ArrayList&lt;org.drip.analytics.cashflow.ComposableUnitPeriod&gt;();

<span class="fc" id="L1028">				lsCUP.add (</span>
					new org.drip.analytics.cashflow.ComposableUnitFixedPeriod (
						iPeriodStartDate,
						aiPeriodEndDate[i],
						new org.drip.param.period.UnitCouponAccrualSetting (
							iCouponFrequency,
							strDayCount,
							false,
							strDayCount,
							false,
							strCurrency,
							false,
							org.drip.analytics.support.CompositePeriodBuilder.ACCRUAL_COMPOUNDING_RULE_GEOMETRIC
						),
						new org.drip.param.period.ComposableFixedUnitSetting (
							(12 / iCouponFrequency) + &quot;M&quot;,
							org.drip.analytics.support.CompositePeriodBuilder.EDGE_DATE_SEQUENCE_REGULAR,
							null,
							dblCouponRate,
							0.,
							strCurrency
						)
					)
				);

<span class="fc" id="L1053">				lsCouponPeriod.add (</span>
					new org.drip.analytics.cashflow.CompositeFixedPeriod (
						new org.drip.param.period.CompositePeriodSetting (
							iCouponFrequency,
							(12 / iCouponFrequency) + &quot;M&quot;,
							strCurrency,
							null,
							adblPrincipalAmount[i],
							null,
							null,
							null,
							null
						),
						lsCUP
					)
				);
<span class="nc" id="L1069">			} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1070">				e.printStackTrace();</span>

<span class="nc" id="L1072">				return null;</span>
<span class="fc" id="L1073">			}</span>

<span class="fc" id="L1075">			iPeriodStartDate = aiPeriodEndDate[i];</span>
		}

<span class="fc bfc" id="L1078" title="All 2 branches covered.">		for (int i = 0; i &lt;= iNumPeriod; ++i) {</span>
<span class="fc bfc" id="L1079" title="All 2 branches covered.">			aiPrincipalDate[i] = 0 == i ? iEffectiveDate : aiPeriodEndDate[i - 1];</span>
<span class="fc bfc" id="L1080" title="All 2 branches covered.">			adblPrincipalFactor[i] = 0 == i ? 1. : adblPeriodEndPrincipalFactor[i - 1];</span>
		}

		try {
<span class="fc" id="L1084">			stream = new org.drip.product.params.BondStream (</span>
				lsCouponPeriod,
				java.lang.Integer.MIN_VALUE,
				&quot;MATURITY_TYPE_REGULAR&quot;
			);
<span class="nc" id="L1089">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1090">			e.printStackTrace();</span>

<span class="nc" id="L1092">			return null;</span>
<span class="fc" id="L1093">		}</span>

<span class="fc" id="L1095">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strCurrency
			),
			new org.drip.product.params.CouponSetting (
<span class="fc" id="L1104">				org.drip.numerical.common.Array2D.FromArray (</span>
					aiPeriodEndDate,
					adblCouponFactor
				),
				&quot;&quot;,
				dblCouponRate,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			null,
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="fc" id="L1117">				dtEffective.julian(),</span>
				1.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				false
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				null
			),
			stream,
			new org.drip.product.params.NotionalSetting (
				1.,
				strCurrency,
<span class="fc" id="L1140">				org.drip.numerical.common.Array2D.FromArray (</span>
					aiPrincipalDate,
					adblPrincipalFactor
				),
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_START,
				false
			)
		);
	}

	/**
	 * Creates a Treasury Bond from the Parameters
	 * 
	 * @param strTreasuryCode Treasury Code
	 * @param strCurrency Bond Currency
	 * @param dblCoupon Bond Fixed Coupon
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Bond Coupon Day count convention
	 * @param dtEffective Effective Date
	 * @param dtMaturity Maturity Date
	 * 
	 * @return The Treasury Bond Instance
	 */

	public static final org.drip.product.govvie.TreasuryComponent Treasury (
		final java.lang.String strTreasuryCode,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final java.lang.String strCurrency,
		final double dblCoupon,
		final int iFreq,
		final java.lang.String strDayCount)
	{
<span class="pc bpc" id="L1173" title="2 of 4 branches missed.">		if (null == strTreasuryCode || strTreasuryCode.isEmpty()) return null;</span>

<span class="fc" id="L1175">		org.drip.product.govvie.TreasuryComponent tsyBond = null;</span>

		try {
<span class="fc" id="L1178">			tsyBond = new org.drip.product.govvie.TreasuryComponent (strTreasuryCode);</span>
<span class="nc" id="L1179">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1180">			e.printStackTrace();</span>

<span class="nc" id="L1182">			return null;</span>
<span class="fc" id="L1183">		}</span>

<span class="fc" id="L1185">		java.lang.String strName = strTreasuryCode + &quot; &quot; + org.drip.numerical.common.FormatUtil.FormatDouble</span>
<span class="fc" id="L1186">			(dblCoupon, 1, 2, 100.) + &quot; &quot; + dtMaturity;</span>

<span class="fc" id="L1188">		tsyBond.setIdentifierSet (</span>
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strName
			)
		);

<span class="fc" id="L1197">		tsyBond.setNotionalSetting (</span>
			new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
<span class="fc" id="L1201">				org.drip.numerical.common.Array2D.BulletSchedule(),</span>
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_END,
				false
			)
		);

<span class="fc" id="L1207">		tsyBond.setCouponSetting (</span>
			new org.drip.product.params.CouponSetting (
				null,
				&quot;&quot;,
				dblCoupon,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			)
		);

<span class="fc" id="L1217">		tsyBond.setStream (</span>
<span class="fc" id="L1218">			org.drip.product.params.BondStream.Create (</span>
<span class="fc" id="L1219">				dtMaturity.julian(),</span>
<span class="fc" id="L1220">				dtEffective.julian(),</span>
				java.lang.Integer.MIN_VALUE,
				java.lang.Integer.MIN_VALUE,
<span class="fc" id="L1223">				dtEffective.julian(),</span>
				iFreq,
				dblCoupon,
				strDayCount,
				strDayCount,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
				null,
				null
			)
		);

<span class="fc" id="L1245">		return tsyBond;</span>
	}

	/**
	 * Construct a Fixed To Float Bond Component
	 * 
	 * @param strName Bond Name
	 * @param strCreditCurveName Credit Curve Name
	 * @param iEffectiveDate Effective Date
	 * @param iFixedStreamEndDate Fixed Stream End Date
	 * @param iFixedFirstCouponDate Fixed Stream First Coupon Date
	 * @param iFixedPenultimateCouponDate Fixed Stream Penultimate Coupon Date
	 * @param iFixedFreq Fixed Stream Coupon Frequency
	 * @param dblFixedCoupon Fixed Stream Coupon Rate
	 * @param strFixedCouponDC Fixed Stream Coupon Day Count
	 * @param strFixedAccrualDC Fixed Stream Accrual Day Count
	 * @param iMaturityDate Maturity Date
	 * @param iFloatFirstCouponDate Float Stream First Coupon Date
	 * @param iFloatPenultimateCouponDate Float Stream Penultimate Coupon Date
	 * @param iFloatFreq Float Stream Coupon Frequency
	 * @param dblFloatSpread Float Stream Spread
	 * @param strFloatIndex Float Stream Rate Index
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * 
	 * @return The Bond Component
	 */

	public static final org.drip.product.credit.BondComponent FixedFPToFloatFP (
		final java.lang.String strName,
		final java.lang.String strCreditCurveName,
		final int iEffectiveDate,
		final int iFixedStreamEndDate,
		final int iFixedFirstCouponDate,
		final int iFixedPenultimateCouponDate,
		final int iFixedFreq,
		final double dblFixedCoupon,
		final java.lang.String strFixedCouponDC,
		final java.lang.String strFixedAccrualDC,
		final int iMaturityDate,
		final int iFloatFirstCouponDate,
		final int iFloatPenultimateCouponDate,
		final int iFloatFreq,
		final double dblFloatSpread,
		final java.lang.String strFloatIndex,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart)
	{
		try {
<span class="fc" id="L1306">			org.drip.state.identifier.ForwardLabel forwardLabel =</span>
<span class="fc" id="L1307">				org.drip.state.identifier.ForwardLabel.Standard (strFloatIndex);</span>

<span class="pc bpc" id="L1309" title="1 of 2 branches missed.">			if (null == forwardLabel) return null;</span>

<span class="fc" id="L1311">			java.lang.String strCurrency = forwardLabel.currency();</span>

<span class="fc" id="L1313">			return CreateBondFromParams (</span>
				null,
				new org.drip.product.params.IdentifierSet (
					strName,
					strName,
					strName,
					strCurrency
				),
				new org.drip.product.params.CouponSetting (
					null,
					&quot;&quot;,
					dblFloatSpread,
					java.lang.Double.NaN,
					java.lang.Double.NaN
				),
				new org.drip.product.params.FloaterSetting (
<span class="fc" id="L1329">					org.drip.state.identifier.ForwardLabel.Standard (strFloatIndex),</span>
					&quot;&quot;,
					dblFloatSpread,
					java.lang.Double.NaN
				),
				new org.drip.product.params.QuoteConvention (
					null,
					&quot;&quot;,
					iEffectiveDate,
					100.,
					0,
					strCurrency,
					org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
				),
				new org.drip.product.params.CreditSetting (
					30,
					java.lang.Double.NaN,
					true,
					strCreditCurveName,
					true
				),
				new org.drip.product.params.TerminationSetting (
					false,
					false,
					false,
					null
				),
				new org.drip.product.params.BondStream (
<span class="fc" id="L1357">					org.drip.product.creator.StreamBuilder.FirstPenultimateDateFixedFloat (</span>
						iEffectiveDate,
						iFixedStreamEndDate,
						iFixedFirstCouponDate,
						iFixedPenultimateCouponDate,
						iFixedFreq,
						dblFixedCoupon,
						strFixedCouponDC,
						strFixedAccrualDC,
						iMaturityDate,
						iFloatFirstCouponDate,
						iFloatPenultimateCouponDate,
						iFloatFreq,
						dblFloatSpread,
						dapPay,
						dapPeriodEnd,
						dapAccrualEnd,
<span class="fc" id="L1374">						org.drip.state.identifier.ForwardLabel.Standard (strFloatIndex),</span>
<span class="pc bpc" id="L1375" title="1 of 2 branches missed.">						!org.drip.numerical.common.StringUtil.IsEmpty (strCreditCurveName) ?</span>
<span class="pc" id="L1376">							org.drip.state.identifier.EntityCDSLabel.Standard (</span>
								strCreditCurveName,
								strCurrency
							) : null
					),
					iMaturityDate,
					&quot;&quot;
				),
				new org.drip.product.params.NotionalSetting (
					100.,
					strCurrency,
					null,
					org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_END,
					false
				)
			);
<span class="nc" id="L1392">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1393">			e.printStackTrace();</span>
		}

<span class="nc" id="L1396">		return null;</span>
	}

	/**
	 * Construct a Fixed To Float Bond Component
	 * 
	 * @param strName Bond Name
	 * @param strCreditCurveName Credit Curve Name
	 * @param iEffectiveDate Effective Date
	 * @param iFixedStreamEndDate Fixed Stream End Date
	 * @param iFixedFirstCouponDate Fixed Stream First Coupon Date
	 * @param iFixedFreq Fixed Stream Coupon Frequency
	 * @param dblFixedCoupon Fixed Stream Coupon Rate
	 * @param strFixedCouponDC Fixed Stream Coupon Day Count
	 * @param strFixedAccrualDC Fixed Stream Accrual Day Count
	 * @param iMaturityDate Maturity Date
	 * @param iFloatFirstCouponDate Float Stream First Coupon Date
	 * @param iFloatFreq Float Stream Coupon Frequency
	 * @param dblFloatSpread Float Stream Spread
	 * @param strFloatIndex Float Stream Rate Index
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * 
	 * @return The Bond Component
	 */

	public static final org.drip.product.credit.BondComponent FixedFToFloatF (
		final java.lang.String strName,
		final java.lang.String strCreditCurveName,
		final int iEffectiveDate,
		final int iFixedStreamEndDate,
		final int iFixedFirstCouponDate,
		final int iFixedFreq,
		final double dblFixedCoupon,
		final java.lang.String strFixedCouponDC,
		final java.lang.String strFixedAccrualDC,
		final int iMaturityDate,
		final int iFloatFirstCouponDate,
		final int iFloatFreq,
		final double dblFloatSpread,
		final java.lang.String strFloatIndex,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart)
	{
<span class="nc" id="L1452">		java.lang.String strPeriodTenor = (12 / iFixedFreq) + &quot;M&quot;;</span>

<span class="nc" id="L1454">		return FixedFPToFloatFP (</span>
			strName,
			strCreditCurveName,
			iEffectiveDate,
			iFixedStreamEndDate,
			iFixedFirstCouponDate,
			new org.drip.analytics.date.JulianDate (iFixedStreamEndDate).subtractTenor
<span class="nc" id="L1461">				(strPeriodTenor).julian(),</span>
			iFixedFreq,
			dblFixedCoupon,
			strFixedCouponDC,
			strFixedAccrualDC,
			iMaturityDate,
			iFloatFirstCouponDate,
<span class="nc" id="L1468">			new org.drip.analytics.date.JulianDate (iMaturityDate).subtractTenor (strPeriodTenor).julian(),</span>
			iFloatFreq,
			dblFloatSpread,
			strFloatIndex,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart
		);
	}

	/**
	 * Construct a Fixed To Float Bond Component
	 * 
	 * @param strName Bond Name
	 * @param strCreditCurveName Credit Curve Name
	 * @param iEffectiveDate Effective Date
	 * @param iFixedStreamEndDate Fixed Stream End Date
	 * @param iFixedFirstCouponDate Fixed Stream First Coupon Date
	 * @param iFixedFreq Fixed Stream Coupon Frequency
	 * @param dblFixedCoupon Fixed Stream Coupon Rate
	 * @param strFixedCouponDC Fixed Stream Coupon Day Count
	 * @param strFixedAccrualDC Fixed Stream Accrual Day Count
	 * @param iMaturityDate Maturity Date
	 * @param iFloatPenultimateCouponDate Float Stream Penultimate Coupon Date
	 * @param iFloatFreq Float Stream Coupon Frequency
	 * @param dblFloatSpread Float Stream Spread
	 * @param strFloatIndex Float Stream Rate Index
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * 
	 * @return The Bond Component
	 */

	public static final org.drip.product.credit.BondComponent FixedFToFloatP (
		final java.lang.String strName,
		final java.lang.String strCreditCurveName,
		final int iEffectiveDate,
		final int iFixedStreamEndDate,
		final int iFixedFirstCouponDate,
		final int iFixedFreq,
		final double dblFixedCoupon,
		final java.lang.String strFixedCouponDC,
		final java.lang.String strFixedAccrualDC,
		final int iMaturityDate,
		final int iFloatPenultimateCouponDate,
		final int iFloatFreq,
		final double dblFloatSpread,
		final java.lang.String strFloatIndex,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart)
	{
<span class="fc" id="L1536">		java.lang.String strPeriodTenor = (12 / iFixedFreq) + &quot;M&quot;;</span>

<span class="fc" id="L1538">		return FixedFPToFloatFP (</span>
			strName,
			strCreditCurveName,
			iEffectiveDate,
			iFixedStreamEndDate,
			iFixedFirstCouponDate,
			new org.drip.analytics.date.JulianDate (iFixedStreamEndDate).subtractTenor
<span class="fc" id="L1545">				(strPeriodTenor).julian(),</span>
			iFixedFreq,
			dblFixedCoupon,
			strFixedCouponDC,
			strFixedAccrualDC,
			iMaturityDate,
<span class="fc" id="L1551">			new org.drip.analytics.date.JulianDate (iFixedStreamEndDate).addTenor (strPeriodTenor).julian(),</span>
			iFloatPenultimateCouponDate,
			iFloatFreq,
			dblFloatSpread,
			strFloatIndex,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart
		);
	}

	/**
	 * Construct a Fixed To Float Bond Component
	 * 
	 * @param strName Bond Name
	 * @param strCreditCurveName Credit Curve Name
	 * @param iEffectiveDate Effective Date
	 * @param iFixedStreamEndDate Fixed Stream End Date
	 * @param iFixedPenultimateCouponDate Fixed Stream Penultimate Coupon Date
	 * @param iFixedFreq Fixed Stream Coupon Frequency
	 * @param dblFixedCoupon Fixed Stream Coupon Rate
	 * @param strFixedCouponDC Fixed Stream Coupon Day Count
	 * @param strFixedAccrualDC Fixed Stream Accrual Day Count
	 * @param iMaturityDate Maturity Date
	 * @param iFloatFirstCouponDate Float Stream First Coupon Date
	 * @param iFloatFreq Float Stream Coupon Frequency
	 * @param dblFloatSpread Float Stream Spread
	 * @param strFloatIndex Float Stream Rate Index
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * 
	 * @return The Bond Component
	 */

	public static final org.drip.product.credit.BondComponent FixedPToFloatF (
		final java.lang.String strName,
		final java.lang.String strCreditCurveName,
		final int iEffectiveDate,
		final int iFixedStreamEndDate,
		final int iFixedPenultimateCouponDate,
		final int iFixedFreq,
		final double dblFixedCoupon,
		final java.lang.String strFixedCouponDC,
		final java.lang.String strFixedAccrualDC,
		final int iMaturityDate,
		final int iFloatFirstCouponDate,
		final int iFloatFreq,
		final double dblFloatSpread,
		final java.lang.String strFloatIndex,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart)
	{
<span class="nc" id="L1620">		java.lang.String strPeriodTenor = (12 / iFixedFreq) + &quot;M&quot;;</span>

<span class="nc" id="L1622">		return FixedFPToFloatFP (</span>
			strName,
			strCreditCurveName,
			iEffectiveDate,
			iFixedStreamEndDate,
<span class="nc" id="L1627">			new org.drip.analytics.date.JulianDate (iEffectiveDate).addTenor (strPeriodTenor).julian(),</span>
			iFixedPenultimateCouponDate,
			iFixedFreq,
			dblFixedCoupon,
			strFixedCouponDC,
			strFixedAccrualDC,
			iMaturityDate,
			iFloatFirstCouponDate,
<span class="nc" id="L1635">			new org.drip.analytics.date.JulianDate (iMaturityDate).subtractTenor (strPeriodTenor).julian(),</span>
			iFloatFreq,
			dblFloatSpread,
			strFloatIndex,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart
		);
	}

	/**
	 * Construct a Fixed To Float Bond Component
	 * 
	 * @param strName Bond Name
	 * @param strCreditCurveName Credit Curve Name
	 * @param iEffectiveDate Effective Date
	 * @param iFixedStreamEndDate Fixed Stream End Date
	 * @param iFixedPenultimateCouponDate Fixed Stream Penultimate Coupon Date
	 * @param iFixedFreq Fixed Stream Coupon Frequency
	 * @param dblFixedCoupon Fixed Stream Coupon Rate
	 * @param strFixedCouponDC Fixed Stream Coupon Day Count
	 * @param strFixedAccrualDC Fixed Stream Accrual Day Count
	 * @param iMaturityDate Maturity Date
	 * @param iFloatPenultimateCouponDate Float Stream Penultimate Coupon Date
	 * @param iFloatFreq Float Stream Coupon Frequency
	 * @param dblFloatSpread Float Stream Spread
	 * @param strFloatIndex Float Stream Rate Index
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * 
	 * @return The Bond Component
	 */

	public static final org.drip.product.credit.BondComponent FixedPToFloatP (
		final java.lang.String strName,
		final java.lang.String strCreditCurveName,
		final int iEffectiveDate,
		final int iFixedStreamEndDate,
		final int iFixedPenultimateCouponDate,
		final int iFixedFreq,
		final double dblFixedCoupon,
		final java.lang.String strFixedCouponDC,
		final java.lang.String strFixedAccrualDC,
		final int iMaturityDate,
		final int iFloatPenultimateCouponDate,
		final int iFloatFreq,
		final double dblFloatSpread,
		final java.lang.String strFloatIndex,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart)
	{
<span class="nc" id="L1703">		java.lang.String strPeriodTenor = (12 / iFixedFreq) + &quot;M&quot;;</span>

<span class="nc" id="L1705">		return FixedFPToFloatFP (</span>
			strName,
			strCreditCurveName,
			iEffectiveDate,
			iFixedStreamEndDate,
<span class="nc" id="L1710">			new org.drip.analytics.date.JulianDate (iEffectiveDate).addTenor (strPeriodTenor).julian(),</span>
			iFixedPenultimateCouponDate,
			iFixedFreq,
			dblFixedCoupon,
			strFixedCouponDC,
			strFixedAccrualDC,
			iMaturityDate,
<span class="nc" id="L1717">			new org.drip.analytics.date.JulianDate (iFixedStreamEndDate).addTenor (strPeriodTenor).julian(),</span>
			iFloatPenultimateCouponDate,
			iFloatFreq,
			dblFloatSpread,
			strFloatIndex,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart
		);
	}

	/**
	 * Create a Simple OTF Fix Float Floating Rate Bond
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Bond object
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleOTCIRSFloater (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="pc bpc" id="L1764" title="6 of 12 branches missed.">		if (null == strName || strName.isEmpty() || null == strCurrency || strCurrency.isEmpty() || null ==</span>
<span class="pc bpc" id="L1765" title="1 of 2 branches missed.">			dtEffective || null == dtMaturity || !org.drip.numerical.common.NumberUtil.IsValid (dblSpread))</span>
<span class="nc" id="L1766">			return null;</span>

<span class="fc" id="L1768">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strCurrency
			),
			new org.drip.product.params.CouponSetting (
				fsCoupon,
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			new org.drip.product.params.FloaterSetting (
<span class="fc" id="L1784">				org.drip.state.identifier.OTCFixFloatLabel.Standard (strRateIndex),</span>
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN
			),
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="fc" id="L1792">				dtEffective.julian(),</span>
				100.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				true
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				null
			),
<span class="fc" id="L1811">			org.drip.product.params.BondStream.Create (</span>
<span class="fc" id="L1812">				dtMaturity.julian(),</span>
<span class="fc" id="L1813">				dtEffective.julian(),</span>
				java.lang.Integer.MIN_VALUE,
				java.lang.Integer.MIN_VALUE,
<span class="fc" id="L1816">				dtEffective.julian(),</span>
				iFreq,
				dblSpread,
				strDayCount,
				strDayCount,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
<span class="pc bpc" id="L1833" title="1 of 2 branches missed.">				org.drip.state.identifier.OTCFixFloatLabel.Standard (strRateIndex),</span>
<span class="pc bpc" id="L1834" title="1 of 2 branches missed.">				null == strCreditCurveName || strCreditCurveName.isEmpty() ? null :</span>
<span class="fc" id="L1835">					org.drip.state.identifier.EntityCDSLabel.Standard (</span>
						strCreditCurveName,
						strCurrency
					)
				),
			new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
				fsPrincipalOutstanding,
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_END,
				false
			)
		);
	}

	/**
	 * Create a OTC Fix Float Index Floating Rate Bond from the First and Penultimate Coupon Dates, and the
	 *  other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param iFirstCouponDate First Coupon Date
	 * @param iPenultimateCouponDate Penultimate Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Floating Rate Bond Instance
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleOTCIRSFloaterFP (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iFirstCouponDate,
		final int iPenultimateCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc bnc" id="L1902" title="All 12 branches missed.">		if (null == strName || strName.isEmpty() || null == strCurrency || strCurrency.isEmpty() || null ==</span>
<span class="nc bnc" id="L1903" title="All 2 branches missed.">			dtEffective || null == dtMaturity || !org.drip.numerical.common.NumberUtil.IsValid (dblSpread))</span>
<span class="nc" id="L1904">			return null;</span>

<span class="nc" id="L1906">		return CreateBondFromParams (</span>
			null,
			new org.drip.product.params.IdentifierSet (
				strName,
				strName,
				strName,
				strCurrency
			),
			new org.drip.product.params.CouponSetting (
				fsCoupon,
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN,
				java.lang.Double.NaN
			),
			new org.drip.product.params.FloaterSetting (
<span class="nc" id="L1922">				org.drip.state.identifier.OTCFixFloatLabel.Standard (strRateIndex),</span>
				&quot;&quot;,
				dblSpread,
				java.lang.Double.NaN
			),
			new org.drip.product.params.QuoteConvention (
				null,
				&quot;&quot;,
<span class="nc" id="L1930">				dtEffective.julian(),</span>
				100.,
				0,
				strCurrency,
				org.drip.analytics.daycount.Convention.DATE_ROLL_ACTUAL
			),
			new org.drip.product.params.CreditSetting (
				30,
				java.lang.Double.NaN,
				true,
				strCreditCurveName,
				true
			),
			new org.drip.product.params.TerminationSetting (
				false,
				false,
				false,
				dapMaturity
			),
<span class="nc" id="L1949">			org.drip.product.params.BondStream.FromFirstPenultimateCouponDate (</span>
<span class="nc" id="L1950">				dtMaturity.julian(),</span>
<span class="nc" id="L1951">				dtEffective.julian(),</span>
<span class="nc" id="L1952">				dtMaturity.julian(),</span>
				iFirstCouponDate,
				iPenultimateCouponDate,
				iFreq,
				dblSpread,
				strDayCount,
				strDayCount,
				dapPay,
				dapReset,
				dapMaturity,
				dapEffective,
				dapPeriodEnd,
				dapAccrualEnd,
				dapPeriodStart,
				dapAccrualStart,
				&quot;&quot;,
				false,
				strCurrency,
				strCurrency,
<span class="nc bnc" id="L1971" title="All 2 branches missed.">				org.drip.state.identifier.OTCFixFloatLabel.Standard (strRateIndex),</span>
<span class="nc bnc" id="L1972" title="All 2 branches missed.">				null == strCreditCurveName || strCreditCurveName.isEmpty() ? null :</span>
<span class="nc" id="L1973">					org.drip.state.identifier.EntityCDSLabel.Standard (</span>
						strCreditCurveName,
						strCurrency
					)
				),
			new org.drip.product.params.NotionalSetting (
				100.,
				strCurrency,
				fsPrincipalOutstanding,
				org.drip.product.params.NotionalSetting.PERIOD_AMORT_AT_END,
				false
			)
		);
	}

	/**
	 * Create a OTC Fix Float Index Floating Rate Bond from the First and Penultimate Coupon Dates, and the
	 *  other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param iFirstCouponDate First Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Floating Rate Bond Instance
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleOTCIRSFloaterF (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iFirstCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc" id="L2038">		return CreateSimpleFloaterFP (</span>
			strName,
			strCurrency,
			strRateIndex,
			strCreditCurveName,
			dblSpread,
			iFreq,
			strDayCount,
			dtEffective,
			dtMaturity,
			iFirstCouponDate,
<span class="nc" id="L2049">			dtMaturity.subtractTenor ((12 / iFreq) + &quot;M&quot;).julian(),</span>
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart,
			fsPrincipalOutstanding,
			fsCoupon
		);
	}

	/**
	 * Create a OTC Fix-Float Index Floating Rate Bond from the First and Penultimate Coupon Dates, and the
	 *  other Parameters
	 * 
	 * @param strName Bond Name
	 * @param strCurrency Bond Currency
	 * @param strRateIndex Floating Rate Index
	 * @param strCreditCurveName Credit Curve Name
	 * @param dblSpread Bond Floater Spread
	 * @param iFreq Coupon Frequency
	 * @param strDayCount Coupon Day Count Convention
	 * @param dtEffective Effective date
	 * @param dtMaturity Maturity Date
	 * @param iPenultimateCouponDate Penultimate Coupon Date
	 * @param dapPay Pay Date Adjustment Parameters
	 * @param dapReset Reset Date Adjustment Parameters
	 * @param dapMaturity Maturity Date Adjustment Parameters
	 * @param dapEffective Effective Date Adjustment Parameters
	 * @param dapPeriodEnd Period End Date Adjustment Parameters
	 * @param dapAccrualEnd Accrual Date Adjustment Parameters
	 * @param dapPeriodStart Period Start Date Adjustment Parameters
	 * @param dapAccrualStart Accrual Start  Date Adjustment Parameters
	 * @param fsPrincipalOutstanding Outstanding Principal Schedule
	 * @param fsCoupon Coupon Schedule
	 * 
	 * @return The Floating Rate Bond Instance
	 */

	public static final org.drip.product.credit.BondComponent CreateSimpleOTCIRSFloaterP (
		final java.lang.String strName,
		final java.lang.String strCurrency,
		final java.lang.String strRateIndex,
		final java.lang.String strCreditCurveName,
		final double dblSpread,
		final int iFreq,
		final java.lang.String strDayCount,
		final org.drip.analytics.date.JulianDate dtEffective,
		final org.drip.analytics.date.JulianDate dtMaturity,
		final int iPenultimateCouponDate,
		final org.drip.analytics.daycount.DateAdjustParams dapPay,
		final org.drip.analytics.daycount.DateAdjustParams dapReset,
		final org.drip.analytics.daycount.DateAdjustParams dapMaturity,
		final org.drip.analytics.daycount.DateAdjustParams dapEffective,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualEnd,
		final org.drip.analytics.daycount.DateAdjustParams dapPeriodStart,
		final org.drip.analytics.daycount.DateAdjustParams dapAccrualStart,
		final org.drip.numerical.common.Array2D fsPrincipalOutstanding,
		final org.drip.numerical.common.Array2D fsCoupon)
	{
<span class="nc" id="L2113">		return CreateSimpleFloaterFP (</span>
			strName,
			strCurrency,
			strRateIndex,
			strCreditCurveName,
			dblSpread,
			iFreq,
			strDayCount,
			dtEffective,
			dtMaturity,
<span class="nc" id="L2123">			dtEffective.addTenor ((12 / iFreq) + &quot;M&quot;).julian(),</span>
			iPenultimateCouponDate,
			dapPay,
			dapReset,
			dapMaturity,
			dapEffective,
			dapPeriodEnd,
			dapAccrualEnd,
			dapPeriodStart,
			dapAccrualStart,
			fsPrincipalOutstanding,
			fsCoupon
		);
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>