<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BulletMetrics.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.analytics.output</a> &gt; <span class="el_source">BulletMetrics.java</span></div><h1>BulletMetrics.java</h1><pre class="source lang-java linenums">
package org.drip.analytics.output;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2019 Lakshmi Krishnamurthy
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * Copyright (C) 2017 Lakshmi Krishnamurthy
 * Copyright (C) 2016 Lakshmi Krishnamurthy
 * Copyright (C) 2015 Lakshmi Krishnamurthy
 * Copyright (C) 2014 Lakshmi Krishnamurthy
 * 
 *  This file is part of DROP, an open-source library targeting risk, transaction costs, exposure, margin
 *  	calculations, and portfolio construction within and across fixed income, credit, commodity, equity,
 *  	FX, and structured products.
 *  
 *  	https://lakshmidrip.github.io/DROP/
 *  
 *  DROP is composed of three main modules:
 *  
 *  - DROP Analytics Core - https://lakshmidrip.github.io/DROP-Analytics-Core/
 *  - DROP Portfolio Core - https://lakshmidrip.github.io/DROP-Portfolio-Core/
 *  - DROP Numerical Core - https://lakshmidrip.github.io/DROP-Numerical-Core/
 * 
 * 	DROP Analytics Core implements libraries for the following:
 * 	- Fixed Income Analytics
 * 	- Asset Backed Analytics
 * 	- XVA Analytics
 * 	- Exposure and Margin Analytics
 * 
 * 	DROP Portfolio Core implements libraries for the following:
 * 	- Asset Allocation Analytics
 * 	- Transaction Cost Analytics
 * 
 * 	DROP Numerical Core implements libraries for the following:
 * 	- Statistical Learning Library
 * 	- Numerical Optimizer Library
 * 	- Machine Learning Library
 * 	- Spline Builder Library
 * 
 * 	Documentation for DROP is Spread Over:
 * 
 * 	- Main                     =&gt; https://lakshmidrip.github.io/DROP/
 * 	- Wiki                     =&gt; https://github.com/lakshmiDRIP/DROP/wiki
 * 	- GitHub                   =&gt; https://github.com/lakshmiDRIP/DROP
 * 	- Javadoc                  =&gt; https://lakshmidrip.github.io/DROP/Javadoc/index.html
 * 	- Technical Specifications =&gt; https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal
 * 	- Release Versions         =&gt; https://lakshmidrip.github.io/DROP/version.html
 * 	- Community Credits        =&gt; https://lakshmidrip.github.io/DROP/credits.html
 * 	- Issues Catalog           =&gt; https://github.com/lakshmiDRIP/DROP/issues
 * 	- JUnit                    =&gt; https://lakshmidrip.github.io/DROP/junit/index.html
 * 	- Jacoco                   =&gt; https://lakshmidrip.github.io/DROP/jacoco/index.html
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;BulletMetrics&lt;/i&gt; holds the results of the Bullet Cash flow metrics estimate output.
 *
 *	&lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Module &lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/AnalyticsCore.md&quot;&gt;Analytics Core Module&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Library&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/FixedIncomeAnalyticsLibrary.md&quot;&gt;Fixed Income Analytics&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/analytics&quot;&gt;Analytics&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/analytics/output&quot;&gt;Output&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 *
 * @author Lakshmi Krishnamurthy
 */

public class BulletMetrics {

	/*
	 * Bullet Latent State Identification Support Fields
	 */

<span class="nc" id="L91">	private org.drip.state.identifier.EntityCDSLabel _creditLabel = null;</span>
<span class="nc" id="L92">	private org.drip.state.identifier.FundingLabel _fundingLabel = null;</span>
<span class="nc" id="L93">	private org.drip.state.identifier.FXLabel _fxLabel = null;</span>

	/*
	 * Bullet Parameters Specification Fields
	 */

<span class="nc" id="L99">	private int _iTerminalDate = java.lang.Integer.MIN_VALUE;</span>
<span class="nc" id="L100">	private int _iPayDate = java.lang.Integer.MIN_VALUE;</span>
<span class="nc" id="L101">	private double _dblNotional = java.lang.Double.NaN;</span>

	/*
	 * Bullet State Point Value Fields
	 */

<span class="nc" id="L107">	private double _dblSurvival = java.lang.Double.NaN;</span>
<span class="nc" id="L108">	private double _dblDF = java.lang.Double.NaN;</span>
<span class="nc" id="L109">	private double _dblFX = java.lang.Double.NaN;</span>

	/*
	 * Bullet Convexity Adjustment Fields
	 */

<span class="nc" id="L115">	private org.drip.analytics.output.ConvexityAdjustment _convAdj = null;</span>

	/**
	 * BulletMetrics Constructor
	 * 
	 * @param iTerminalDate Terminal Date
	 * @param iPayDate Pay Date
	 * @param dblNotional Notional
	 * @param dblSurvival Terminal Survival
	 * @param dblDF Terminal Discount Factor
	 * @param dblFX Terminal FX Rate
	 * @param convAdj Terminal Convexity Adjustment
	 * @param creditLabel The Credit Label
	 * @param fundingLabel The Funding Label
	 * @param fxLabel The FX Label
	 * 
	 * @throws java.lang.Exception Thrown if Inputs are invalid
	 */

	public BulletMetrics (
		final int iTerminalDate,
		final int iPayDate,
		final double dblNotional,
		final double dblSurvival,
		final double dblDF,
		final double dblFX,
		final org.drip.analytics.output.ConvexityAdjustment convAdj,
		final org.drip.state.identifier.EntityCDSLabel creditLabel,
		final org.drip.state.identifier.FundingLabel fundingLabel,
		final org.drip.state.identifier.FXLabel fxLabel)
		throws java.lang.Exception
<span class="nc" id="L146">	{</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">		if (!org.drip.quant.common.NumberUtil.IsValid (_dblNotional = dblNotional) ||</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">			!org.drip.quant.common.NumberUtil.IsValid (_dblSurvival = dblSurvival) ||</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">				!org.drip.quant.common.NumberUtil.IsValid (_dblDF = dblDF) ||</span>
<span class="nc bnc" id="L150" title="All 6 branches missed.">					!org.drip.quant.common.NumberUtil.IsValid (_dblFX = dblFX) || null == (_convAdj =</span>
						convAdj) || null == (_fundingLabel = fundingLabel))
<span class="nc" id="L152">			throw new java.lang.Exception (&quot;BulletMetrics ctr: Invalid Inputs&quot;);</span>

<span class="nc" id="L154">		_fxLabel = fxLabel;</span>
<span class="nc" id="L155">		_iPayDate = iPayDate;</span>
<span class="nc" id="L156">		_creditLabel = creditLabel;</span>
<span class="nc" id="L157">		_iTerminalDate = iTerminalDate;</span>
<span class="nc" id="L158">	}</span>

	/**
	 * Retrieve the Terminal Date
	 * 
	 * @return The Terminal Date
	 */

	public int terminalDate()
	{
<span class="nc" id="L168">		return _iTerminalDate;</span>
	}

	/**
	 * Retrieve the Pay Date
	 * 
	 * @return The Pay Date
	 */

	public int payDate()
	{
<span class="nc" id="L179">		return _iPayDate;</span>
	}

	/**
	 * Retrieve the Terminal Notional
	 * 
	 * @return The Terminal Notional
	 */

	public double notional()
	{
<span class="nc" id="L190">		return _dblNotional;</span>
	}

	/**
	 * Retrieve the Terminal Survival Probability
	 * 
	 * @return The Terminal Survival Probability
	 */

	public double survival()
	{
<span class="nc" id="L201">		return _dblSurvival;</span>
	}

	/**
	 * Retrieve the Terminal DF
	 * 
	 * @return The Terminal DF
	 */

	public double df()
	{
<span class="nc" id="L212">		return _dblDF;</span>
	}

	/**
	 * Retrieve the Terminal FX Rate
	 * 
	 * @return The Terminal FX Rate
	 */

	public double fx()
	{
<span class="nc" id="L223">		return _dblFX;</span>
	}

	/**
	 * Retrieve the Terminal Annuity in the Pay Currency
	 * 
	 * @return The Terminal Annuity in the Pay Currency
	 */

	public double annuity()
	{
<span class="nc" id="L234">		return _dblNotional * _dblSurvival * _dblDF * _dblFX;</span>
	}

	/**
	 * Retrieve the Terminal Convexity Adjustment
	 * 
	 * @return The Terminal Convexity Adjustment
	 */

	public org.drip.analytics.output.ConvexityAdjustment convexityAdjustment()
	{
<span class="nc" id="L245">		return _convAdj;</span>
	}

	/**
	 * Retrieve the Terminal Survival Probability Loading Coefficient for the specified Credit Latent State
	 * 
	 * @param creditLabel The Credit Label
	 * 
	 * @return The Terminal Survival Probability Loading Coefficient for the specified Credit Latent State
	 */

	public java.util.Map&lt;java.lang.Integer, java.lang.Double&gt; survivalProbabilityCreditLoading (
		final org.drip.state.identifier.EntityCDSLabel creditLabel)
	{
<span class="nc bnc" id="L259" title="All 4 branches missed.">		if (null == creditLabel || !creditLabel.match (_creditLabel)) return null;</span>

<span class="nc" id="L261">		java.util.Map&lt;java.lang.Integer, java.lang.Double&gt; mapSurvivalProbabilityLoading = new</span>
			java.util.TreeMap&lt;java.lang.Integer, java.lang.Double&gt;();

<span class="nc" id="L264">		mapSurvivalProbabilityLoading.put (_iPayDate, _dblNotional * _dblDF * _dblFX *</span>
<span class="nc" id="L265">			_convAdj.cumulative());</span>

<span class="nc" id="L267">		return mapSurvivalProbabilityLoading;</span>
	}

	/**
	 * Retrieve the Discount Factor Loading Coefficient for the specified Funding Latent State
	 * 
	 * @param fundingLabel The Funding Label
	 * 
	 * @return The Discount Factor Loading Coefficient for the specified Funding Latent State
	 */

	public java.util.Map&lt;java.lang.Integer, java.lang.Double&gt; discountFactorFundingLoading (
		final org.drip.state.identifier.FundingLabel fundingLabel)
	{
<span class="nc bnc" id="L281" title="All 4 branches missed.">		if (null == fundingLabel || !fundingLabel.match (_fundingLabel)) return null;</span>

<span class="nc" id="L283">		java.util.Map&lt;java.lang.Integer, java.lang.Double&gt; mapDiscountFactorLoading = new</span>
			java.util.TreeMap&lt;java.lang.Integer, java.lang.Double&gt;();

<span class="nc" id="L286">		mapDiscountFactorLoading.put (_iPayDate, _dblNotional * _dblSurvival * _dblFX *</span>
<span class="nc" id="L287">			_convAdj.cumulative());</span>

<span class="nc" id="L289">		return mapDiscountFactorLoading;</span>
	}

	/**
	 * Retrieve the FX Loading Coefficient for the specified FX Latent State
	 * 
	 * @param fxLabel The FX Label
	 * 
	 * @return The FX Loading Coefficient for the specified FX Latent State
	 */

	public java.util.Map&lt;java.lang.Integer, java.lang.Double&gt; fxFXLoading (
		final org.drip.state.identifier.FXLabel fxLabel)
	{
<span class="nc bnc" id="L303" title="All 4 branches missed.">		if (null == fxLabel || !fxLabel.match (_fxLabel)) return null;</span>

<span class="nc" id="L305">		java.util.Map&lt;java.lang.Integer, java.lang.Double&gt; mapFXLoading = new</span>
			java.util.TreeMap&lt;java.lang.Integer, java.lang.Double&gt;();

<span class="nc" id="L308">		mapFXLoading.put (_iPayDate, _dblNotional * _dblSurvival * _dblDF * _convAdj.cumulative());</span>

<span class="nc" id="L310">		return mapFXLoading;</span>
	}

	/**
	 * Retrieve the Credit Label
	 * 
	 * @return The Credit Label
	 */

	public org.drip.state.identifier.EntityCDSLabel creditLabel()
	{
<span class="nc" id="L321">		return _creditLabel;</span>
	}

	/**
	 * Retrieve the Funding Label
	 * 
	 * @return The Funding Label
	 */

	public org.drip.state.identifier.FundingLabel fundingLabel()
	{
<span class="nc" id="L332">		return _fundingLabel;</span>
	}

	/**
	 * Retrieve the FX Label
	 * 
	 * @return The FX Label
	 */

	public org.drip.state.identifier.FXLabel fxLabel()
	{
<span class="nc" id="L343">		return _fxLabel;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>