<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CreditStaticAndMarks.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.feed.loader</a> &gt; <span class="el_source">CreditStaticAndMarks.java</span></div><h1>CreditStaticAndMarks.java</h1><pre class="source lang-java linenums">
package org.drip.feed.loader;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2020 Lakshmi Krishnamurthy
 * Copyright (C) 2019 Lakshmi Krishnamurthy
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * Copyright (C) 2017 Lakshmi Krishnamurthy
 * Copyright (C) 2016 Lakshmi Krishnamurthy
 * Copyright (C) 2015 Lakshmi Krishnamurthy
 * Copyright (C) 2014 Lakshmi Krishnamurthy
 * Copyright (C) 2013 Lakshmi Krishnamurthy
 * Copyright (C) 2012 Lakshmi Krishnamurthy
 * Copyright (C) 2011 Lakshmi Krishnamurthy
 * 
 *  This file is part of DROP, an open-source library targeting analytics/risk, transaction cost analytics,
 *  	asset liability management analytics, capital, exposure, and margin analytics, valuation adjustment
 *  	analytics, and portfolio construction analytics within and across fixed income, credit, commodity,
 *  	equity, FX, and structured products. It also includes auxiliary libraries for algorithm support,
 *  	numerical analysis, numerical optimization, spline builder, model validation, statistical learning,
 *  	and computational support.
 *  
 *  	https://lakshmidrip.github.io/DROP/
 *  
 *  DROP is composed of three modules:
 *  
 *  - DROP Product Core - https://lakshmidrip.github.io/DROP-Product-Core/
 *  - DROP Portfolio Core - https://lakshmidrip.github.io/DROP-Portfolio-Core/
 *  - DROP Computational Core - https://lakshmidrip.github.io/DROP-Computational-Core/
 * 
 * 	DROP Product Core implements libraries for the following:
 * 	- Fixed Income Analytics
 * 	- Loan Analytics
 * 	- Transaction Cost Analytics
 * 
 * 	DROP Portfolio Core implements libraries for the following:
 * 	- Asset Allocation Analytics
 *  - Asset Liability Management Analytics
 * 	- Capital Estimation Analytics
 * 	- Exposure Analytics
 * 	- Margin Analytics
 * 	- XVA Analytics
 * 
 * 	DROP Computational Core implements libraries for the following:
 * 	- Algorithm Support
 * 	- Computation Support
 * 	- Function Analysis
 *  - Model Validation
 * 	- Numerical Analysis
 * 	- Numerical Optimizer
 * 	- Spline Builder
 *  - Statistical Learning
 * 
 * 	Documentation for DROP is Spread Over:
 * 
 * 	- Main                     =&gt; https://lakshmidrip.github.io/DROP/
 * 	- Wiki                     =&gt; https://github.com/lakshmiDRIP/DROP/wiki
 * 	- GitHub                   =&gt; https://github.com/lakshmiDRIP/DROP
 * 	- Repo Layout Taxonomy     =&gt; https://github.com/lakshmiDRIP/DROP/blob/master/Taxonomy.md
 * 	- Javadoc                  =&gt; https://lakshmidrip.github.io/DROP/Javadoc/index.html
 * 	- Technical Specifications =&gt; https://github.com/lakshmiDRIP/DROP/tree/master/Docs/Internal
 * 	- Release Versions         =&gt; https://lakshmidrip.github.io/DROP/version.html
 * 	- Community Credits        =&gt; https://lakshmidrip.github.io/DROP/credits.html
 * 	- Issues Catalog           =&gt; https://github.com/lakshmiDRIP/DROP/issues
 * 	- JUnit                    =&gt; https://lakshmidrip.github.io/DROP/junit/index.html
 * 	- Jacoco                   =&gt; https://lakshmidrip.github.io/DROP/jacoco/index.html
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * &lt;i&gt;CreditStaticAndMarks&lt;/i&gt; contains functionality to load a variety of Credit and Rates Product reference
 * data and closing marks. It exposes the following functionality:
 * &lt;ul&gt;
 * 	&lt;li&gt;
 * 		Load the bond reference data, static data, amortization schedule and EOS
 * 	&lt;/li&gt;
 * 	&lt;li&gt;
 * 		Build the bond instance entities from the reference data
 * 	&lt;/li&gt;
 * 	&lt;li&gt;
 * 		Load the bond, CDS, and Rates product Closing Marks
 * 	&lt;/li&gt;
 * 	&lt;li&gt;
 * 		Load and build the Holiday Calendars
 * 	&lt;/li&gt;
 * &lt;/ul&gt;
 * 	&lt;br&gt;
 * 
 * CreditStaticAndMarks assumes the appropriate connections are available to load the data.
 *
 *	&lt;br&gt;&lt;br&gt;
 *  &lt;ul&gt;
 *		&lt;li&gt;&lt;b&gt;Module &lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/ComputationalCore.md&quot;&gt;Computational Core Module&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Library&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/ComputationSupportLibrary.md&quot;&gt;Computation Support&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Project&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/feed/README.md&quot;&gt;Load, Transform, and compute Target Metrics across Feeds&lt;/a&gt;&lt;/li&gt;
 *		&lt;li&gt;&lt;b&gt;Package&lt;/b&gt; = &lt;a href = &quot;https://github.com/lakshmiDRIP/DROP/tree/master/src/main/java/org/drip/feed/loader/README.md&quot;&gt;Reference/Market Data Feed Loader&lt;/a&gt;&lt;/li&gt;
 *  &lt;/ul&gt;
 * 
 * @author Lakshmi Krishnamurthy
 */

<span class="nc" id="L118">class CreditStaticAndMarks {</span>
	private static final boolean m_bBlog = false;
<span class="nc" id="L120">	private static java.lang.String INVALID_BBG_FIELD_START = &quot;#N/A&quot;;</span>

	public static java.lang.String makeSQLClearISINOrCUSIP (
		final java.lang.String[] astrRecord)
	{
<span class="nc bnc" id="L125" title="All 4 branches missed.">		if (null == astrRecord || 0 == astrRecord.length) return null;</span>

<span class="nc" id="L127">		java.lang.String strISIN = astrRecord[1];</span>
<span class="nc" id="L128">		java.lang.String strCUSIP = astrRecord[0];</span>

<span class="nc bnc" id="L130" title="All 4 branches missed.">		if (null == strISIN || strISIN.isEmpty()) return null;</span>

<span class="nc bnc" id="L132" title="All 4 branches missed.">		if (null == strCUSIP || strCUSIP.isEmpty()) return null;</span>

<span class="nc" id="L134">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

<span class="nc" id="L136">		sb.append (&quot;delete from BondRef where ISIN = '&quot;).append (strISIN).append (&quot;' or CUSIP = '&quot;).append</span>
<span class="nc" id="L137">			(strCUSIP).append (&quot;'&quot;);</span>

<span class="nc" id="L139">		return sb.toString();</span>
	}

	private static java.lang.String makeSQLClearMarksForBondDate (
		final java.lang.String[] astrRecord)
	{
<span class="nc bnc" id="L145" title="All 4 branches missed.">		if (null == astrRecord || 0 == astrRecord.length) return null;</span>

<span class="nc" id="L147">		java.lang.String strIDType = astrRecord[6];</span>

<span class="nc bnc" id="L149" title="All 6 branches missed.">		if (null == strIDType || 0 == strIDType.length() || (!&quot;ISIN&quot;.equalsIgnoreCase (strIDType) &amp;&amp;</span>
<span class="nc bnc" id="L150" title="All 2 branches missed.">			!&quot;CUSIP&quot;.equalsIgnoreCase (strIDType))) {</span>
<span class="nc" id="L151">			System.out.println (&quot;Unknown ID Type: &quot; + strIDType);</span>

<span class="nc" id="L153">			return null;</span>
		}

<span class="nc" id="L156">		java.lang.String strID = astrRecord[1];</span>
<span class="nc" id="L157">		java.lang.String strORAMarkDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L160">			strORAMarkDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L161">				(astrRecord[3].trim());</span>
<span class="nc" id="L162">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L163">			System.out.println (&quot;Bad mark date &quot; + astrRecord[1] + &quot; for &quot; + strIDType + &quot; &quot; + strID);</span>

<span class="nc" id="L165">			return null;</span>
<span class="nc" id="L166">		}</span>

<span class="nc" id="L168">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

<span class="nc" id="L170">		sb.append (&quot;delete from BondMarks where ID = '&quot;).append (strID).append (&quot;' and MarkDate = '&quot;).append</span>
<span class="nc" id="L171">			(strORAMarkDate).append (&quot;'&quot;);</span>

<span class="nc" id="L173">		return sb.toString();</span>
	}

	private static java.lang.String makeSQLBondMarksInsert (
		final java.lang.String[] astrRecord)
	{
<span class="nc bnc" id="L179" title="All 4 branches missed.">		if (null == astrRecord || 0 == astrRecord.length) return null;</span>

<span class="nc" id="L181">		java.lang.String strIDType = astrRecord[6];</span>

<span class="nc bnc" id="L183" title="All 6 branches missed.">		if (null == strIDType || 0 == strIDType.length() || (!&quot;ISIN&quot;.equalsIgnoreCase (strIDType) &amp;&amp;</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">			!&quot;CUSIP&quot;.equalsIgnoreCase (strIDType))) {</span>
<span class="nc" id="L185">			System.out.println (&quot;Unknown ID Type: &quot; + strIDType);</span>

<span class="nc" id="L187">			return null;</span>
		}

<span class="nc" id="L190">		java.lang.String strID = astrRecord[1];</span>
<span class="nc" id="L191">		java.lang.String strORAMarkDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L194">			strORAMarkDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate (astrRecord[3].trim());</span>
<span class="nc" id="L195">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L196">			System.out.println (&quot;Bad mark date &quot; + astrRecord[1] + &quot; for &quot; + strIDType + &quot; &quot; + strID);</span>

<span class="nc" id="L198">			return null;</span>
<span class="nc" id="L199">		}</span>

<span class="nc" id="L201">		double dblMarkValue = java.lang.Double.NaN;</span>

		try {
<span class="nc" id="L204">			dblMarkValue = java.lang.Double.parseDouble (astrRecord[2].trim());</span>
<span class="nc" id="L205">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L206">			System.out.println (&quot;Bad mark &quot; + astrRecord[2] + &quot; for &quot; + strIDType + &quot; &quot; + strID);</span>

<span class="nc" id="L208">			return null;</span>
<span class="nc" id="L209">		}</span>

<span class="nc" id="L211">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

<span class="nc" id="L213">		sb.append (&quot;insert into BondMarks values('&quot;).append (strIDType).append (&quot;', '&quot;).append (strID).append</span>
<span class="nc" id="L214">			(&quot;', '&quot;).append (strORAMarkDate).append (&quot;', &quot;).append (dblMarkValue).append (&quot;)&quot;);</span>

<span class="nc" id="L216">		return sb.toString();</span>
	}

	private static java.lang.String makeSQLClear_FODATA (
		final java.lang.String[] astrValRecord)
	{
<span class="nc bnc" id="L222" title="All 4 branches missed.">		if (null == astrValRecord || 0 == astrValRecord.length) return null;</span>

<span class="nc" id="L224">		java.lang.String strISIN = astrValRecord[40];</span>

<span class="nc bnc" id="L226" title="All 4 branches missed.">		if (null == strISIN || strISIN.isEmpty()) return null;</span>

<span class="nc" id="L228">		return &quot;delete from BondRef where ISIN = '&quot; + strISIN + &quot;'&quot;;</span>
	}

	private static java.lang.String makeSQLInsert_FODATA (
		final java.lang.String[] astrValRecord)
	{
<span class="nc bnc" id="L234" title="All 4 branches missed.">		if (null == astrValRecord || 0 == astrValRecord.length) return null;</span>

<span class="nc" id="L236">		java.lang.String strCUSIP = astrValRecord[42];</span>

<span class="nc bnc" id="L238" title="All 4 branches missed.">		if (null == strCUSIP || strCUSIP.isEmpty()) return null;</span>

<span class="nc" id="L240">		java.lang.String strISIN = astrValRecord[40];</span>

<span class="nc bnc" id="L242" title="All 4 branches missed.">		if (null == strISIN || strISIN.isEmpty()) return null;</span>

<span class="nc" id="L244">		java.lang.String strName = astrValRecord[59];</span>

<span class="nc bnc" id="L246" title="All 4 branches missed.">		if (null == strName || strName.isEmpty()) return null;</span>

<span class="nc" id="L248">		java.lang.String strDescription = astrValRecord[59];</span>

<span class="nc bnc" id="L250" title="All 4 branches missed.">		if (null == strDescription || strDescription.isEmpty()) return null;</span>

<span class="nc" id="L252">		java.lang.String strTicker = astrValRecord[3];</span>

<span class="nc bnc" id="L254" title="All 4 branches missed.">		if (null == strTicker || strTicker.isEmpty()) return null;</span>

<span class="nc" id="L256">		double dblCoupon = 0.;</span>

		try {
<span class="nc" id="L259">			dblCoupon = java.lang.Double.parseDouble (astrValRecord[4].trim());</span>
<span class="nc" id="L260">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog) System.out.println (&quot;Bad coupon &quot; + astrValRecord[4] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L262">		}</span>

<span class="nc" id="L264">		java.lang.String strOracleMaturity = &quot;&quot;;</span>

		try {
<span class="nc" id="L267">			strOracleMaturity = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L268">				(astrValRecord[5].trim());</span>
<span class="nc" id="L269">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L270">			System.out.println (&quot;Bad maturity &quot; + astrValRecord[5] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L272">			return null;</span>
<span class="nc" id="L273">		}</span>

<span class="nc" id="L275">		java.lang.String strOracleAnnounce = &quot;&quot;;</span>

		try {
<span class="nc" id="L278">			strOracleAnnounce = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L279">				(astrValRecord[29].trim());</span>
<span class="nc" id="L280">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog)
				System.out.println (&quot;Bad announce date &quot; + astrValRecord[29] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L283">		}</span>

<span class="nc" id="L285">		java.lang.String strOracleFirstSettle = &quot;&quot;;</span>

		try {
<span class="nc" id="L288">			strOracleFirstSettle = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L289">				(astrValRecord[31].trim());</span>
<span class="nc" id="L290">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L291">			System.out.println (&quot;Bad first settle &quot; + astrValRecord[31] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L293">			return null;</span>
<span class="nc" id="L294">		}</span>

<span class="nc" id="L296">		java.lang.String strOracleFirstCoupon = &quot;&quot;;</span>

		try {
<span class="nc" id="L299">			strOracleFirstCoupon = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L300">				(astrValRecord[33].trim());</span>
<span class="nc" id="L301">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L302">		}</span>

<span class="nc bnc" id="L304" title="All 4 branches missed.">		if (null == strOracleFirstCoupon || strOracleFirstCoupon.isEmpty())</span>
<span class="nc" id="L305">			strOracleFirstCoupon = strOracleFirstSettle;</span>

<span class="nc bnc" id="L307" title="All 4 branches missed.">		if (null == strOracleAnnounce || strOracleAnnounce.isEmpty())</span>
<span class="nc" id="L308">			strOracleAnnounce = strOracleFirstCoupon;</span>

<span class="nc" id="L310">		java.lang.String strCurrency = astrValRecord[67];</span>

<span class="nc bnc" id="L312" title="All 4 branches missed.">		if (null == strCurrency || strCurrency.isEmpty()) return null;</span>

<span class="nc" id="L314">		int iCouponFreq = 0;</span>

		try {
<span class="nc" id="L317">			iCouponFreq = (int) java.lang.Double.parseDouble (astrValRecord[12].trim());</span>
<span class="nc" id="L318">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog)
				System.out.println (&quot;Bad coupon freq &quot; + astrValRecord[12] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L321">		}</span>

<span class="nc" id="L323">		java.lang.String strDayCount = org.drip.analytics.support.Helper.GetDayCountFromBBGCode</span>
<span class="nc" id="L324">			(astrValRecord[16]);</span>

<span class="nc bnc" id="L326" title="All 4 branches missed.">		if (null == strDayCount || strDayCount.isEmpty()) return null;</span>

<span class="nc" id="L328">		double dblFloatSpread = 0.;</span>

		try {
<span class="nc" id="L331">			dblFloatSpread = java.lang.Double.parseDouble (astrValRecord[78].trim());</span>
<span class="nc" id="L332">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog)
				System.out.println (&quot;Bad float spread &quot; + astrValRecord[78] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L335">		}</span>

<span class="nc" id="L337">		java.lang.String strRateIndex =</span>
<span class="nc" id="L338">			org.drip.analytics.support.Helper.RateIndexFromCcyAndCouponFreq (strCurrency,</span>
				iCouponFreq);

<span class="nc" id="L341">		java.lang.String strCalendar = astrValRecord[19];</span>

<span class="nc bnc" id="L343" title="All 2 branches missed.">		if (strCalendar.startsWith (INVALID_BBG_FIELD_START)) strCalendar = &quot;&quot;;</span>

<span class="nc" id="L345">		java.lang.String strMoodys = &quot;&quot;;</span>
<span class="nc" id="L346">		java.lang.String strSnP = &quot;&quot;;</span>
<span class="nc" id="L347">		java.lang.String strFitch = &quot;&quot;;</span>
<span class="nc" id="L348">		java.lang.String strIndustrySector = astrValRecord[54];</span>
<span class="nc" id="L349">		java.lang.String strIndustryGroup = astrValRecord[55];</span>
<span class="nc" id="L350">		java.lang.String strSnrSub = astrValRecord[20];</span>
<span class="nc" id="L351">		java.lang.String strIssuer = astrValRecord[0];</span>
<span class="nc" id="L352">		double dblAmountIssued = 0.;</span>

		try {
<span class="nc" id="L355">			dblAmountIssued = java.lang.Double.parseDouble (astrValRecord[21].trim());</span>
<span class="nc" id="L356">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog) System.out.println (&quot;Bad issue amt &quot; + astrValRecord[21] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L358">		}</span>

<span class="nc" id="L360">		double dblAmountOutstanding = 0.;</span>

		try {
<span class="nc" id="L363">			dblAmountOutstanding = java.lang.Double.parseDouble (astrValRecord[22].trim());</span>
<span class="nc" id="L364">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog)
				System.out.println (&quot;Bad outstanding amt &quot; + astrValRecord[22] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L367">		}</span>

<span class="nc" id="L369">		java.lang.String strOracleIssue = &quot;&quot;;</span>

		try {
<span class="nc" id="L372">			strOracleIssue = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L373">				(astrValRecord[29].trim());</span>
<span class="nc" id="L374">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog) System.out.println (&quot;Bad issue date &quot; + astrValRecord[29] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L376">		}</span>

<span class="nc" id="L378">		java.lang.String strCouponDates = &quot;&quot;;</span>
<span class="nc" id="L379">		java.lang.String strCouponFactors = &quot;&quot;;</span>
<span class="nc" id="L380">		java.lang.String strNotionalDates = &quot;&quot;;</span>
<span class="nc" id="L381">		java.lang.String strNotionalFactors = &quot;&quot;;</span>
<span class="nc" id="L382">		java.lang.String strIssuerSPN = &quot;&quot;;</span>
<span class="nc" id="L383">		java.lang.String strFloatQuote = &quot;FullCoupon&quot;;</span>

<span class="nc" id="L385">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

<span class="nc" id="L387">		sb.append (&quot;INSERT INTO BondRef VALUES (&quot;);</span>

<span class="nc" id="L389">		sb.append (&quot;'&quot; + strISIN + &quot;',&quot;);</span>

<span class="nc" id="L391">		sb.append (&quot;'&quot; + strCUSIP + &quot;',&quot;);</span>

<span class="nc" id="L393">		sb.append (&quot;'&quot; + strName + &quot;',&quot;);</span>

<span class="nc" id="L395">		sb.append (&quot;'&quot; + strDescription + &quot;',&quot;);</span>

<span class="nc" id="L397">		sb.append (&quot;'&quot; + strTicker + &quot;',&quot;);</span>

<span class="nc" id="L399">		sb.append (dblCoupon + &quot;,&quot;);</span>

<span class="nc" id="L401">		sb.append (&quot;'&quot; + strOracleMaturity + &quot;',&quot;);</span>

<span class="nc" id="L403">		sb.append (&quot;'&quot; + strOracleAnnounce + &quot;',&quot;);</span>

<span class="nc" id="L405">		sb.append (&quot;'&quot; + strOracleFirstSettle + &quot;',&quot;);</span>

<span class="nc" id="L407">		sb.append (&quot;'&quot; + strOracleFirstCoupon + &quot;',&quot;);</span>

<span class="nc" id="L409">		sb.append (&quot;'&quot; + strCurrency + &quot;',&quot;);</span>

<span class="nc" id="L411">		sb.append (iCouponFreq + &quot;,&quot;);</span>

<span class="nc" id="L413">		sb.append (&quot;'&quot; + strDayCount + &quot;',&quot;);</span>

<span class="nc" id="L415">		sb.append (dblFloatSpread + &quot;,&quot;);</span>

<span class="nc" id="L417">		sb.append (&quot;'&quot; + strRateIndex + &quot;',&quot;);</span>

<span class="nc" id="L419">		sb.append (&quot;'&quot; + strCalendar + &quot;',&quot;);</span>

<span class="nc" id="L421">		sb.append (&quot;'&quot; + strMoodys + &quot;',&quot;);</span>

<span class="nc" id="L423">		sb.append (&quot;'&quot; + strSnP + &quot;',&quot;);</span>

<span class="nc" id="L425">		sb.append (&quot;'&quot; + strFitch + &quot;',&quot;);</span>

<span class="nc" id="L427">		sb.append (&quot;'&quot; + strIndustrySector + &quot;',&quot;);</span>

<span class="nc" id="L429">		sb.append (&quot;'&quot; + strIndustryGroup + &quot;',&quot;);</span>

<span class="nc" id="L431">		sb.append (&quot;'&quot; + strSnrSub + &quot;',&quot;);</span>

<span class="nc" id="L433">		sb.append (&quot;'&quot; + strIssuer + &quot;',&quot;);</span>

<span class="nc" id="L435">		sb.append (dblAmountIssued + &quot;,&quot;);</span>

<span class="nc" id="L437">		sb.append (dblAmountOutstanding + &quot;,&quot;);</span>

<span class="nc" id="L439">		sb.append (&quot;'&quot; + strOracleIssue + &quot;',&quot;);</span>

<span class="nc" id="L441">		sb.append (&quot;'&quot; + strCouponDates + &quot;',&quot;);</span>

<span class="nc" id="L443">		sb.append (&quot;'&quot; + strCouponFactors + &quot;',&quot;);</span>

<span class="nc" id="L445">		sb.append (&quot;'&quot; + strNotionalDates + &quot;',&quot;);</span>

<span class="nc" id="L447">		sb.append (&quot;'&quot; + strNotionalFactors + &quot;',&quot;);</span>

<span class="nc" id="L449">		sb.append (&quot;'&quot; + strIssuerSPN + &quot;',&quot;);</span>

<span class="nc" id="L451">		sb.append (&quot;'&quot; + strFloatQuote + &quot;')&quot;);</span>

<span class="nc" id="L453">		return sb.toString();</span>
	}

	private static final java.lang.String ClearISINDateTypeFromEOS (
		final java.lang.String[] astrEOS)
	{
<span class="nc" id="L459">		java.lang.String strISIN = astrEOS[1].trim();</span>

<span class="nc" id="L461">		java.lang.String strOracleExerciseStartDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L464">			strOracleExerciseStartDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L465">				(astrEOS[2].trim());</span>
<span class="nc" id="L466">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L467">			System.out.println (&quot;Bad exercise date &quot; + astrEOS[2] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L469">			return &quot;&quot;;</span>
<span class="nc" id="L470">		}</span>

<span class="nc" id="L472">		java.lang.String strOracleExerciseEndDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L475">			strOracleExerciseEndDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L476">				(astrEOS[4].trim());</span>
<span class="nc" id="L477">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L478">			System.out.println (&quot;Bad exercise date &quot; + astrEOS[4] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L480">			return &quot;&quot;;</span>
<span class="nc" id="L481">		}</span>

<span class="nc" id="L483">		java.lang.String strCallOrPut = astrEOS[8].trim();</span>

<span class="nc" id="L485">		java.lang.String strEuroOrAmer = astrEOS[9].trim();</span>

<span class="nc" id="L487">		return &quot;delete from EOS where ISIN = '&quot; + strISIN + &quot;' and ExerciseStartDate = '&quot; +</span>
			strOracleExerciseStartDate + &quot;' and ExerciseEndDate = '&quot; + strOracleExerciseEndDate +
				&quot;' and CallOrPut = '&quot; + strCallOrPut + &quot;' and EuroAmer = '&quot; + strEuroOrAmer + &quot;'&quot;;
	}

	private static final java.lang.String InsertIntoEOS (
		final java.lang.String[] astrEOS)
	{
<span class="nc" id="L495">		java.lang.String strISIN = astrEOS[1].trim();</span>

<span class="nc" id="L497">		java.lang.String strOracleExerciseStartDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L500">			strOracleExerciseStartDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L501">				(astrEOS[2].trim());</span>
<span class="nc" id="L502">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L503">			System.out.println (&quot;Bad exercise start &quot; + astrEOS[2] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L505">			return null;</span>
<span class="nc" id="L506">		}</span>

<span class="nc" id="L508">		java.lang.String strOracleExerciseEndDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L511">			strOracleExerciseEndDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L512">				(astrEOS[4].trim());</span>
<span class="nc" id="L513">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L514">			System.out.println (&quot;Bad exercise end &quot; + astrEOS[4] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L516">			return null;</span>
<span class="nc" id="L517">		}</span>

<span class="nc" id="L519">		double dblExerciseFactor = java.lang.Double.NaN;</span>

		try {
<span class="nc" id="L522">			dblExerciseFactor = java.lang.Double.parseDouble (astrEOS[6].trim());</span>
<span class="nc" id="L523">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L524">			System.out.println (&quot;Bad exercise factor &quot; + astrEOS[6] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L526">			return null;</span>
<span class="nc" id="L527">		}</span>

<span class="nc" id="L529">		java.lang.String strExerciseCallOrPut = astrEOS[8].trim();</span>

<span class="nc" id="L531">		java.lang.String strExerciseEuroOrAmer = astrEOS[9].trim();</span>

<span class="nc" id="L533">		java.lang.String strStrikeType = astrEOS[12].trim();</span>

<span class="nc" id="L535">		int iKnockoutOnDefault = 1;</span>

		try {
<span class="nc" id="L538">			iKnockoutOnDefault = (int) java.lang.Double.parseDouble (astrEOS[13].trim());</span>
<span class="nc" id="L539">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L540">			System.out.println (&quot;Bad knockout on default &quot; + astrEOS[13] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L542">			return null;</span>
<span class="nc" id="L543">		}</span>

<span class="nc" id="L545">		return &quot;insert into EOS values('&quot; + strISIN + &quot;', '&quot; + strOracleExerciseStartDate + &quot;', '&quot; +</span>
			strOracleExerciseEndDate + &quot;', &quot; + dblExerciseFactor + &quot;, '&quot; + strExerciseCallOrPut + &quot;', '&quot; +
				strExerciseEuroOrAmer + &quot;', '&quot; + strStrikeType + &quot;', &quot; + iKnockoutOnDefault + &quot;, 'N')&quot;;
	}

	private static final java.lang.String ClearFromIREOD (
		final java.lang.String[] astrIREOD)
	{
<span class="nc" id="L553">		java.lang.String strType = astrIREOD[3].trim();</span>

<span class="nc" id="L555">		java.lang.String strCurrency = astrIREOD[4].trim();</span>

<span class="nc" id="L557">		java.lang.String strOracleCloseDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L560">			strOracleCloseDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L561">				(astrIREOD[1].trim());</span>
<span class="nc" id="L562">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L563">			System.out.println (&quot;Bad date &quot; + astrIREOD[1] + &quot; for &quot; + strCurrency);</span>

<span class="nc" id="L565">			return null;</span>
<span class="nc" id="L566">		}</span>

<span class="nc" id="L568">		return &quot;delete from IR_EOD where EOD = '&quot; + strOracleCloseDate + &quot;' and Currency = '&quot; +</span>
			strCurrency + &quot;' and Type = '&quot; + strType + &quot;'&quot;;
	}

	private static final java.lang.String InsertIntoIREOD (
		final java.lang.String[] astrIREOD)
	{
<span class="nc" id="L575">		java.lang.String strType = astrIREOD[3].trim();</span>

<span class="nc" id="L577">		java.lang.String strCurrency = astrIREOD[4].trim();</span>

<span class="nc" id="L579">		java.lang.String strOracleCloseDate = &quot;&quot;;</span>
<span class="nc" id="L580">		double dbl1D = java.lang.Double.NaN;</span>
<span class="nc" id="L581">		double dbl1M = java.lang.Double.NaN;</span>
<span class="nc" id="L582">		double dbl2M = java.lang.Double.NaN;</span>
<span class="nc" id="L583">		double dbl3M = java.lang.Double.NaN;</span>
<span class="nc" id="L584">		double dbl4M = java.lang.Double.NaN;</span>
<span class="nc" id="L585">		double dbl5M = java.lang.Double.NaN;</span>
<span class="nc" id="L586">		double dbl6M = java.lang.Double.NaN;</span>
<span class="nc" id="L587">		double dbl9M = java.lang.Double.NaN;</span>
<span class="nc" id="L588">		double dbl1Y = java.lang.Double.NaN;</span>
<span class="nc" id="L589">		double dbl18M = java.lang.Double.NaN;</span>
<span class="nc" id="L590">		double dbl2Y = java.lang.Double.NaN;</span>
<span class="nc" id="L591">		double dbl3Y = java.lang.Double.NaN;</span>
<span class="nc" id="L592">		double dbl4Y = java.lang.Double.NaN;</span>
<span class="nc" id="L593">		double dbl5Y = java.lang.Double.NaN;</span>
<span class="nc" id="L594">		double dbl6Y = java.lang.Double.NaN;</span>
<span class="nc" id="L595">		double dbl7Y = java.lang.Double.NaN;</span>
<span class="nc" id="L596">		double dbl8Y = java.lang.Double.NaN;</span>
<span class="nc" id="L597">		double dbl9Y = java.lang.Double.NaN;</span>
<span class="nc" id="L598">		double dbl10Y = java.lang.Double.NaN;</span>
<span class="nc" id="L599">		double dbl12Y = java.lang.Double.NaN;</span>
<span class="nc" id="L600">		double dbl15Y = java.lang.Double.NaN;</span>
<span class="nc" id="L601">		double dbl20Y = java.lang.Double.NaN;</span>
<span class="nc" id="L602">		double dbl25Y = java.lang.Double.NaN;</span>
<span class="nc" id="L603">		double dbl30Y = java.lang.Double.NaN;</span>
<span class="nc" id="L604">		double dbl40Y = java.lang.Double.NaN;</span>

		try {
<span class="nc" id="L607">			strOracleCloseDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L608">				(astrIREOD[1].trim());</span>

<span class="nc" id="L610">			dbl1D = java.lang.Double.parseDouble (astrIREOD[5].trim());</span>

<span class="nc" id="L612">			dbl1M = java.lang.Double.parseDouble (astrIREOD[6].trim());</span>

<span class="nc" id="L614">			dbl2M = java.lang.Double.parseDouble (astrIREOD[7].trim());</span>

<span class="nc" id="L616">			dbl3M = java.lang.Double.parseDouble (astrIREOD[8].trim());</span>

<span class="nc" id="L618">			dbl4M = java.lang.Double.parseDouble (astrIREOD[9].trim());</span>

<span class="nc" id="L620">			dbl5M = java.lang.Double.parseDouble (astrIREOD[10].trim());</span>

<span class="nc" id="L622">			dbl6M = java.lang.Double.parseDouble (astrIREOD[11].trim());</span>

<span class="nc" id="L624">			dbl9M = java.lang.Double.parseDouble (astrIREOD[12].trim());</span>

<span class="nc" id="L626">			dbl1Y = java.lang.Double.parseDouble (astrIREOD[13].trim());</span>

<span class="nc" id="L628">			dbl18M = java.lang.Double.parseDouble (astrIREOD[14].trim());</span>

<span class="nc" id="L630">			dbl2Y = java.lang.Double.parseDouble (astrIREOD[15].trim());</span>

<span class="nc" id="L632">			dbl3Y = java.lang.Double.parseDouble (astrIREOD[16].trim());</span>

<span class="nc" id="L634">			dbl4Y = java.lang.Double.parseDouble (astrIREOD[17].trim());</span>

<span class="nc" id="L636">			dbl5Y = java.lang.Double.parseDouble (astrIREOD[18].trim());</span>

<span class="nc" id="L638">			dbl6Y = java.lang.Double.parseDouble (astrIREOD[19].trim());</span>

<span class="nc" id="L640">			dbl7Y = java.lang.Double.parseDouble (astrIREOD[20].trim());</span>

<span class="nc" id="L642">			dbl8Y = java.lang.Double.parseDouble (astrIREOD[21].trim());</span>

<span class="nc" id="L644">			dbl9Y = java.lang.Double.parseDouble (astrIREOD[22].trim());</span>

<span class="nc" id="L646">			dbl10Y = java.lang.Double.parseDouble (astrIREOD[23].trim());</span>

<span class="nc" id="L648">			dbl12Y = java.lang.Double.parseDouble (astrIREOD[24].trim());</span>

<span class="nc" id="L650">			dbl15Y = java.lang.Double.parseDouble (astrIREOD[25].trim());</span>

<span class="nc" id="L652">			dbl20Y = java.lang.Double.parseDouble (astrIREOD[26].trim());</span>

<span class="nc" id="L654">			dbl25Y = java.lang.Double.parseDouble (astrIREOD[27].trim());</span>

<span class="nc" id="L656">			dbl30Y = java.lang.Double.parseDouble (astrIREOD[28].trim());</span>

<span class="nc" id="L658">			dbl40Y = java.lang.Double.parseDouble (astrIREOD[29].trim());</span>
<span class="nc" id="L659">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L660">			System.out.println (&quot;Bad input marks for ccy &quot; + strCurrency);</span>

<span class="nc" id="L662">			return null;</span>
<span class="nc" id="L663">		}</span>

<span class="nc" id="L665">		java.lang.String str1DType = astrIREOD[30].trim();</span>

<span class="nc" id="L667">		java.lang.String str1MType = astrIREOD[31].trim();</span>

<span class="nc" id="L669">		java.lang.String str2MType = astrIREOD[32].trim();</span>

<span class="nc" id="L671">		java.lang.String str3MType = astrIREOD[33].trim();</span>

<span class="nc" id="L673">		java.lang.String str4MType = astrIREOD[34].trim();</span>

<span class="nc" id="L675">		java.lang.String str5MType = astrIREOD[35].trim();</span>

<span class="nc" id="L677">		java.lang.String str6MType = astrIREOD[36].trim();</span>

<span class="nc" id="L679">		java.lang.String str9MType = astrIREOD[37].trim();</span>

<span class="nc" id="L681">		java.lang.String str1YType = astrIREOD[38].trim();</span>

<span class="nc" id="L683">		java.lang.String str18MType = astrIREOD[39].trim();</span>

<span class="nc" id="L685">		java.lang.String str2YType = astrIREOD[40].trim();</span>

<span class="nc" id="L687">		java.lang.String str3YType = astrIREOD[41].trim();</span>

<span class="nc" id="L689">		java.lang.String str4YType = astrIREOD[42].trim();</span>

<span class="nc" id="L691">		java.lang.String str5YType = astrIREOD[43].trim();</span>

<span class="nc" id="L693">		java.lang.String str6YType = astrIREOD[44].trim();</span>

<span class="nc" id="L695">		java.lang.String str7YType = astrIREOD[45].trim();</span>

<span class="nc" id="L697">		java.lang.String str8YType = astrIREOD[46].trim();</span>

<span class="nc" id="L699">		java.lang.String str9YType = astrIREOD[47].trim();</span>

<span class="nc" id="L701">		java.lang.String str10YType = astrIREOD[48].trim();</span>

<span class="nc" id="L703">		java.lang.String str12YType = astrIREOD[49].trim();</span>

<span class="nc" id="L705">		java.lang.String str15YType = astrIREOD[50].trim();</span>

<span class="nc" id="L707">		java.lang.String str20YType = astrIREOD[51].trim();</span>

<span class="nc" id="L709">		java.lang.String str25YType = astrIREOD[52].trim();</span>

<span class="nc" id="L711">		java.lang.String str30YType = astrIREOD[53].trim();</span>

<span class="nc" id="L713">		java.lang.String str40YType = astrIREOD[54].trim();</span>

<span class="nc" id="L715">		java.lang.StringBuilder sbInsertIREOD = new java.lang.StringBuilder();</span>

<span class="nc" id="L717">		sbInsertIREOD.append (&quot;insert into IR_EOD values(&quot;);</span>

<span class="nc" id="L719">		sbInsertIREOD.append (&quot;'&quot;).append (strOracleCloseDate).append (&quot;', &quot;);</span>

<span class="nc" id="L721">		sbInsertIREOD.append (&quot;'&quot;).append (strType).append (&quot;', &quot;);</span>

<span class="nc" id="L723">		sbInsertIREOD.append (&quot;'&quot;).append (strCurrency).append (&quot;', &quot;);</span>

<span class="nc" id="L725">		sbInsertIREOD.append (dbl1D).append (&quot;, &quot;);</span>

<span class="nc" id="L727">		sbInsertIREOD.append (dbl1M).append (&quot;, &quot;);</span>

<span class="nc" id="L729">		sbInsertIREOD.append (dbl2M).append (&quot;, &quot;);</span>

<span class="nc" id="L731">		sbInsertIREOD.append (dbl3M).append (&quot;, &quot;);</span>

<span class="nc" id="L733">		sbInsertIREOD.append (dbl4M).append (&quot;, &quot;);</span>

<span class="nc" id="L735">		sbInsertIREOD.append (dbl5M).append (&quot;, &quot;);</span>

<span class="nc" id="L737">		sbInsertIREOD.append (dbl6M).append (&quot;, &quot;);</span>

<span class="nc" id="L739">		sbInsertIREOD.append (dbl9M).append (&quot;, &quot;);</span>

<span class="nc" id="L741">		sbInsertIREOD.append (dbl1Y).append (&quot;, &quot;);</span>

<span class="nc" id="L743">		sbInsertIREOD.append (dbl18M).append (&quot;, &quot;);</span>

<span class="nc" id="L745">		sbInsertIREOD.append (dbl2Y).append (&quot;, &quot;);</span>

<span class="nc" id="L747">		sbInsertIREOD.append (dbl3Y).append (&quot;, &quot;);</span>

<span class="nc" id="L749">		sbInsertIREOD.append (dbl4Y).append (&quot;, &quot;);</span>

<span class="nc" id="L751">		sbInsertIREOD.append (dbl5Y).append (&quot;, &quot;);</span>

<span class="nc" id="L753">		sbInsertIREOD.append (dbl6Y).append (&quot;, &quot;);</span>

<span class="nc" id="L755">		sbInsertIREOD.append (dbl7Y).append (&quot;, &quot;);</span>

<span class="nc" id="L757">		sbInsertIREOD.append (dbl8Y).append (&quot;, &quot;);</span>

<span class="nc" id="L759">		sbInsertIREOD.append (dbl9Y).append (&quot;, &quot;);</span>

<span class="nc" id="L761">		sbInsertIREOD.append (dbl10Y).append (&quot;, &quot;);</span>

<span class="nc" id="L763">		sbInsertIREOD.append (dbl12Y).append (&quot;, &quot;);</span>

<span class="nc" id="L765">		sbInsertIREOD.append (dbl15Y).append (&quot;, &quot;);</span>

<span class="nc" id="L767">		sbInsertIREOD.append (dbl20Y).append (&quot;, &quot;);</span>

<span class="nc" id="L769">		sbInsertIREOD.append (dbl25Y).append (&quot;, &quot;);</span>

<span class="nc" id="L771">		sbInsertIREOD.append (dbl30Y).append (&quot;, &quot;);</span>

<span class="nc" id="L773">		sbInsertIREOD.append (dbl40Y).append (&quot;, &quot;);</span>

<span class="nc" id="L775">		sbInsertIREOD.append (&quot;'&quot;).append (str1DType).append (&quot;', &quot;);</span>

<span class="nc" id="L777">		sbInsertIREOD.append (&quot;'&quot;).append (str1MType).append (&quot;', &quot;);</span>

<span class="nc" id="L779">		sbInsertIREOD.append (&quot;'&quot;).append (str2MType).append (&quot;', &quot;);</span>

<span class="nc" id="L781">		sbInsertIREOD.append (&quot;'&quot;).append (str3MType).append (&quot;', &quot;);</span>

<span class="nc" id="L783">		sbInsertIREOD.append (&quot;'&quot;).append (str4MType).append (&quot;', &quot;);</span>

<span class="nc" id="L785">		sbInsertIREOD.append (&quot;'&quot;).append (str5MType).append (&quot;', &quot;);</span>

<span class="nc" id="L787">		sbInsertIREOD.append (&quot;'&quot;).append (str6MType).append (&quot;', &quot;);</span>

<span class="nc" id="L789">		sbInsertIREOD.append (&quot;'&quot;).append (str9MType).append (&quot;', &quot;);</span>

<span class="nc" id="L791">		sbInsertIREOD.append (&quot;'&quot;).append (str1YType).append (&quot;', &quot;);</span>

<span class="nc" id="L793">		sbInsertIREOD.append (&quot;'&quot;).append (str18MType).append (&quot;', &quot;);</span>

<span class="nc" id="L795">		sbInsertIREOD.append (&quot;'&quot;).append (str2YType).append (&quot;', &quot;);</span>

<span class="nc" id="L797">		sbInsertIREOD.append (&quot;'&quot;).append (str3YType).append (&quot;', &quot;);</span>

<span class="nc" id="L799">		sbInsertIREOD.append (&quot;'&quot;).append (str4YType).append (&quot;', &quot;);</span>

<span class="nc" id="L801">		sbInsertIREOD.append (&quot;'&quot;).append (str5YType).append (&quot;', &quot;);</span>

<span class="nc" id="L803">		sbInsertIREOD.append (&quot;'&quot;).append (str6YType).append (&quot;', &quot;);</span>

<span class="nc" id="L805">		sbInsertIREOD.append (&quot;'&quot;).append (str7YType).append (&quot;', &quot;);</span>

<span class="nc" id="L807">		sbInsertIREOD.append (&quot;'&quot;).append (str8YType).append (&quot;', &quot;);</span>

<span class="nc" id="L809">		sbInsertIREOD.append (&quot;'&quot;).append (str9YType).append (&quot;', &quot;);</span>

<span class="nc" id="L811">		sbInsertIREOD.append (&quot;'&quot;).append (str10YType).append (&quot;', &quot;);</span>

<span class="nc" id="L813">		sbInsertIREOD.append (&quot;'&quot;).append (str12YType).append (&quot;', &quot;);</span>

<span class="nc" id="L815">		sbInsertIREOD.append (&quot;'&quot;).append (str15YType).append (&quot;', &quot;);</span>

<span class="nc" id="L817">		sbInsertIREOD.append (&quot;'&quot;).append (str20YType).append (&quot;', &quot;);</span>

<span class="nc" id="L819">		sbInsertIREOD.append (&quot;'&quot;).append (str25YType).append (&quot;', &quot;);</span>

<span class="nc" id="L821">		sbInsertIREOD.append (&quot;'&quot;).append (str30YType).append (&quot;', &quot;);</span>

<span class="nc" id="L823">		sbInsertIREOD.append (&quot;'&quot;).append (str40YType).append (&quot;')&quot;);</span>

<span class="nc" id="L825">		return sbInsertIREOD.toString();</span>
	}

	private static final java.lang.String ClearFromCREOD (
		final java.lang.String[] astrCREOD)
	{
<span class="nc" id="L831">		java.lang.String strSPN = astrCREOD[6].trim();</span>

<span class="nc" id="L833">		java.lang.String strOracleCloseDate = &quot;&quot;;</span>

		try {
<span class="nc" id="L836">			strOracleCloseDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L837">				(astrCREOD[2].trim());</span>
<span class="nc" id="L838">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L839">			System.out.println (&quot;Bad date &quot; + astrCREOD[2] + &quot; for &quot; + strSPN);</span>

<span class="nc" id="L841">			return null;</span>
<span class="nc" id="L842">		}</span>

<span class="nc" id="L844">		return &quot;delete from CR_EOD where EOD = '&quot; + strOracleCloseDate + &quot;' and SPN = '&quot; + strSPN + &quot;'&quot;;</span>
	}

	private static final java.lang.String InsertIntoCREOD (
		final java.lang.String[] astrCREOD)
	{
<span class="nc" id="L850">		java.lang.String strName = astrCREOD[4].trim();</span>

<span class="nc" id="L852">		java.lang.String strSPN = astrCREOD[6].trim();</span>

<span class="nc" id="L854">		java.lang.String strOracleCloseDate = &quot;&quot;;</span>
<span class="nc" id="L855">		double dblRecRate = java.lang.Double.NaN;</span>
<span class="nc" id="L856">		double dblCR3M = java.lang.Double.NaN;</span>
<span class="nc" id="L857">		double dblCR6M = java.lang.Double.NaN;</span>
<span class="nc" id="L858">		double dblCR9M = java.lang.Double.NaN;</span>
<span class="nc" id="L859">		double dblCR1Y = java.lang.Double.NaN;</span>
<span class="nc" id="L860">		double dblCR18M = java.lang.Double.NaN;</span>
<span class="nc" id="L861">		double dblCR2Y = java.lang.Double.NaN;</span>
<span class="nc" id="L862">		double dblCR3Y = java.lang.Double.NaN;</span>
<span class="nc" id="L863">		double dblCR4Y = java.lang.Double.NaN;</span>
<span class="nc" id="L864">		double dblCR5Y = java.lang.Double.NaN;</span>
<span class="nc" id="L865">		double dblCR6Y = java.lang.Double.NaN;</span>
<span class="nc" id="L866">		double dblCR7Y = java.lang.Double.NaN;</span>
<span class="nc" id="L867">		double dblCR8Y = java.lang.Double.NaN;</span>
<span class="nc" id="L868">		double dblCR9Y = java.lang.Double.NaN;</span>
<span class="nc" id="L869">		double dblCR10Y = java.lang.Double.NaN;</span>
<span class="nc" id="L870">		double dblCR11Y = java.lang.Double.NaN;</span>
<span class="nc" id="L871">		double dblCR12Y = java.lang.Double.NaN;</span>
<span class="nc" id="L872">		double dblCR15Y = java.lang.Double.NaN;</span>
<span class="nc" id="L873">		double dblCR20Y = java.lang.Double.NaN;</span>
<span class="nc" id="L874">		double dblCR30Y = java.lang.Double.NaN;</span>
<span class="nc" id="L875">		double dblCR40Y = java.lang.Double.NaN;</span>

		try {
<span class="nc" id="L878">			strOracleCloseDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L879">				(astrCREOD[2].trim());</span>

<span class="nc" id="L881">			dblRecRate = java.lang.Double.parseDouble (astrCREOD[7].trim());</span>

<span class="nc" id="L883">			dblCR3M = java.lang.Double.parseDouble (astrCREOD[8].trim());</span>

<span class="nc" id="L885">			dblCR6M = java.lang.Double.parseDouble (astrCREOD[9].trim());</span>

<span class="nc" id="L887">			dblCR9M = java.lang.Double.parseDouble (astrCREOD[10].trim());</span>

<span class="nc" id="L889">			dblCR1Y = java.lang.Double.parseDouble (astrCREOD[11].trim());</span>

<span class="nc" id="L891">			dblCR18M = java.lang.Double.parseDouble (astrCREOD[12].trim());</span>

<span class="nc" id="L893">			dblCR2Y = java.lang.Double.parseDouble (astrCREOD[13].trim());</span>

<span class="nc" id="L895">			dblCR3Y = java.lang.Double.parseDouble (astrCREOD[14].trim());</span>

<span class="nc" id="L897">			dblCR4Y = java.lang.Double.parseDouble (astrCREOD[15].trim());</span>

<span class="nc" id="L899">			dblCR5Y = java.lang.Double.parseDouble (astrCREOD[16].trim());</span>

<span class="nc" id="L901">			dblCR6Y = java.lang.Double.parseDouble (astrCREOD[17].trim());</span>

<span class="nc" id="L903">			dblCR7Y = java.lang.Double.parseDouble (astrCREOD[18].trim());</span>

<span class="nc" id="L905">			dblCR8Y = java.lang.Double.parseDouble (astrCREOD[19].trim());</span>

<span class="nc" id="L907">			dblCR9Y = java.lang.Double.parseDouble (astrCREOD[20].trim());</span>

<span class="nc" id="L909">			dblCR10Y = java.lang.Double.parseDouble (astrCREOD[21].trim());</span>

<span class="nc" id="L911">			dblCR11Y = java.lang.Double.parseDouble (astrCREOD[22].trim());</span>

<span class="nc" id="L913">			dblCR12Y = java.lang.Double.parseDouble (astrCREOD[23].trim());</span>

<span class="nc" id="L915">			dblCR15Y = java.lang.Double.parseDouble (astrCREOD[26].trim());</span>

<span class="nc" id="L917">			dblCR20Y = java.lang.Double.parseDouble (astrCREOD[31].trim());</span>

<span class="nc" id="L919">			dblCR30Y = java.lang.Double.parseDouble (astrCREOD[37].trim());</span>

<span class="nc" id="L921">			dblCR40Y = java.lang.Double.parseDouble (astrCREOD[39].trim());</span>
<span class="nc" id="L922">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L923">			System.out.println (&quot;Bad input marks for SPN &quot; + strSPN);</span>

<span class="nc" id="L925">			e.printStackTrace();</span>

<span class="nc" id="L927">			return null;</span>
<span class="nc" id="L928">		}</span>

<span class="nc" id="L930">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

<span class="nc" id="L932">		sb.append (&quot;insert into CR_EOD values(&quot;);</span>

<span class="nc" id="L934">		sb.append (&quot;'&quot; + strOracleCloseDate + &quot;', &quot;);</span>

<span class="nc" id="L936">		sb.append (&quot;'&quot; + strName + &quot;', &quot;);</span>

<span class="nc" id="L938">		sb.append (&quot;'&quot; + strSPN + &quot;', &quot;);</span>

<span class="nc" id="L940">		sb.append (dblRecRate + &quot;, &quot;);</span>

<span class="nc" id="L942">		sb.append (dblCR3M + &quot;, &quot;);</span>

<span class="nc" id="L944">		sb.append (dblCR6M + &quot;, &quot;);</span>

<span class="nc" id="L946">		sb.append (dblCR9M + &quot;, &quot;);</span>

<span class="nc" id="L948">		sb.append (dblCR1Y + &quot;, &quot;);</span>

<span class="nc" id="L950">		sb.append (dblCR18M + &quot;, &quot;);</span>

<span class="nc" id="L952">		sb.append (dblCR2Y + &quot;, &quot;);</span>

<span class="nc" id="L954">		sb.append (dblCR3Y + &quot;, &quot;);</span>

<span class="nc" id="L956">		sb.append (dblCR4Y + &quot;, &quot;);</span>

<span class="nc" id="L958">		sb.append (dblCR5Y + &quot;, &quot;);</span>

<span class="nc" id="L960">		sb.append (dblCR6Y + &quot;, &quot;);</span>

<span class="nc" id="L962">		sb.append (dblCR7Y + &quot;, &quot;);</span>

<span class="nc" id="L964">		sb.append (dblCR8Y + &quot;, &quot;);</span>

<span class="nc" id="L966">		sb.append (dblCR9Y + &quot;, &quot;);</span>

<span class="nc" id="L968">		sb.append (dblCR10Y + &quot;, &quot;);</span>

<span class="nc" id="L970">		sb.append (dblCR11Y + &quot;, &quot;);</span>

<span class="nc" id="L972">		sb.append (dblCR12Y + &quot;, &quot;);</span>

<span class="nc" id="L974">		sb.append (dblCR15Y + &quot;, &quot;);</span>

<span class="nc" id="L976">		sb.append (dblCR20Y + &quot;, &quot;);</span>

<span class="nc" id="L978">		sb.append (dblCR30Y + &quot;, &quot;);</span>

<span class="nc" id="L980">		sb.append (dblCR40Y + &quot;)&quot;);</span>

<span class="nc" id="L982">		return sb.toString();</span>
	}

	private static java.lang.String makeSQLClearISIN2 (
		final java.lang.String[] astrBondRef2)
	{
<span class="nc" id="L988">		java.lang.String strISIN = astrBondRef2[0];</span>

<span class="nc bnc" id="L990" title="All 4 branches missed.">		if (null == strISIN || strISIN.isEmpty()) return null;</span>

<span class="nc" id="L992">		return &quot;delete from BondRef where ISIN = '&quot; + strISIN + &quot;'&quot;;</span>
	}

	private static java.lang.String makeSQLInsert2 (
		final java.lang.String[] astrBondRef2)
	{
<span class="nc" id="L998">		java.lang.String strCUSIP = astrBondRef2[40];</span>

<span class="nc bnc" id="L1000" title="All 4 branches missed.">		if (null == strCUSIP || strCUSIP.isEmpty()) return null;</span>

<span class="nc" id="L1002">		java.lang.String strISIN = astrBondRef2[0];</span>

<span class="nc bnc" id="L1004" title="All 4 branches missed.">		if (null == strISIN || strISIN.isEmpty()) return null;</span>

<span class="nc" id="L1006">		java.lang.String strName = astrBondRef2[2];</span>

<span class="nc bnc" id="L1008" title="All 4 branches missed.">		if (null == strName || strName.isEmpty()) return null;</span>

<span class="nc" id="L1010">		java.lang.String strDescription = astrBondRef2[2];</span>

<span class="nc bnc" id="L1012" title="All 4 branches missed.">		if (null == strDescription || strDescription.isEmpty()) return null;</span>

<span class="nc" id="L1014">		System.out.println (astrBondRef2[1]);</span>

<span class="nc" id="L1016">		java.lang.String[] astrTicker = astrBondRef2[1].split (&quot; &quot;);</span>

<span class="nc" id="L1018">		java.lang.String strTicker = astrTicker[0];</span>
<span class="nc" id="L1019">		double dblCoupon = 0.;</span>

		try {
<span class="nc" id="L1022">			dblCoupon = java.lang.Double.parseDouble (astrBondRef2[11].trim());</span>
<span class="nc" id="L1023">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog) System.out.println (&quot;Bad coupon &quot; + astrBondRef2[11] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L1025">		}</span>

<span class="nc" id="L1027">		java.lang.String strOracleMaturity = &quot;&quot;;</span>

		try {
<span class="nc" id="L1030">			strOracleMaturity = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L1031">				(astrBondRef2[8].trim());</span>
<span class="nc" id="L1032">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1033">			System.out.println (&quot;Bad maturity &quot; + astrBondRef2[8] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L1035">			return null;</span>
<span class="nc" id="L1036">		}</span>

<span class="nc" id="L1038">		java.lang.String strOracleFirstSettle = &quot;&quot;;</span>

		try {
<span class="nc" id="L1041">			strOracleFirstSettle = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L1042">				(astrBondRef2[6].trim());</span>
<span class="nc" id="L1043">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1044">			System.out.println (&quot;Bad first settle &quot; + astrBondRef2[6] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L1046">			return null;</span>
<span class="nc" id="L1047">		}</span>

<span class="nc" id="L1049">		java.lang.String strOracleFirstCoupon = &quot;&quot;;</span>

		try {
<span class="nc" id="L1052">			strOracleFirstCoupon = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L1053">				(astrBondRef2[6].trim());</span>
<span class="nc" id="L1054">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1055">			System.out.println (&quot;Bad first coupon &quot; + astrBondRef2[6] + &quot; for ISIN &quot; + strISIN);</span>

<span class="nc" id="L1057">			return null;</span>
<span class="nc" id="L1058">		}</span>

<span class="nc" id="L1060">		java.lang.String strOracleAnnounce = strOracleFirstCoupon;</span>

<span class="nc" id="L1062">		java.lang.String strCurrency = astrBondRef2[5];</span>

<span class="nc bnc" id="L1064" title="All 4 branches missed.">		if (null == strCurrency || strCurrency.isEmpty()) return null;</span>

<span class="nc" id="L1066">		int iCouponFreq = 0;</span>

<span class="nc" id="L1068">		java.lang.String strCouponFreq = astrBondRef2[13];</span>

<span class="nc bnc" id="L1070" title="All 2 branches missed.">		if (&quot;A&quot;.equalsIgnoreCase (strCouponFreq))</span>
<span class="nc" id="L1071">			iCouponFreq = 1;</span>
<span class="nc bnc" id="L1072" title="All 2 branches missed.">		else if (&quot;M&quot;.equalsIgnoreCase (strCouponFreq))</span>
<span class="nc" id="L1073">			iCouponFreq = 12;</span>
<span class="nc bnc" id="L1074" title="All 2 branches missed.">		else if (&quot;Q&quot;.equalsIgnoreCase (strCouponFreq))</span>
<span class="nc" id="L1075">			iCouponFreq = 4;</span>
<span class="nc bnc" id="L1076" title="All 2 branches missed.">		else if (&quot;S&quot;.equalsIgnoreCase (strCouponFreq))</span>
<span class="nc" id="L1077">			iCouponFreq = 2;</span>

<span class="nc" id="L1079">		java.lang.String strDayCount = astrBondRef2[14];</span>

<span class="nc bnc" id="L1081" title="All 4 branches missed.">		if (null == strDayCount || strDayCount.isEmpty()) return null;</span>

<span class="nc" id="L1083">		double dblFloatSpread = 0.;</span>

		try {
<span class="nc" id="L1086">			dblFloatSpread = java.lang.Double.parseDouble (astrBondRef2[12].trim());</span>
<span class="nc" id="L1087">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog)
				System.out.println (&quot;Bad float spread &quot; + astrBondRef2[12] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L1090">		}</span>

<span class="nc" id="L1092">		java.lang.String strRateIndex = &quot;&quot;;</span>
<span class="nc" id="L1093">		java.lang.String strCalendar = astrBondRef2[5];</span>

<span class="nc bnc" id="L1095" title="All 2 branches missed.">		if (strCalendar.startsWith (INVALID_BBG_FIELD_START)) strCalendar = &quot;&quot;;</span>

<span class="nc" id="L1097">		java.lang.String strMoodys = &quot;&quot;;</span>
<span class="nc" id="L1098">		java.lang.String strSnP = &quot;&quot;;</span>
<span class="nc" id="L1099">		java.lang.String strFitch = &quot;&quot;;</span>
<span class="nc" id="L1100">		java.lang.String strIndustrySector = &quot;&quot;;</span>
<span class="nc" id="L1101">		java.lang.String strIndustryGroup = &quot;&quot;;</span>
<span class="nc" id="L1102">		java.lang.String strSnrSub = &quot;&quot;;</span>
<span class="nc" id="L1103">		java.lang.String strIssuer = astrBondRef2[2];</span>
<span class="nc" id="L1104">		double dblAmountIssued = 0.;</span>
<span class="nc" id="L1105">		double dblAmountOutstanding = 0.;</span>
<span class="nc" id="L1106">		java.lang.String strOracleIssue = &quot;&quot;;</span>

		try {
<span class="nc" id="L1109">			strOracleIssue = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L1110">				(astrBondRef2[6].trim());</span>
<span class="nc" id="L1111">		} catch (java.lang.Exception e) {</span>
			if (m_bBlog) System.out.println (&quot;Bad issue date &quot; + astrBondRef2[6] + &quot; for ISIN &quot; + strISIN);
<span class="nc" id="L1113">		}</span>

<span class="nc" id="L1115">		java.lang.String strCouponDates = &quot;&quot;;</span>
<span class="nc" id="L1116">		java.lang.String strCouponFactors = &quot;&quot;;</span>
<span class="nc" id="L1117">		java.lang.String strNotionalDates = &quot;&quot;;</span>
<span class="nc" id="L1118">		java.lang.String strNotionalFactors = &quot;&quot;;</span>
<span class="nc" id="L1119">		java.lang.String strIssuerSPN = astrBondRef2[3];</span>
<span class="nc" id="L1120">		java.lang.String strFloatQuote = &quot;&quot;;</span>

<span class="nc" id="L1122">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

<span class="nc" id="L1124">		sb.append (&quot;INSERT INTO BondRef VALUES (&quot;);</span>

<span class="nc" id="L1126">		sb.append (&quot;'&quot; + strISIN + &quot;',&quot;);</span>

<span class="nc" id="L1128">		sb.append (&quot;'&quot; + strCUSIP + &quot;',&quot;);</span>

<span class="nc" id="L1130">		sb.append (&quot;'&quot; + strName + &quot;',&quot;);</span>

<span class="nc" id="L1132">		sb.append (&quot;'&quot; + strDescription + &quot;',&quot;);</span>

<span class="nc" id="L1134">		sb.append (&quot;'&quot; + strTicker + &quot;',&quot;);</span>

<span class="nc" id="L1136">		sb.append (dblCoupon + &quot;,&quot;);</span>

<span class="nc" id="L1138">		sb.append (&quot;'&quot; + strOracleMaturity + &quot;',&quot;);</span>

<span class="nc" id="L1140">		sb.append (&quot;'&quot; + strOracleAnnounce + &quot;',&quot;);</span>

<span class="nc" id="L1142">		sb.append (&quot;'&quot; + strOracleFirstSettle + &quot;',&quot;);</span>

<span class="nc" id="L1144">		sb.append (&quot;'&quot; + strOracleFirstCoupon + &quot;',&quot;);</span>

<span class="nc" id="L1146">		sb.append (&quot;'&quot; + strCurrency + &quot;',&quot;);</span>

<span class="nc" id="L1148">		sb.append (iCouponFreq + &quot;,&quot;);</span>

<span class="nc" id="L1150">		sb.append (&quot;'&quot; + strDayCount + &quot;',&quot;);</span>

<span class="nc" id="L1152">		sb.append (dblFloatSpread + &quot;,&quot;);</span>

<span class="nc" id="L1154">		sb.append (&quot;'&quot; + strRateIndex + &quot;',&quot;);</span>

<span class="nc" id="L1156">		sb.append (&quot;'&quot; + strCalendar + &quot;',&quot;);</span>

<span class="nc" id="L1158">		sb.append (&quot;'&quot; + strMoodys + &quot;',&quot;);</span>

<span class="nc" id="L1160">		sb.append (&quot;'&quot; + strSnP + &quot;',&quot;);</span>

<span class="nc" id="L1162">		sb.append (&quot;'&quot; + strFitch + &quot;',&quot;);</span>

<span class="nc" id="L1164">		sb.append (&quot;'&quot; + strIndustrySector + &quot;',&quot;);</span>

<span class="nc" id="L1166">		sb.append (&quot;'&quot; + strIndustryGroup + &quot;',&quot;);</span>

<span class="nc" id="L1168">		sb.append (&quot;'&quot; + strSnrSub + &quot;',&quot;);</span>

<span class="nc" id="L1170">		sb.append (&quot;'&quot; + strIssuer + &quot;',&quot;);</span>

<span class="nc" id="L1172">		sb.append (dblAmountIssued + &quot;,&quot;);</span>

<span class="nc" id="L1174">		sb.append (dblAmountOutstanding + &quot;,&quot;);</span>

<span class="nc" id="L1176">		sb.append (&quot;'&quot; + strOracleIssue + &quot;',&quot;);</span>

<span class="nc" id="L1178">		sb.append (&quot;'&quot; + strCouponDates + &quot;',&quot;);</span>

<span class="nc" id="L1180">		sb.append (&quot;'&quot; + strCouponFactors + &quot;',&quot;);</span>

<span class="nc" id="L1182">		sb.append (&quot;'&quot; + strNotionalDates + &quot;',&quot;);</span>

<span class="nc" id="L1184">		sb.append (&quot;'&quot; + strNotionalFactors + &quot;',&quot;);</span>

<span class="nc" id="L1186">		sb.append (&quot;'&quot; + strIssuerSPN + &quot;',&quot;);</span>

<span class="nc" id="L1188">		sb.append (&quot;'&quot; + strFloatQuote + &quot;')&quot;);</span>

<span class="nc" id="L1190">		return sb.toString();</span>
	}

	private static java.lang.String makeSQLClearAmortScheduleEntry (
		final java.lang.String[] astrAmortizationSchedule)
	{
<span class="nc bnc" id="L1196" title="All 4 branches missed.">		if (null == astrAmortizationSchedule || 5 != astrAmortizationSchedule.length) return null;</span>

<span class="nc" id="L1198">		java.lang.String strOracleAmortizationDate = &quot;&quot;;</span>

<span class="nc" id="L1200">		java.lang.String strCUSIP = astrAmortizationSchedule[1].trim();</span>

<span class="nc bnc" id="L1202" title="All 4 branches missed.">		if (null == strCUSIP || strCUSIP.isEmpty()) return null;</span>

<span class="nc" id="L1204">		java.lang.StringBuilder sb = new java.lang.StringBuilder();</span>

		try {
<span class="nc" id="L1207">			strOracleAmortizationDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L1208">				(astrAmortizationSchedule[2].trim());</span>
<span class="nc" id="L1209">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1210">			System.out.println (&quot;Bad date &quot; + astrAmortizationSchedule[2] + &quot; for CUSIP &quot; + strCUSIP);</span>

<span class="nc" id="L1212">			return null;</span>
<span class="nc" id="L1213">		}</span>

<span class="nc" id="L1215">		sb.append (&quot;delete from AmortizationSchedule where CUSIP = '&quot;).append (strCUSIP).append</span>
<span class="nc" id="L1216">			(&quot;' and AmortDate = '&quot;).append (strOracleAmortizationDate).append (&quot;'&quot;);</span>

<span class="nc" id="L1218">		return sb.toString();</span>
	}

	private static final java.lang.String InsertIntoAmortizationSchedule (
		final java.lang.String[] astrAmortizationSchedule)
	{
<span class="nc bnc" id="L1224" title="All 4 branches missed.">		if (null == astrAmortizationSchedule || 5 != astrAmortizationSchedule.length) return null;</span>

<span class="nc" id="L1226">		java.lang.String strCUSIP = astrAmortizationSchedule[1].trim();</span>

<span class="nc" id="L1228">		java.lang.String strOracleAmortizationDate = &quot;&quot;;</span>
<span class="nc" id="L1229">		double dblPrincipalPaydown = java.lang.Double.NaN;</span>

		try {
<span class="nc" id="L1232">			strOracleAmortizationDate = org.drip.analytics.date.DateUtil.MakeOracleDateFromBBGDate</span>
<span class="nc" id="L1233">				(astrAmortizationSchedule[2].trim());</span>
<span class="nc" id="L1234">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1235">			System.out.println (&quot;Bad date &quot; + astrAmortizationSchedule[2] + &quot; for CUSIP &quot; + strCUSIP);</span>

<span class="nc" id="L1237">			return null;</span>
<span class="nc" id="L1238">		}</span>

		try {
<span class="nc" id="L1241">			dblPrincipalPaydown = java.lang.Double.parseDouble (astrAmortizationSchedule[4].trim());</span>
<span class="nc" id="L1242">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1243">			System.out.println (&quot;Bad paydown factor &quot; + astrAmortizationSchedule[4] + &quot; for CUSIP &quot; +</span>
				strCUSIP);

<span class="nc" id="L1246">			return null;</span>
<span class="nc" id="L1247">		}</span>

<span class="nc" id="L1249">		return &quot;insert into AmortizationSchedule values('&quot; + strCUSIP + &quot;', '&quot; + strOracleAmortizationDate +</span>
			&quot;', &quot; + dblPrincipalPaydown + &quot;)&quot;;
	}

	private static void LoadBondRef()
		throws java.lang.Exception
	{
		/* int iNumBonds = 0;
		java.lang.String strValDataLine = &quot;&quot;;
		java.io.BufferedReader inValData = null;

		System.out.println (&quot;Loading BondRef ...&quot;);

		oracle.jdbc.pool.OracleDataSource ds = new oracle.jdbc.pool.OracleDataSource();

		ds.setDriverType (&quot;thin&quot;);

		ds.setServerName (&quot;localhost&quot;);

		ds.setPortNumber (1521);

		ds.setDatabaseName (&quot;XE&quot;);

		ds.setUser (&quot;hr&quot;);

		ds.setPassword (&quot;hr&quot;);

		java.sql.Connection con = ds.getConnection();

		java.sql.Statement stmt = con.createStatement();

		try {
			inValData = new java.io.BufferedReader (new java.io.FileReader
				(&quot;c:\\Lakshmi\\java\\BondAnal\\Data\\BondStaticRef\\FullTickers_Base\\RefDataSet.csv&quot;));
		} catch (java.lang.Exception e) {
			System.out.println (&quot;Cannot open Val Data record file&quot;);

			return;
		}

		while (null != (strValDataLine = inValData.readLine())) {
			int iNumRecord = 0;
			java.lang.String astrValRecord[] = new java.lang.String[33];

			java.util.StringTokenizer stValData = new java.util.StringTokenizer (strValDataLine, &quot;,&quot;);

			while (stValData.hasMoreTokens()) {
				java.lang.String stValDataField = stValData.nextToken();

				astrValRecord[iNumRecord++] = stValDataField;
			}

			java.lang.String strSQLClear = makeSQLClearISINOrCUSIP (astrValRecord);

			if (null != strSQLClear) stmt.executeUpdate (strSQLClear);

			java.lang.String strSQLInsert = makeSQLInsert (astrValRecord);

			if (null != strSQLInsert) {
				if (m_bBlog) System.out.println (&quot;SQL[&quot; + iNumBonds + &quot;]: &quot; + strSQLInsert);

				stmt.executeUpdate (strSQLInsert);
			}

			++iNumBonds;
		}

		inValData.close();

		System.out.println (&quot;Loaded &quot; + iNumBonds + &quot; into BondRef.&quot;); */
<span class="nc" id="L1319">	}</span>

	private static void LoadBondRef2()
		throws java.lang.Exception
	{
<span class="nc" id="L1324">		int iNumBonds = 0;</span>
<span class="nc" id="L1325">		java.lang.String strBondRef2Line = &quot;&quot;;</span>
<span class="nc" id="L1326">		java.io.BufferedReader inBondRef2 = null;</span>

<span class="nc" id="L1328">		System.out.println (&quot;Loading BondRef2 ...&quot;);</span>

<span class="nc" id="L1330">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1331">			(&quot;c:\\Lakshmi\\java\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1334">			inBondRef2 = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;C:\\Lakshmi\\RefDataAndMarks\\17Jan2012\\Bond.csv&quot;));
<span class="nc" id="L1336">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1337">			System.out.println (&quot;Cannot open BondRef record file&quot;);</span>

<span class="nc" id="L1339">			return;</span>
<span class="nc" id="L1340">		}</span>

<span class="nc bnc" id="L1342" title="All 2 branches missed.">		while (null != (strBondRef2Line = inBondRef2.readLine())) {</span>
<span class="nc" id="L1343">			java.lang.String[] astrBondRef2Record = strBondRef2Line.split (&quot;,&quot;);</span>

<span class="nc" id="L1345">			java.lang.String strSQLClear = makeSQLClearISIN2 (astrBondRef2Record);</span>

<span class="nc bnc" id="L1347" title="All 2 branches missed.">			if (null != strSQLClear) stmt.executeUpdate (strSQLClear);</span>

<span class="nc" id="L1349">			java.lang.String strSQLInsert = makeSQLInsert2 (astrBondRef2Record);</span>

<span class="nc bnc" id="L1351" title="All 2 branches missed.">			if (null != strSQLInsert) {</span>
				if (m_bBlog) System.out.println (&quot;SQL[&quot; + iNumBonds + &quot;]: &quot; + strSQLInsert);

<span class="nc" id="L1354">				stmt.executeUpdate (strSQLInsert);</span>
			}

<span class="nc" id="L1357">			++iNumBonds;</span>
<span class="nc" id="L1358">		}</span>

<span class="nc" id="L1360">		inBondRef2.close();</span>

<span class="nc" id="L1362">		System.out.println (&quot;Loaded &quot; + iNumBonds + &quot; into BondRef2&quot;);</span>
<span class="nc" id="L1363">	}</span>

	private static void LoadBondRef_FODATA()
		throws java.lang.Exception
	{
<span class="nc" id="L1368">		int iNumBonds = 0;</span>
<span class="nc" id="L1369">		java.lang.String strBondRefLine = &quot;&quot;;</span>
<span class="nc" id="L1370">		java.io.BufferedReader inBondRef = null;</span>

<span class="nc" id="L1372">		System.out.println (&quot;Loading BondRef_FODATA ...&quot;);</span>

<span class="nc" id="L1374">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1375">			(&quot;c:\\Lakshmi\\java\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1378">			inBondRef = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;C:\\Lakshmi\\RefDataAndMarks\\17Jan2012\\Bond.csv&quot;));
<span class="nc" id="L1380">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1381">			System.out.println (&quot;Cannot open BondRef record file&quot;);</span>

<span class="nc" id="L1383">			return;</span>
<span class="nc" id="L1384">		}</span>

<span class="nc bnc" id="L1386" title="All 2 branches missed.">		while (null != (strBondRefLine = inBondRef.readLine())) {</span>
<span class="nc" id="L1387">			java.lang.String[] astrBondRefRecord = strBondRefLine.split (&quot;,&quot;);</span>

<span class="nc" id="L1389">			java.lang.String strSQLClear = makeSQLClear_FODATA (astrBondRefRecord);</span>

<span class="nc bnc" id="L1391" title="All 2 branches missed.">			if (null != strSQLClear) stmt.executeUpdate (strSQLClear);</span>

<span class="nc" id="L1393">			java.lang.String strSQLInsert = makeSQLInsert_FODATA (astrBondRefRecord);</span>

<span class="nc bnc" id="L1395" title="All 2 branches missed.">			if (null != strSQLInsert) {</span>
				if (m_bBlog) System.out.println (&quot;SQL[&quot; + iNumBonds + &quot;]: &quot; + strSQLInsert);

<span class="nc" id="L1398">				stmt.executeUpdate (strSQLInsert);</span>
			}

<span class="nc" id="L1401">			++iNumBonds;</span>
<span class="nc" id="L1402">		}</span>

<span class="nc" id="L1404">		inBondRef.close();</span>

<span class="nc" id="L1406">		System.out.println (&quot;Loaded &quot; + iNumBonds + &quot; into BondRef_FODATA&quot;);</span>
<span class="nc" id="L1407">	}</span>

	private static void LoadBondMarks()
		throws java.lang.Exception
	{
<span class="nc" id="L1412">		int iNumMarks = 0;</span>
<span class="nc" id="L1413">		java.lang.String strMarksLine = &quot;&quot;;</span>
<span class="nc" id="L1414">		java.io.BufferedReader inMarks = null;</span>

<span class="nc" id="L1416">		System.out.println (&quot;Loading BondMark ...&quot;);</span>

<span class="nc" id="L1418">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1419">			(&quot;c:\\Lakshmi\\java\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1422">			inMarks = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;c:\\Lakshmi\\java\\BondAnal\\Data\\BondStaticRef\\Marks\\MatrixPricer_Prices_0715.csv&quot;));
<span class="nc" id="L1424">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1425">			System.out.println (&quot;Cannot open marks file&quot;);</span>

<span class="nc" id="L1427">			return;</span>
<span class="nc" id="L1428">		}</span>

<span class="nc bnc" id="L1430" title="All 2 branches missed.">		while (null != (strMarksLine = inMarks.readLine())) {</span>
<span class="nc" id="L1431">			int iNumMarksRecord = 0;</span>
<span class="nc" id="L1432">			java.lang.String astrMarks[] = new java.lang.String[9];</span>

<span class="nc" id="L1434">			java.util.StringTokenizer stMarks = new java.util.StringTokenizer (strMarksLine, &quot;,&quot;);</span>

<span class="nc bnc" id="L1436" title="All 2 branches missed.">			while (stMarks.hasMoreTokens()) {</span>
<span class="nc" id="L1437">				java.lang.String strMarks = stMarks.nextToken();</span>

<span class="nc" id="L1439">				astrMarks[iNumMarksRecord++] = strMarks;</span>
<span class="nc" id="L1440">			}</span>

<span class="nc" id="L1442">			java.lang.String strSQLClearMarks = makeSQLClearMarksForBondDate (astrMarks);</span>

<span class="nc bnc" id="L1444" title="All 2 branches missed.">			if (null != strSQLClearMarks) {</span>
				if (m_bBlog) System.out.println (&quot;SQL[&quot; + iNumMarks + &quot;]: &quot; + strSQLClearMarks);

<span class="nc" id="L1447">				stmt.executeUpdate (strSQLClearMarks);</span>
			}

<span class="nc" id="L1450">			java.lang.String strSQLInsertMarks = makeSQLBondMarksInsert (astrMarks);</span>

<span class="nc bnc" id="L1452" title="All 2 branches missed.">			if (null != strSQLInsertMarks) {</span>
				if (m_bBlog) System.out.println (&quot;SQL[&quot; + iNumMarks + &quot;]: &quot; + strSQLInsertMarks);

<span class="nc" id="L1455">				stmt.executeUpdate (strSQLInsertMarks);</span>
			}

<span class="nc" id="L1458">			++iNumMarks;</span>
<span class="nc" id="L1459">		}</span>

<span class="nc" id="L1461">		inMarks.close();</span>

<span class="nc" id="L1463">		System.out.println (&quot;Loaded &quot; + iNumMarks + &quot; into BondMark.&quot;);</span>
<span class="nc" id="L1464">	}</span>

	private static void LoadHolidayCalendar (
		final java.lang.String strHolLoc,
		final java.lang.String strHolLocFile)
		throws java.lang.Exception
	{
<span class="nc" id="L1471">		java.lang.String strHolsLine = &quot;&quot;;</span>
<span class="nc" id="L1472">		java.io.BufferedReader inHolCal = null;</span>

<span class="nc" id="L1474">		System.out.println (&quot;Loading &quot; + strHolLoc + &quot; from &quot; + strHolLocFile);</span>

<span class="nc" id="L1476">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1477">			(&quot;c:\\Lakshmi\\java\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1480">			inHolCal = new java.io.BufferedReader (new java.io.FileReader (strHolLocFile));</span>
<span class="nc" id="L1481">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1482">			System.out.println (&quot;Cannot open hol cal file&quot;);</span>

<span class="nc" id="L1484">			return;</span>
<span class="nc" id="L1485">		}</span>

<span class="nc bnc" id="L1487" title="All 2 branches missed.">		while (null != (strHolsLine = inHolCal.readLine())) {</span>
<span class="nc" id="L1488">			java.util.StringTokenizer stHolFields = new java.util.StringTokenizer (strHolsLine, &quot;	&quot;);</span>

			try {
<span class="nc" id="L1491">				int iFieldNum = 0;</span>
<span class="nc" id="L1492">				java.lang.String[] astrHolFields = new java.lang.String[2];</span>
<span class="nc" id="L1493">				astrHolFields[0] = &quot;&quot;;</span>
<span class="nc" id="L1494">				astrHolFields[1] = &quot;&quot;;</span>
<span class="nc" id="L1495">				java.lang.String strORAHoliday = &quot;&quot;;</span>

<span class="nc bnc" id="L1497" title="All 4 branches missed.">				while (stHolFields.hasMoreTokens() &amp;&amp; iFieldNum &lt; astrHolFields.length)</span>
<span class="nc" id="L1498">					astrHolFields[iFieldNum++] = stHolFields.nextToken();</span>

<span class="nc" id="L1500">				java.lang.String strTextHol = astrHolFields[0].trim();</span>

				try {
<span class="nc" id="L1503">					strORAHoliday = org.drip.analytics.date.DateUtil.MakeOracleDateFromYYYYMMDD (strTextHol);</span>
<span class="nc" id="L1504">				} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1505">					java.util.StringTokenizer stTextHol = new java.util.StringTokenizer (strTextHol, &quot; &quot;);</span>

<span class="nc" id="L1507">					strORAHoliday = org.drip.analytics.date.DateUtil.MakeOracleDateFromYYYYMMDD</span>
<span class="nc" id="L1508">						(stTextHol.nextToken().trim());</span>
<span class="nc" id="L1509">				}</span>

<span class="nc" id="L1511">				java.lang.String strDescription = astrHolFields[1].trim();</span>

<span class="nc bnc" id="L1513" title="All 4 branches missed.">				if (null != strDescription &amp;&amp; !strDescription.isEmpty())</span>
<span class="nc" id="L1514">					strDescription = strDescription.replaceAll (&quot;'&quot;, &quot;&quot;);</span>
				else
<span class="nc" id="L1516">					strDescription = &quot;&quot;;</span>

<span class="nc" id="L1518">				stmt.executeUpdate (&quot;delete from Holidays where Location = '&quot; + strHolLoc +</span>
					&quot;' and Holiday = '&quot; + strORAHoliday + &quot;'&quot;);

<span class="nc" id="L1521">				stmt.executeUpdate (&quot;insert into Holidays values('&quot; + strHolLoc + &quot;', '&quot; + strORAHoliday +</span>
					&quot;', '&quot; + strDescription + &quot;')&quot;);
<span class="nc" id="L1523">			} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1524">				System.out.println (strHolLoc + &quot;: Check line &quot; + strHolsLine);</span>
<span class="nc" id="L1525">			}</span>
<span class="nc" id="L1526">		}</span>

<span class="nc" id="L1528">		inHolCal.close();</span>
<span class="nc" id="L1529">	}</span>

	private static void LoadHolsToHolderSource (
		final java.io.BufferedWriter bw,
		final java.lang.String strHolLoc,
		final java.lang.String strHolLocFile)
		throws java.lang.Exception
	{
<span class="nc" id="L1537">		java.lang.String strHolsLine = &quot;&quot;;</span>
<span class="nc" id="L1538">		java.io.BufferedReader inHolCal = null;</span>

<span class="nc" id="L1540">		System.out.println (&quot;Loading &quot; + strHolLoc + &quot; from &quot; + strHolLocFile);</span>

		try {
<span class="nc" id="L1543">			inHolCal = new java.io.BufferedReader (new java.io.FileReader (strHolLocFile));</span>
<span class="nc" id="L1544">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1545">			System.out.println (&quot;Cannot open hol cal file&quot;);</span>

<span class="nc" id="L1547">			return;</span>
<span class="nc" id="L1548">		}</span>

<span class="nc bnc" id="L1550" title="All 2 branches missed.">		while (null != (strHolsLine = inHolCal.readLine())) {</span>
<span class="nc" id="L1551">			java.util.StringTokenizer stHolFields = new java.util.StringTokenizer (strHolsLine, &quot;	&quot;);</span>

			try {
<span class="nc" id="L1554">				java.lang.String[] astrHolFields = new java.lang.String[2];</span>
<span class="nc" id="L1555">				java.lang.String strORAHoliday = &quot;&quot;;</span>
<span class="nc" id="L1556">				astrHolFields[0] = &quot;&quot;;</span>
<span class="nc" id="L1557">				astrHolFields[1] = &quot;&quot;;</span>
<span class="nc" id="L1558">				int iFieldNum = 0;</span>

<span class="nc bnc" id="L1560" title="All 4 branches missed.">				while (stHolFields.hasMoreTokens() &amp;&amp; iFieldNum &lt; astrHolFields.length)</span>
<span class="nc" id="L1561">					astrHolFields[iFieldNum++] = stHolFields.nextToken();</span>

<span class="nc" id="L1563">				java.lang.String strTextHol = astrHolFields[0].trim();</span>

				try {
<span class="nc" id="L1566">					strORAHoliday = org.drip.analytics.date.DateUtil.MakeOracleDateFromYYYYMMDD (strTextHol);</span>
<span class="nc" id="L1567">				} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1568">					java.util.StringTokenizer stTextHol = new java.util.StringTokenizer (strTextHol, &quot; &quot;);</span>

<span class="nc" id="L1570">					strORAHoliday = org.drip.analytics.date.DateUtil.MakeOracleDateFromYYYYMMDD</span>
<span class="nc" id="L1571">						(stTextHol.nextToken().trim());</span>
<span class="nc" id="L1572">				}</span>

<span class="nc" id="L1574">				java.lang.String strDescription = astrHolFields[1].trim();</span>

<span class="nc bnc" id="L1576" title="All 4 branches missed.">				if (null != strDescription &amp;&amp; !strDescription.isEmpty())</span>
<span class="nc" id="L1577">					strDescription = strDescription.replaceAll (&quot;'&quot;, &quot;&quot;);</span>
				else
<span class="nc" id="L1579">					strDescription = &quot;&quot;;</span>

<span class="nc" id="L1581">				java.lang.String strLocHolDates = &quot;lh.addStaticHoliday (\&quot;&quot; + strORAHoliday + &quot;\&quot;, \&quot;&quot; +</span>
					strDescription + &quot;\&quot;);&quot;;

				if (m_bBlog) System.out.println (strLocHolDates);

<span class="nc" id="L1586">				bw.write (&quot;\t\t&quot; + strLocHolDates + &quot;\n\n&quot;);</span>
<span class="nc" id="L1587">			} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1588">				System.out.println (strHolLoc + &quot;: Check line &quot; + strHolsLine);</span>
<span class="nc" id="L1589">			}</span>
<span class="nc" id="L1590">		}</span>

<span class="nc" id="L1592">		bw.flush();</span>

<span class="nc" id="L1594">		inHolCal.close();</span>
<span class="nc" id="L1595">	}</span>

	private static final void LoadHolCals()
		throws java.lang.Exception
	{
<span class="nc" id="L1600">		java.lang.String strHolDir = &quot;c:\\Lakshmi\\java\\BondAnal\\Data\\Holidays\\&quot;;</span>

<span class="nc" id="L1602">		java.io.File f = new java.io.File (strHolDir);</span>

<span class="nc" id="L1604">		java.lang.String[] astrFile = f.list();</span>

<span class="nc bnc" id="L1606" title="All 2 branches missed.">		for (int i = 0; i &lt; astrFile.length; ++i) {</span>
<span class="nc" id="L1607">			java.util.StringTokenizer stLoc = new java.util.StringTokenizer (astrFile[i], &quot;.&quot;);</span>

<span class="nc" id="L1609">			java.lang.String strPrefix = stLoc.nextToken();</span>

<span class="nc bnc" id="L1611" title="All 2 branches missed.">			if (!&quot;holiday&quot;.equalsIgnoreCase (strPrefix)) continue;</span>

<span class="nc" id="L1613">			LoadHolidayCalendar (stLoc.nextToken().toUpperCase(), strHolDir + astrFile[i]);</span>
		}
<span class="nc" id="L1615">	}</span>

	private static final void AccumulateHolidays()
		throws java.lang.Exception
	{
<span class="nc" id="L1620">		java.lang.String strHolDir = &quot;c:\\Lakshmi\\BondAnal\\Data\\Holidays\\&quot;;</span>

<span class="nc" id="L1622">		java.io.File f = new java.io.File (strHolDir);</span>

<span class="nc" id="L1624">		java.lang.String[] astrFile = f.list();</span>

<span class="nc bnc" id="L1626" title="All 2 branches missed.">		for (int i = 0; i &lt; astrFile.length; ++i) {</span>
<span class="nc" id="L1627">			java.util.StringTokenizer stLoc = new java.util.StringTokenizer (astrFile[i], &quot;.&quot;);</span>

<span class="nc" id="L1629">			java.lang.String strPrefix = stLoc.nextToken();</span>

<span class="nc bnc" id="L1631" title="All 2 branches missed.">			if (!&quot;holiday&quot;.equalsIgnoreCase (strPrefix)) continue;</span>

<span class="nc" id="L1633">			java.lang.String strSuffix = stLoc.nextToken().toUpperCase();</span>

<span class="nc" id="L1635">			java.io.BufferedWriter bw = new java.io.BufferedWriter (new java.io.FileWriter</span>
				(&quot;c:\\DRIP\\CreditAnalytics\\org\\drip\\analytics\\holset\\&quot; + strSuffix + &quot;Holiday.java&quot;));

<span class="nc" id="L1638">			bw.write (&quot;\npackage org.drip.analytics.holset;\n\n&quot;);</span>

<span class="nc" id="L1640">			bw.write</span>
<span class="nc" id="L1641">				(&quot;/*\n * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-\n */\n&quot;);</span>

<span class="nc" id="L1643">			bw.write (&quot;\n/*\n *    GENERATED on &quot; + new java.util.Date().toString() +</span>
				&quot; ---- DO NOT DELETE\n */\n&quot;);

<span class="nc" id="L1646">			bw.write (&quot;\n/*!\n * Copyright (C) 2013 Lakshmi Krishnamurthy\n&quot;);</span>

<span class="nc" id="L1648">			bw.write (&quot; * Copyright (C) 2012 Lakshmi Krishnamurthy\n&quot;);</span>

<span class="nc" id="L1650">			bw.write (&quot; * Copyright (C) 2011 Lakshmi Krishnamurthy\n *\n&quot;);</span>

<span class="nc" id="L1652">			bw.write (&quot; * This file is part of CreditAnalytics, a free-software/open-source library for\n&quot;);</span>

<span class="nc" id="L1654">			bw.write (&quot; *		fixed income analysts and developers - http://www.credit-trader.org\n *\n&quot;);</span>

<span class="nc" id="L1656">			bw.write (&quot; * CreditAnalytics is a free, full featured, fixed income credit analytics library,&quot;);</span>

<span class="nc" id="L1658">			bw.write (&quot; developed with a special focus\n&quot;);</span>

<span class="nc" id="L1660">			bw.write (&quot; * 		towards the needs of the bonds and credit products community.\n *\n&quot;);</span>

<span class="nc" id="L1662">			bw.write (&quot; *  Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);\n&quot;);</span>

<span class="nc" id="L1664">			bw.write (&quot; *   	you may not use this file except in compliance with the License.\n&quot;);</span>

<span class="nc" id="L1666">			bw.write (&quot; *\n *  You may obtain a copy of the License at\n&quot;);</span>

<span class="nc" id="L1668">			bw.write (&quot; *  	http://www.apache.org/licenses/LICENSE-2.0\n *\n&quot;);</span>

<span class="nc" id="L1670">			bw.write (&quot; *  Unless required by applicable law or agreed to in writing, software\n&quot;);</span>

<span class="nc" id="L1672">			bw.write (&quot; *  	distributed under the License is distributed on an \&quot;AS IS\&quot; BASIS,\n&quot;);</span>

<span class="nc" id="L1674">			bw.write (&quot; *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n&quot;);</span>

<span class="nc" id="L1676">			bw.write (&quot; *  \n *  See the License for the specific language governing permissions and\n&quot;);</span>

<span class="nc" id="L1678">			bw.write (&quot; *  	limitations under the License.\n */\n\n&quot;);</span>

<span class="nc" id="L1680">			bw.write (&quot;public class &quot; + strSuffix +</span>
				&quot;Holiday implements org.drip.analytics.holset.LocationHoliday {\n&quot;);

<span class="nc" id="L1683">			bw.write (&quot;\tpublic &quot; + strSuffix + &quot;Holiday()\n\t{\n\t}\n\n&quot;);</span>

<span class="nc" id="L1685">			bw.write (&quot;\tpublic java.lang.String getHolidayLoc()\n\t{\n&quot;);</span>

<span class="nc" id="L1687">			bw.write (&quot;\t\treturn \&quot;&quot; + strSuffix + &quot;\&quot;;\n\t}\n\n&quot;);</span>

<span class="nc" id="L1689">			bw.write (&quot;\tpublic org.drip.analytics.holiday.Locale getHolidaySet()\n\t{&quot;);</span>

<span class="nc" id="L1691">			bw.write (&quot;\n\t\torg.drip.analytics.holiday.Locale lh = new\n&quot;);</span>

<span class="nc" id="L1693">			bw.write (&quot;\t\t\torg.drip.analytics.holiday.Locale();\n\n&quot;);</span>

<span class="nc" id="L1695">			LoadHolsToHolderSource (bw, strSuffix, strHolDir + astrFile[i]);</span>

<span class="nc" id="L1697">			bw.write (&quot;\t\tlh.addStandardWeekend();\n\n&quot;);</span>

<span class="nc" id="L1699">			bw.write (&quot;\t\treturn lh;\n\t}\n}\n&quot;);</span>

<span class="nc" id="L1701">			bw.close();</span>
		}
<span class="nc" id="L1703">	}</span>

	private static final void LoadEOS()
		throws java.lang.Exception
	{
<span class="nc" id="L1708">		int iNumSchedules = 0;</span>
<span class="nc" id="L1709">		java.lang.String strEOSLine = &quot;&quot;;</span>
<span class="nc" id="L1710">		java.io.BufferedReader inEOS = null;</span>

<span class="nc" id="L1712">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1713">			(&quot;c:\\Lakshmi\\BondAnal\\Config.xml&quot;);</span>

<span class="nc" id="L1715">		System.out.println (&quot;Loading EOS ...&quot;);</span>

		try {
<span class="nc" id="L1718">			inEOS = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;C:\\Lakshmi\\RefDataAndMarks\\17Jan2012\\OptionSchedule.csv&quot;));
<span class="nc" id="L1720">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1721">			System.out.println (&quot;Cannot open EOS file&quot;);</span>

<span class="nc" id="L1723">			return;</span>
<span class="nc" id="L1724">		}</span>

<span class="nc bnc" id="L1726" title="All 2 branches missed.">		while (null != (strEOSLine = inEOS.readLine())) {</span>
<span class="nc" id="L1727">			int iNumRecord = 0;</span>
<span class="nc" id="L1728">			java.lang.String astrEOS[] = new java.lang.String[14];</span>

<span class="nc" id="L1730">			java.util.StringTokenizer stEOS = new java.util.StringTokenizer (strEOSLine, &quot;,&quot;);</span>

<span class="nc bnc" id="L1732" title="All 2 branches missed.">			while (stEOS.hasMoreTokens()) {</span>
<span class="nc" id="L1733">				java.lang.String strEOS = stEOS.nextToken();</span>

<span class="nc" id="L1735">				astrEOS[iNumRecord++] = strEOS;</span>
<span class="nc" id="L1736">			}</span>

<span class="nc" id="L1738">			java.lang.String strClearEOS = ClearISINDateTypeFromEOS (astrEOS);</span>

<span class="nc bnc" id="L1740" title="All 4 branches missed.">			if (null != strClearEOS &amp;&amp; !strClearEOS.isEmpty()) stmt.executeQuery (strClearEOS);</span>

<span class="nc" id="L1742">			java.lang.String strInsertEOS = InsertIntoEOS (astrEOS);</span>

<span class="nc bnc" id="L1744" title="All 4 branches missed.">			if (null != strInsertEOS &amp;&amp; !strInsertEOS.isEmpty())</span>
<span class="nc" id="L1745">				stmt.executeQuery (strInsertEOS);</span>

<span class="nc" id="L1747">			++iNumSchedules;</span>
<span class="nc" id="L1748">		}</span>

<span class="nc" id="L1750">		inEOS.close();</span>

<span class="nc" id="L1752">		System.out.println (&quot;Loaded &quot; + iNumSchedules + &quot; into EOS.&quot;);</span>
<span class="nc" id="L1753">	}</span>

	private static final void LoadAmortizationSchedule()
		throws java.lang.Exception
	{
<span class="nc" id="L1758">		int iNumSchedules = 0;</span>
<span class="nc" id="L1759">		java.lang.String strAmortizationScheduleLine = &quot;&quot;;</span>
<span class="nc" id="L1760">		java.io.BufferedReader inAmortizationSchedule = null;</span>

<span class="nc" id="L1762">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1763">			(&quot;c:\\Lakshmi\\java\\BondAnal\\Config.xml&quot;);</span>

<span class="nc" id="L1765">		System.out.println (&quot;Loading AmortizationSchedule ...&quot;);</span>

		try {
<span class="nc" id="L1768">			inAmortizationSchedule = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;C:\\Lakshmi\\RefDataAndMarks\\17Jan2012\\AmortizationSchedule.csv&quot;));
<span class="nc" id="L1770">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1771">			System.out.println (&quot;Cannot open AmortizationSchedule file&quot;);</span>

<span class="nc" id="L1773">			return;</span>
<span class="nc" id="L1774">		}</span>

<span class="nc bnc" id="L1776" title="All 2 branches missed.">		while (null != (strAmortizationScheduleLine = inAmortizationSchedule.readLine())) {</span>
<span class="nc" id="L1777">			int iNumRecord = 0;</span>
<span class="nc" id="L1778">			java.lang.String astrAmortizationSchedule[] = new java.lang.String[5];</span>

<span class="nc" id="L1780">			java.util.StringTokenizer stAmortizationSchedule = new java.util.StringTokenizer</span>
				(strAmortizationScheduleLine, &quot;,&quot;);

<span class="nc bnc" id="L1783" title="All 2 branches missed.">			while (stAmortizationSchedule.hasMoreTokens()) {</span>
<span class="nc" id="L1784">				java.lang.String strAmortizationSchedule = stAmortizationSchedule.nextToken();</span>

<span class="nc" id="L1786">				astrAmortizationSchedule[iNumRecord++] = strAmortizationSchedule;</span>
<span class="nc" id="L1787">			}</span>

<span class="nc" id="L1789">			java.lang.String strClearAmortizationSchedule = makeSQLClearAmortScheduleEntry</span>
<span class="nc" id="L1790">				(astrAmortizationSchedule);</span>

<span class="nc bnc" id="L1792" title="All 4 branches missed.">			if (null != strClearAmortizationSchedule &amp;&amp; !strClearAmortizationSchedule.isEmpty())</span>
<span class="nc" id="L1793">				stmt.executeQuery (strClearAmortizationSchedule);</span>

<span class="nc" id="L1795">			java.lang.String strInsertAmortizationSchedule = InsertIntoAmortizationSchedule</span>
<span class="nc" id="L1796">				(astrAmortizationSchedule);</span>

<span class="nc bnc" id="L1798" title="All 4 branches missed.">			if (null != strInsertAmortizationSchedule &amp;&amp; !strInsertAmortizationSchedule.isEmpty())</span>
<span class="nc" id="L1799">				stmt.executeQuery (strInsertAmortizationSchedule);</span>

<span class="nc" id="L1801">			++iNumSchedules;</span>
<span class="nc" id="L1802">		}</span>

<span class="nc" id="L1804">		inAmortizationSchedule.close();</span>

<span class="nc" id="L1806">		System.out.println (&quot;Loaded &quot; + iNumSchedules + &quot; into AmortizationSchedule.&quot;);</span>
<span class="nc" id="L1807">	}</span>

	private static final void LoadIREOD()
		throws java.lang.Exception
	{
<span class="nc" id="L1812">		int iNumIREOD = 0;</span>
<span class="nc" id="L1813">		java.lang.String strIREODLine = &quot;&quot;;</span>
<span class="nc" id="L1814">		java.io.BufferedReader inIREOD = null;</span>

<span class="nc" id="L1816">		System.out.println (&quot;Loading IREOD ...&quot;);</span>

<span class="nc" id="L1818">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1819">			(&quot;c:\\Lakshmi\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1822">			inIREOD = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;C:\\Lakshmi\\RefDataAndMarks\\17Jan2012\\EODIRCurves.csv&quot;));
<span class="nc" id="L1824">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1825">			System.out.println (&quot;Cannot open IREOD file&quot;);</span>

<span class="nc" id="L1827">			return;</span>
<span class="nc" id="L1828">		}</span>

<span class="nc bnc" id="L1830" title="All 2 branches missed.">		while (null != (strIREODLine = inIREOD.readLine())) {</span>
<span class="nc" id="L1831">			int iNumRecord = 0;</span>
<span class="nc" id="L1832">			java.lang.String astrIREOD[] = new java.lang.String[58];</span>

<span class="nc" id="L1834">			java.util.StringTokenizer stIREOD = new java.util.StringTokenizer (strIREODLine, &quot;,&quot;);</span>

<span class="nc bnc" id="L1836" title="All 2 branches missed.">			while (stIREOD.hasMoreTokens())</span>
<span class="nc" id="L1837">				astrIREOD[iNumRecord++] = stIREOD.nextToken();</span>

<span class="nc" id="L1839">			java.lang.String strClearIREOD = ClearFromIREOD (astrIREOD);</span>

<span class="nc bnc" id="L1841" title="All 4 branches missed.">			if (null != strClearIREOD &amp;&amp; !strClearIREOD.isEmpty()) stmt.executeQuery (strClearIREOD);</span>

<span class="nc" id="L1843">			java.lang.String strInsertIREOD = InsertIntoIREOD (astrIREOD);</span>

<span class="nc bnc" id="L1845" title="All 4 branches missed.">			if (null != strInsertIREOD &amp;&amp; !strInsertIREOD.isEmpty()) stmt.executeQuery (strInsertIREOD);</span>

<span class="nc" id="L1847">			++iNumIREOD;</span>
<span class="nc" id="L1848">		}</span>

<span class="nc" id="L1850">		inIREOD.close();</span>

<span class="nc" id="L1852">		System.out.println (&quot;Loaded &quot; + iNumIREOD + &quot; into IR_EOD.&quot;);</span>
<span class="nc" id="L1853">	}</span>

	private static final void LoadBondSPN()
		throws java.lang.Exception
	{
<span class="nc" id="L1858">		int iNumSPN = 0;</span>
<span class="nc" id="L1859">		java.lang.String strSPNLine = &quot;&quot;;</span>
<span class="nc" id="L1860">		java.io.BufferedReader inSPN = null;</span>

<span class="nc" id="L1862">		System.out.println (&quot;Loading SPN ...&quot;);</span>

<span class="nc" id="L1864">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1865">			(&quot;c:\\Lakshmi\\java\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1868">			inSPN = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;c:\\Lakshmi\\BondAnal\\Data\\BondStaticRef\\Closes\\Bond.csv&quot;));
<span class="nc" id="L1870">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1871">			System.out.println (&quot;Cannot open SPN file&quot;);</span>

<span class="nc" id="L1873">			return;</span>
<span class="nc" id="L1874">		}</span>

<span class="nc bnc" id="L1876" title="All 2 branches missed.">		while (null != (strSPNLine = inSPN.readLine())) {</span>
<span class="nc" id="L1877">			java.lang.String[] astrSPN = strSPNLine.split (&quot;,&quot;);</span>

<span class="nc" id="L1879">			java.lang.String strISIN = astrSPN[0];</span>
<span class="nc" id="L1880">			java.lang.String strSPN = astrSPN[3];</span>

<span class="nc bnc" id="L1882" title="All 8 branches missed.">			if (null != strSPN &amp;&amp; !strSPN.isEmpty() &amp;&amp; null != strSPN &amp;&amp; !strSPN.isEmpty()) {</span>
<span class="nc" id="L1883">				stmt.executeQuery (&quot;update BondRef set IssuerSPN = '&quot; + strSPN + &quot;' where ISIN = '&quot; + strISIN</span>
					+ &quot;'&quot;);

<span class="nc" id="L1886">				++iNumSPN;</span>
			}
<span class="nc" id="L1888">		}</span>

<span class="nc" id="L1890">		System.out.println (&quot;Loaded &quot; + iNumSPN + &quot; SPNs into BondRef.&quot;);</span>

<span class="nc" id="L1892">		inSPN.close();</span>
<span class="nc" id="L1893">	}</span>

	private static final void LoadCREOD()
		throws java.lang.Exception
	{
<span class="nc" id="L1898">		int iNumCREOD = 0;</span>
<span class="nc" id="L1899">		java.lang.String strCREODLine = &quot;&quot;;</span>
<span class="nc" id="L1900">		java.io.BufferedReader inCREOD = null;</span>

<span class="nc" id="L1902">		System.out.println (&quot;Loading CREOD ...&quot;);</span>

<span class="nc" id="L1904">		java.sql.Statement stmt = org.drip.param.config.ConfigLoader.OracleInit</span>
<span class="nc" id="L1905">			(&quot;c:\\Lakshmi\\BondAnal\\Config.xml&quot;);</span>

		try {
<span class="nc" id="L1908">			inCREOD = new java.io.BufferedReader (new java.io.FileReader</span>
				(&quot;c:\\Lakshmi\\BondAnal\\Data\\BondStaticRef\\Closes\\EODCR_2Q_2011.csv&quot;));
<span class="nc" id="L1910">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L1911">			System.out.println (&quot;Cannot open CREOD file&quot;);</span>

<span class="nc" id="L1913">			return;</span>
<span class="nc" id="L1914">		}</span>

<span class="nc bnc" id="L1916" title="All 2 branches missed.">		while (null != (strCREODLine = inCREOD.readLine())) {</span>
<span class="nc" id="L1917">			java.lang.String[] astrCREOD = strCREODLine.split (&quot;,&quot;);</span>

<span class="nc" id="L1919">			java.lang.String strClearCREOD = ClearFromCREOD (astrCREOD);</span>

<span class="nc bnc" id="L1921" title="All 4 branches missed.">			if (null != strClearCREOD &amp;&amp; !strClearCREOD.isEmpty()) stmt.executeQuery (strClearCREOD);</span>

<span class="nc" id="L1923">			java.lang.String strInsertCREOD = InsertIntoCREOD (astrCREOD);</span>

<span class="nc bnc" id="L1925" title="All 4 branches missed.">			if (null != strInsertCREOD &amp;&amp; !strInsertCREOD.isEmpty()) {</span>
<span class="nc" id="L1926">				System.out.println (strInsertCREOD);</span>

<span class="nc" id="L1928">				stmt.executeQuery (strInsertCREOD);</span>
			}

<span class="nc" id="L1931">			++iNumCREOD;</span>
<span class="nc" id="L1932">		}</span>

<span class="nc" id="L1934">		System.out.println (&quot;Loaded &quot; + iNumCREOD + &quot; into CREOD.&quot;);</span>

<span class="nc" id="L1936">		inCREOD.close();</span>
<span class="nc" id="L1937">	}</span>

	public static void main (
		final java.lang.String[] astrArgs)
		throws java.lang.Exception
	{
<span class="nc bnc" id="L1943" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-loadbondref2&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1944">			LoadBondRef2();</span>

<span class="nc" id="L1946">			return;</span>
		}

<span class="nc bnc" id="L1949" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-loadbondref_fodata&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1950">			LoadBondRef_FODATA();</span>

<span class="nc" id="L1952">			return;</span>
		}

<span class="nc bnc" id="L1955" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-bondmarks&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1956">			LoadBondMarks();</span>

<span class="nc" id="L1958">			return;</span>
		}

<span class="nc bnc" id="L1961" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-holcals&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1962">			LoadHolCals();</span>

<span class="nc" id="L1964">			return;</span>
		}

<span class="nc bnc" id="L1967" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-acchols&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1968">			AccumulateHolidays();</span>

<span class="nc" id="L1970">			return;</span>
		}

<span class="nc bnc" id="L1973" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-eos&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1974">			LoadEOS();</span>

<span class="nc" id="L1976">			return;</span>
		}

<span class="nc bnc" id="L1979" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-amortsched&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1980">			LoadAmortizationSchedule();</span>

<span class="nc" id="L1982">			return;</span>
		}

<span class="nc bnc" id="L1985" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-ireod&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1986">			LoadIREOD();</span>

<span class="nc" id="L1988">			return;</span>
		}

<span class="nc bnc" id="L1991" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-creod&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1992">			LoadCREOD();</span>

<span class="nc" id="L1994">			return;</span>
		}

<span class="nc bnc" id="L1997" title="All 4 branches missed.">		if (0 &lt; astrArgs.length &amp;&amp; &quot;-spn&quot;.equalsIgnoreCase (astrArgs[0])) {</span>
<span class="nc" id="L1998">			LoadBondSPN();</span>

<span class="nc" id="L2000">			return;</span>
		}

<span class="nc" id="L2003">		LoadBondRef();</span>

<span class="nc" id="L2005">		LoadEOS();</span>

<span class="nc" id="L2007">		LoadBondSPN();</span>
<span class="nc" id="L2008">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>