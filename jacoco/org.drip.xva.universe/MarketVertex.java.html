<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MarketVertex.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DROP</a> &gt; <a href="index.source.html" class="el_package">org.drip.xva.universe</a> &gt; <span class="el_source">MarketVertex.java</span></div><h1>MarketVertex.java</h1><pre class="source lang-java linenums">
package org.drip.xva.universe;

/*
 * -*- mode: java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 */

/*!
 * Copyright (C) 2018 Lakshmi Krishnamurthy
 * Copyright (C) 2017 Lakshmi Krishnamurthy
 * 
 *  This file is part of DRIP, a free-software/open-source library for buy/side financial/trading model
 *  	libraries targeting analysts and developers
 *  	https://lakshmidrip.github.io/DRIP/
 *  
 *  DRIP is composed of four main libraries:
 *  
 *  - DRIP Fixed Income - https://lakshmidrip.github.io/DRIP-Fixed-Income/
 *  - DRIP Asset Allocation - https://lakshmidrip.github.io/DRIP-Asset-Allocation/
 *  - DRIP Numerical Optimizer - https://lakshmidrip.github.io/DRIP-Numerical-Optimizer/
 *  - DRIP Statistical Learning - https://lakshmidrip.github.io/DRIP-Statistical-Learning/
 * 
 *  - DRIP Fixed Income: Library for Instrument/Trading Conventions, Treasury Futures/Options,
 *  	Funding/Forward/Overnight Curves, Multi-Curve Construction/Valuation, Collateral Valuation and XVA
 *  	Metric Generation, Calibration and Hedge Attributions, Statistical Curve Construction, Bond RV
 *  	Metrics, Stochastic Evolution and Option Pricing, Interest Rate Dynamics and Option Pricing, LMM
 *  	Extensions/Calibrations/Greeks, Algorithmic Differentiation, and Asset Backed Models and Analytics.
 * 
 *  - DRIP Asset Allocation: Library for model libraries for MPT framework, Black Litterman Strategy
 *  	Incorporator, Holdings Constraint, and Transaction Costs.
 * 
 *  - DRIP Numerical Optimizer: Library for Numerical Optimization and Spline Functionality.
 * 
 *  - DRIP Statistical Learning: Library for Statistical Evaluation and Machine Learning.
 * 
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *   	you may not use this file except in compliance with the License.
 *   
 *  You may obtain a copy of the License at
 *  	http://www.apache.org/licenses/LICENSE-2.0
 *  
 *  Unless required by applicable law or agreed to in writing, software
 *  	distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  
 *  See the License for the specific language governing permissions and
 *  	limitations under the License.
 */

/**
 * MarketVertex holds the Market Realizations at a Market Trajectory Vertex needed for computing the
 *  Valuation Adjustment. The References are:&lt;br&gt;&lt;br&gt;
 *  
 *  - Burgard, C., and M. Kjaer (2013): Funding Strategies, Funding Costs &lt;i&gt;Risk&lt;/i&gt; &lt;b&gt;24 (12)&lt;/b&gt;
 *  	82-87.&lt;br&gt;&lt;br&gt;
 *  
 *  - Burgard, C., and M. Kjaer (2014): PDE Representations of Derivatives with Bilateral Counter-party Risk
 *  	and Funding Costs &lt;i&gt;Journal of Credit Risk&lt;/i&gt; &lt;b&gt;7 (3)&lt;/b&gt; 1-19.&lt;br&gt;&lt;br&gt;
 *  
 *  - Burgard, C., and M. Kjaer (2014): In the Balance &lt;i&gt;Risk&lt;/i&gt; &lt;b&gt;24 (11)&lt;/b&gt; 72-75.&lt;br&gt;&lt;br&gt;
 *  
 *  - Gregory, J. (2009): Being Two-faced over Counter-party Credit Risk &lt;i&gt;Risk&lt;/i&gt; &lt;b&gt;20 (2)&lt;/b&gt;
 *  	86-90.&lt;br&gt;&lt;br&gt;
 * 
 *  - Piterbarg, V. (2010): Funding Beyond Discounting: Collateral Agreements and Derivatives Pricing
 *  	&lt;i&gt;Risk&lt;/i&gt; &lt;b&gt;21 (2)&lt;/b&gt; 97-102.&lt;br&gt;&lt;br&gt;
 * 
 * @author Lakshmi Krishnamurthy
 */

public class MarketVertex
{
<span class="fc" id="L73">	private double _csaSpread = java.lang.Double.NaN;</span>
<span class="fc" id="L74">	private double _csaReplicator = java.lang.Double.NaN;</span>
<span class="fc" id="L75">	private double _overnightRate = java.lang.Double.NaN;</span>
<span class="fc" id="L76">	private double _overnightReplicator = java.lang.Double.NaN;</span>
<span class="fc" id="L77">	private double _positionManifestValue = java.lang.Double.NaN;</span>
<span class="fc" id="L78">	private org.drip.analytics.date.JulianDate _anchorDate = null;</span>
<span class="fc" id="L79">	private org.drip.xva.universe.MarketVertexEntity _clientMarketVertex = null;</span>
<span class="fc" id="L80">	private org.drip.xva.universe.MarketVertexEntity _dealerMarketVertex = null;</span>

	/**
	 * Generate an Initial Instance of MarketVertex
	 * 
	 * @param anchorDate The Anchor Date
	 * @param positionManifestValue Realized Position Manifest Value
	 * @param overnightReplicator The Realized Overnight Latent State Replicator
	 * @param csaReplicator The Realized CSA Latent State Replicator
	 * @param dealerHazardRate Realized Dealer Hazard Rate
	 * @param dealerRecoveryRate Realized Dealer Recovery Rate
	 * @param dealerFundingSpread Realized Dealer Funding Spread
	 * @param clientHazardRate Realized Client Hazard Rate
	 * @param clientRecoveryRate Realized Client Recovery Rate
	 * @param clientFundingSpread Realized Client Funding Spread
	 * 
	 * @return The Initial MarketVertex Instance
	 */

	public static final MarketVertex StartUp (
		final org.drip.analytics.date.JulianDate anchorDate,
		final double positionManifestValue,
		final double overnightReplicator,
		final double csaReplicator,
		final double dealerHazardRate,
		final double dealerRecoveryRate,
		final double dealerFundingSpread,
		final double clientHazardRate,
		final double clientRecoveryRate,
		final double clientFundingSpread)
	{
		try {
<span class="nc" id="L112">			return new org.drip.xva.universe.MarketVertex (</span>
				anchorDate,
				positionManifestValue,
				0.,
				overnightReplicator,
				0.,
				csaReplicator,
<span class="nc" id="L119">				org.drip.xva.universe.MarketVertexEntity.Senior (</span>
					0.,
					dealerHazardRate,
					dealerRecoveryRate,
					dealerFundingSpread
				),
<span class="nc" id="L125">				org.drip.xva.universe.MarketVertexEntity.Senior (</span>
					0.,
					clientHazardRate,
					clientRecoveryRate,
					clientFundingSpread
				)
			);
<span class="nc" id="L132">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L133">			e.printStackTrace();</span>
		}

<span class="nc" id="L136">		return null;</span>
	}

	/**
	 * Generate an Initial Instance of MarketVertex
	 * 
	 * @param anchorDate The Anchor Date
	 * @param positionManifestValue Realized Position Manifest Value
	 * @param overnightReplicator The Realized Overnight Latent State Replicator
	 * @param csaReplicator The Realized CSA Latent State Replicator
	 * @param dealerHazardRate Realized Dealer Hazard Rate
	 * @param dealerSeniorRecoveryRate Realized Dealer Senior Recovery Rate
	 * @param dealerSeniorFundingSpread Realized Dealer Senior Funding Spread
	 * @param dealerSubordinateRecoveryRate Realized Dealer Subordinate Recovery Rate
	 * @param dealerSubordinateFundingSpread Realized Dealer Subordinate Funding Spread
	 * @param clientHazardRate Realized Client Hazard Rate
	 * @param clientRecoveryRate Realized Client Recovery Rate
	 * @param clientFundingSpread Realized Client Funding Spread
	 * 
	 * @return The Initial MarketVertex Instance
	 */

	public static final MarketVertex StartUp (
		final org.drip.analytics.date.JulianDate anchorDate,
		final double positionManifestValue,
		final double overnightReplicator,
		final double csaReplicator,
		final double dealerHazardRate,
		final double dealerSeniorRecoveryRate,
		final double dealerSeniorFundingSpread,
		final double dealerSubordinateRecoveryRate,
		final double dealerSubordinateFundingSpread,
		final double clientHazardRate,
		final double clientRecoveryRate,
		final double clientFundingSpread)
	{
		try {
<span class="nc" id="L173">			return new org.drip.xva.universe.MarketVertex (</span>
				anchorDate,
				positionManifestValue,
				0.,
				overnightReplicator,
				0.,
				csaReplicator,
<span class="nc" id="L180">				org.drip.xva.universe.MarketVertexEntity.SeniorSubordinate (</span>
					0.,
					dealerHazardRate,
					dealerSeniorRecoveryRate,
					dealerSeniorFundingSpread,
					dealerSubordinateRecoveryRate,
					dealerSubordinateFundingSpread
				),
<span class="nc" id="L188">				org.drip.xva.universe.MarketVertexEntity.Senior (</span>
					0.,
					clientHazardRate,
					clientRecoveryRate,
					clientFundingSpread
				)
			);
<span class="nc" id="L195">		} catch (java.lang.Exception e) {</span>
<span class="nc" id="L196">			e.printStackTrace();</span>
		}

<span class="nc" id="L199">		return null;</span>
	}

	/**
	 * Construct a Single Manifest Measure Market Vertex
	 * 
	 * @param anchorDate The Vertex Date Anchor
	 * @param positionManifestValue The Realized Position Manifest Value
	 * @param overnightRate The Realized Overnight Rate
	 * @param overnightReplicator The Realized Overnight Latent State Replicator
	 * @param csaSpread The Realized CSA Spread
	 * @param csaReplicator The Realized CSA Latent State Replicator
	 * @param dealerMarketVertex Dealer Market Vertex Instance
	 * @param clientMarketVertex Client Market Vertex Instance
	 * 
	 * @return The Single Manifest Measure Market Vertex Instance
	 */

	public static final MarketVertex SingleManifestMeasure (
		final org.drip.analytics.date.JulianDate anchorDate,
		final double positionManifestValue,
		final double overnightRate,
		final double overnightReplicator,
		final double csaSpread,
		final double csaReplicator,
		final org.drip.xva.universe.MarketVertexEntity dealerMarketVertex,
		final org.drip.xva.universe.MarketVertexEntity clientMarketVertex)
	{
		try
		{
<span class="fc" id="L229">			return new MarketVertex (</span>
				anchorDate,
				positionManifestValue,
				overnightRate,
				overnightReplicator,
				csaSpread,
				csaReplicator,
				dealerMarketVertex,
				clientMarketVertex
			);
		}
<span class="nc" id="L240">		catch (java.lang.Exception e)</span>
		{
<span class="nc" id="L242">			e.printStackTrace();</span>
		}

<span class="nc" id="L245">		return null;</span>
	}

	/**
	 * MarketVertex Constructor
	 * 
	 * @param anchorDate The Vertex Date Anchor
	 * @param positionManifestValue The Realized Position Manifest Value
	 * @param overnightRate The Realized Overnight Rate
	 * @param overnightReplicator The Realized Overnight Latent State Replicator
	 * @param csaSpread The Realized CSA Spread
	 * @param csaReplicator The Realized CSA Latent State Replicator
	 * @param dealerMarketVertex Dealer Market Vertex Instance
	 * @param clientMarketVertex Client Market Vertex Instance
	 * 
	 * @throws java.lang.Exception Thrown if the Inputs are Invalid
	 */

	protected MarketVertex (
		final org.drip.analytics.date.JulianDate anchorDate,
		final double positionManifestValue,
		final double overnightRate,
		final double overnightReplicator,
		final double csaSpread,
		final double csaReplicator,
		final org.drip.xva.universe.MarketVertexEntity dealerMarketVertex,
		final org.drip.xva.universe.MarketVertexEntity clientMarketVertex)
		throws java.lang.Exception
<span class="fc" id="L273">	{</span>
<span class="pc bpc" id="L274" title="1 of 2 branches missed.">		if (null == (_anchorDate = anchorDate) ||</span>
<span class="pc bpc" id="L275" title="1 of 2 branches missed.">			!org.drip.quant.common.NumberUtil.IsValid (_overnightRate = overnightRate) ||</span>
<span class="pc bpc" id="L276" title="1 of 2 branches missed.">			!org.drip.quant.common.NumberUtil.IsValid (_overnightReplicator = overnightReplicator) ||</span>
<span class="pc bpc" id="L277" title="1 of 2 branches missed.">			!org.drip.quant.common.NumberUtil.IsValid (_csaSpread = csaSpread) ||</span>
<span class="pc bpc" id="L278" title="3 of 6 branches missed.">			!org.drip.quant.common.NumberUtil.IsValid (_csaReplicator = csaReplicator) ||</span>
			null == (_dealerMarketVertex = dealerMarketVertex) ||
			null == (_clientMarketVertex = clientMarketVertex))
		{
<span class="nc" id="L282">			throw new java.lang.Exception (&quot;MarketVertex Constructor =&gt; Invalid Inputs&quot;);</span>
		}

<span class="fc" id="L285">		_positionManifestValue = positionManifestValue;</span>
<span class="fc" id="L286">	}</span>

	/**
	 * Retrieve the Date Anchor
	 * 
	 * @return The Date Anchor
	 */

	public org.drip.analytics.date.JulianDate anchorDate()
	{
<span class="fc" id="L296">		return _anchorDate;</span>
	}

	/**
	 * Retrieve the Realized Position Manifest Value
	 * 
	 * @return The Realized Position Manifest Value
	 */

	public double positionManifestValue()
	{
<span class="fc" id="L307">		return _positionManifestValue;</span>
	}

	/**
	 * Retrieve the Realized Overnight Index Rate
	 * 
	 * @return The Realized Overnight Index Rate
	 */

	public double overnightRate()
	{
<span class="fc" id="L318">		return _overnightRate;</span>
	}

	/**
	 * Retrieve the Realized Overnight Index Numeraire
	 * 
	 * @return The Realized Overnight Index Numeraire
	 */

	public double overnightReplicator()
	{
<span class="fc" id="L329">		return _overnightReplicator;</span>
	}

	/**
	 * Retrieve the Realized Spread over the Overnight Policy Rate corresponding to the CSA Scheme
	 * 
	 * @return The Realized Spread over the Overnight Policy Rate corresponding to the CSA Scheme
	 */

	public double csaSpread()
	{
<span class="fc" id="L340">		return _csaSpread;</span>
	}

	/**
	 * Retrieve the Realized CSA Scheme Numeraire
	 * 
	 * @return The Realized CSA Scheme Numeraire
	 */

	public double csaReplicator()
	{
<span class="fc" id="L351">		return _csaReplicator;</span>
	}

	/**
	 * Retrieve the Realized CSA Scheme Rate
	 * 
	 * @return The Realized CSA Scheme Rate
	 */

	public double csaRate()
	{
<span class="fc" id="L362">		return _overnightRate + _csaSpread;</span>
	}

	/**
	 * Retrieve the Realized Dealer Senior Market Vertex
	 * 
	 * @return The Realized Dealer Senior Market Vertex
	 */

	public org.drip.xva.universe.MarketVertexEntity dealer()
	{
<span class="fc" id="L373">		return _dealerMarketVertex;</span>
	}

	/**
	 * Retrieve the Realized Client Market Vertex
	 * 
	 * @return The Realized Client Market Vertex
	 */

	public org.drip.xva.universe.MarketVertexEntity client()
	{
<span class="fc" id="L384">		return _clientMarketVertex;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>